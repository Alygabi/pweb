!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4384928a-46f5-311a-9601-bbc392e971fa")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_i18n","./c_api_v2_client_base"],(function(e,t,a,r,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=n(t);a.injectInternalStyle("/static/metaserver/static/js/auth/verify_email/content/default.module.out-vflaS8L0p.css",(e=>"._resend-button_1qr2h_1{color:var(--Primary-On-Surface,#0057e0)}._code-text-input-wrapper_1qr2h_5{border-radius:8px;height:80px;padding:0}._code-text-input-wrapper_1qr2h_5 input._code-text-input_1qr2h_5[type=text]{font-size:28px;line-height:1em;padding:var(--dig-spacing__micro__xlarge);text-align:center;width:1ch}._code-text-input-wrapper_1qr2h_5 input._code-text-input-small_1qr2h_25[type=text]{font-size:28px;line-height:1em;padding:var(--dig-spacing__micro__large);text-align:center;width:1ch}@media (max-width:456px){._code-text-input-wrapper_1qr2h_5{height:80px}._code-text-input-wrapper_1qr2h_5 input._code-text-input_1qr2h_5[type=text]{font-size:20px;padding:0 var(--dig-spacing__micro__large)}._verify-email-wrapper_1qr2h_43{max-width:456px}}"));var l;function c(e){return{class:"verify_email",action:"start",object:"email_verification_component_code_input",properties:e}}!function(e){e.DEFAULT="default",e.CODE="code"}(l||(l={}));const s=r.intl.formatMessage({id:"HSJula",defaultMessage:"Double-check the code and try again."}),_=r.intl.formatMessage({id:"UDcbjZ",defaultMessage:"Too many attempts. Please try again later."}),u=r.intl.formatMessage({id:"9Hycd5",defaultMessage:"Unable to verify code. Please try again later."});var d;!function(e){e.ATTEMPT_RATE_EXCEEDED="err_attempt_rate_exceeded",e.VERIFICATION_CODE_INVALID="err_verification_code_invalid",e.OTHER="err_other"}(d||(d={}));const p={attempt_rate_exceeded:d.ATTEMPT_RATE_EXCEEDED,verification_code_invalid:d.VERIFICATION_CODE_INVALID,incorrect_email_mfa:d.VERIFICATION_CODE_INVALID};e.CodeInput=e=>{const n=t.useRef(Array.from({length:6},(()=>t.createRef()))),[f,m]=t.useState(Array(6).fill("")),[g,E]=t.useState(null),[v,h]=t.useState(!1),[y,x]=t.useState(!1),D=(t,a)=>{m(f.map(((e,r)=>r===t?a:e))),e.onCodeChange&&e.onCodeChange(f.join(""))};t.useEffect((()=>{f.every((e=>""!==e))&&C()}),[f]);const C=async()=>{var t,r;if(!v){try{h(!0),E(null),a.UDCL.logStart(c({actionSurface:e.surface,verifyEmailComponent:l.CODE}),{tags:{action_surface:e.surface,verify_email_component:l.CODE}}),await e.onSubmit(f.join("")),a.UDCL.logEnd(c({actionSurface:e.surface,verifyEmailComponent:l.CODE,eventState:"success"}),{tags:{action_surface:e.surface,verify_email_component:l.CODE}}),x(!1),e.onSuccess&&e.onSuccess()}catch(n){const o=null===(r=null===(t=i.filterApiError(n))||void 0===t?void 0:t.error)||void 0===r?void 0:r[".tag"],f=p[o];f?(a.UDCL.logEnd(c({actionSurface:e.surface,verifyEmailComponent:l.CODE,eventState:"rejected"}),{tags:{action_surface:e.surface,verify_email_component:l.CODE,verify_email_fail_reason:f}}),f===d.ATTEMPT_RATE_EXCEEDED?E(_):E(s)):(a.UDCL.logEnd(c({actionSurface:e.surface,verifyEmailComponent:l.CODE,eventState:"failed"}),{tags:{action_surface:e.surface,verify_email_component:l.CODE,verify_email_fail_reason:d.OTHER}}),E(u)),e.onError&&e.onError(n),x(!0),m(Array(6).fill("")),T(0)}h(!1)}},T=e=>{if(!(e>=6)&&e<6&&e>=0){const t=n.current[e].current;t.focus(),t.select()}},S=e=>e.replace(/[^\d]/g,""),w="small"===e.size?"Micro Small":"Micro Large",A="small"===e.size?"small":"medium",I="small"===e.size?"_code-text-input-small_1qr2h_25":"_code-text-input_1qr2h_5";return o.default.createElement(a.FormRow,null,o.default.createElement(a.Split,{isFlexGap:!1,gap:w,alignX:"center"},f.map(((e,t)=>o.default.createElement(a.Split.Item,{key:`code-text-input-${t}`},o.default.createElement(a.TextInput,{id:`code-text-input-${t}`,"data-testid":`code-test-input-${t}`,ref:n.current[t],autoFocus:0===t,isInvalid:y,maxLength:1,width:1,size:A,"aria-label":r.intl.formatMessage({id:"eMS4/n",defaultMessage:"Email code verification input field"}),className:I,wrapperProps:{className:"_code-text-input-wrapper_1qr2h_5"},onChange:e=>((e,t)=>{const a=S(e.target.value);a.length>0&&(D(t,a),T(t+1))})(e,t),onKeyDown:e=>((e,t)=>{"e"===e.key?e.preventDefault():"Backspace"===e.key?(T(t-1),D(t,""),e.preventDefault()):"ArrowUp"===e.key||"ArrowDown"===e.key?e.preventDefault():"ArrowLeft"===e.key?(T(t-1),e.preventDefault()):"ArrowRight"===e.key?(T(t+1),e.preventDefault()):e.key>="0"&&e.key<="9"&&f[t]===e.key&&(e.preventDefault(),T(t+1))})(e,t),onFocus:e=>e.target.select(),onPaste:e=>((e,t)=>{e.preventDefault();const a=e.clipboardData,r=S(a.getData("Text"));if(0===r.length)return;const i=t+r.length,n=[...f.slice(0,t),...r.split(""),...f.slice(r.length+t)].slice(0,6);m(n),T(i)})(e,t),value:e,autoComplete:"off"}))))),o.default.createElement(o.default.Fragment,null,null!==g&&o.default.createElement(a.Box,{backgroundColor:"Alert Surface - State 1",marginTop:"16",paddingTop:"2",paddingBottom:"8",paddingLeft:"12",paddingRight:"12"},o.default.createElement(a.FormHelperText,null,o.default.createElement(a.UIIcon,{src:a.FailLine,size:"medium"}),o.default.createElement(a.Text,{size:"medium"},g)))))}}));
//# sourceMappingURL=c_verify_email_content_code_input.js-vflVZZ7a2.map

//# debugId=4384928a-46f5-311a-9601-bbc392e971fa