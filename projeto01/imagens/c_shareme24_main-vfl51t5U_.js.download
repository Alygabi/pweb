!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="599b8acf-f0b6-35ec-9c74-3ae6da308b7f")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","react-dom","./e_file_viewer_static_scl_page_file","./c_utils_dsx_dsx-react","./c_api-v2-client_src_dropbox","./c_init_data_debug_panel","./c_react_query_helpers_queries_login_and_register_constants","./c_ui_share-blocking-wrapper_share_blocking_wrapper","./c_browser_browser_detection","./e_data_modules_stormcrow","./c_maestro_nav_shared_code_dropbox_logo","./c_react-use_misc_util","./c_dig-content-icons_icons_folder-shared-default-small","./c_browse_welcome_hub_lib_types","./c_shared_with_redux_store","./c_contacts_contact","./c_validators","./c_sharing_sharing_pap_logging_send_share_invite_util","./c_dig-components_typeahead_index","./c_dig-icons_assets_ui-icon_line_share","./c_dig-icons_assets_ui-icon_line_settings","./c_dig-icons_assets_ui-icon_line_undo"],(function(e,t,a,n,r,o,i,s,l,d,c,_,u,m,g,p,E,f,h,S,v,A,b,y,M){"use strict";function I(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var T=I(a),C=I(r);const R={viewer_no_comment:-10,viewer:1,editor:2,owner:3},w={".tag":"owner"},N={".tag":"viewer"},L={".tag":"editor"},k={".tag":"viewer_no_comment"},O={".tag":"other"};function x(e){return e.requested_visibility===o.RequestedVisibilityPolicy.password||e.require_password}function D(e){return e.audience_options.filter((e=>"password"===e.audience&&e.allowed)).length>0}function P(e){if(e.effective_audience)return e.effective_audience;switch(e.resolved_visibility){case"public":case"password":case"no_one":return e.resolved_visibility;case"team_only":return"team";case"team_and_password":return"password";case"shared_folder_only":case"only_you":return"no_one"}}const F={day_1:1,day_3:3,day_7:7,day_30:30,day_90:90,day_180:180,year_1:365};function $(e){return["public","password"].includes(e)}function H(e){return!!e.days_to_expire_policy&&"none"!==e.days_to_expire_policy}function B(e){return!!e.enforce_shared_link_password_policy&&"required"===e.enforce_shared_link_password_policy}function U(e){return H(e)&&!!e.change_shared_link_expiration_policy&&"not_allowed"===e.change_shared_link_expiration_policy}function j(e,t){return $(e.audience)&&(!e.expires&&U(t)||!x(t)&&B(t))}const V=(e,t)=>Boolean(!e||t);class G{static initClass(){this.ACCURACY=2,this.CODEPOINT_TO_WIDTH={32:38,33:25,34:42,35:67,36:58,37:92,38:75,39:25,40:33,41:33,42:58,43:58,44:25,45:33,46:25,47:42,48:58,49:58,50:58,51:58,52:58,53:58,54:58,55:58,56:58,57:58,58:25,59:25,60:58,61:58,62:58,63:50,64:100,65:67,66:67,67:67,68:75,69:58,70:58,71:75,72:83,73:33,74:25,75:67,76:58,77:100,78:83,79:83,80:67,81:83,82:67,83:58,84:58,85:75,86:67,87:100,88:67,89:58,90:58,91:33,92:42,93:33,94:58,95:50,96:67,97:58,98:67,99:50,100:67,101:58,102:33,103:58,104:67,105:25,106:25,107:58,108:25,109:100,110:67,111:67,112:67,113:67,114:42,115:50,116:42,117:67,118:58,119:83,120:58,121:58,122:50,123:42,124:58,125:42,126:58,161:25,162:58,163:58,164:58,165:58,166:58,167:58,168:67,169:92,170:42,171:50,172:58,174:92,175:58,176:50,177:58,178:42,179:42,180:67,181:67,182:75,183:25,184:25,185:42,186:42,187:50,188:83,189:83,190:83,191:50,192:67,193:67,194:67,195:67,196:67,197:67,198:92,199:67,200:58,201:58,202:58,203:58,204:33,205:33,206:33,207:33,208:75,209:83,210:83,211:83,212:83,213:83,214:83,215:58,216:83,217:75,218:75,219:75,220:75,221:58,222:67,223:67,224:58,225:58,226:58,227:58,228:58,229:58,230:92,231:50,232:58,233:58,234:58,235:58,236:25,237:25,238:25,239:25,240:67,241:67,242:67,243:67,244:67,245:67,246:67,247:58,248:67,249:67,250:67,251:67,252:67,253:58,254:67,255:58,256:75,257:67,258:75,259:67,260:75,261:67,262:75,263:58,264:75,265:58,266:75,267:58,268:75,269:58,270:83,271:83,272:83,273:75,274:67,275:67,276:67,277:67,278:67,279:67,280:67,281:67,282:67,283:67,284:83,285:75,286:83,287:75,288:83,289:75,290:83,291:75,292:83,293:75,294:92,295:75,296:33,297:33,298:33,299:33,300:33,301:33,302:33,303:33,304:33,305:25,306:67,307:67,308:42,309:33,310:75,311:67,312:67,313:58,314:33,315:58,316:33,317:58,318:42,319:58,320:50,321:67,322:42,323:83,324:75,325:83,326:75,327:83,328:75,329:83,330:83,331:75,332:92,333:67,334:92,335:67,336:92,337:67,338:100,339:100,340:75,341:50,342:75,343:50,344:75,345:50,346:67,347:58,348:67,349:58,350:67,351:58,352:67,353:58,354:75,355:42,356:75,357:42,358:75,359:42,360:83,361:75,362:83,363:75,364:83,365:75,366:83,367:75,368:83,369:75,370:83,371:75,372:100,373:92,374:75,375:58,376:75,377:67,378:67,379:67,380:67,381:67,382:67,383:42,384:75,385:83,386:67,387:75,388:75,389:67,390:75,391:83,392:58,393:83,394:100,395:67,396:75,397:67,398:67,399:75,400:58,401:58,402:75,403:83,404:75,405:100,406:50,407:50,408:75,409:67,410:50,411:67,412:117,413:83,414:75,415:92,416:92,417:75,418:117,419:100,420:75,421:75,422:75,423:67,424:58,425:67,426:58,427:42,428:75,429:42,430:75,431:83,432:75,433:92,434:83,435:75,436:75,437:67,438:67,439:67,440:67,441:58,442:58,443:75,444:75,445:58,446:50,447:67,448:33,449:50,450:50,451:33,452:142,453:142,454:133,455:100,456:92,457:67,458:117,459:117,460:100,461:75,462:67,463:33,464:33,465:92,466:67,467:83,468:75,469:83,470:75,471:83,472:75,473:83,474:75,475:83,476:75,477:67,478:75,479:67,480:75,481:67,482:100,483:100,484:92,485:75,486:83,487:75,488:75,489:67,490:92,491:67,492:92,493:67,494:67,495:58,496:33,497:142,498:142,499:133,500:83,501:75,502:117,503:67,504:83,505:75,506:75,507:67,508:100,509:100,510:92,511:67,512:75,513:67,514:75,515:67,516:67,517:67,518:67,519:67,520:33,521:33,522:33,523:33,524:92,525:67,526:92,527:67,528:75,529:50,530:75,531:50,532:83,533:75,534:83,535:75,536:67,537:58,538:75,539:42,540:58,541:58,542:83,543:75,544:83,545:100,546:92,547:67,548:67,549:67,550:75,551:67,552:67,553:67,554:92,555:67,556:92,557:67,558:92,559:67,560:92,561:67,562:75,563:58,564:67,565:100,566:67,567:33,568:100,569:100,570:75,571:75,572:58,573:58,574:67,575:58,576:58,577:67,578:50,579:75,580:75,581:75,582:75,583:58,584:58,585:25,586:83,587:58,588:75,589:33,590:75,591:58,880:67,881:50,882:67,883:50,884:33,885:33,886:75,887:67,888:108,889:108,890:67,891:58,892:58,893:58,894:42,895:108,896:108,897:108,898:108,899:108,900:67,901:67,902:75,903:42,904:83,905:100,906:58,907:108,908:100,909:108,910:100,911:100,912:42,913:75,914:67,915:58,916:83,917:67,918:67,919:83,920:92,921:33,922:75,923:75,924:100,925:83,926:75,927:92,928:83,929:67,930:108,931:67,932:75,933:75,934:83,935:75,936:83,937:92,938:33,939:75,940:83,941:58,942:75,943:42,944:67,945:83,946:67,947:67,948:67,949:58,950:75,951:75,952:67,953:42,954:67,955:67,956:75,957:67,958:67,959:67,960:92,961:67,962:67,963:75,964:67,965:67,966:92,967:67,968:92,969:100,970:42,971:67,972:67,973:67,974:100,975:108,976:58,977:75,978:75,979:100,980:75,981:92,982:100,983:67,984:92,985:67,986:75,987:58,988:58,989:58,990:67,991:58,992:75,993:92,994:100,995:92,996:75,997:58,998:75,999:58,1e3:75,1001:75,1002:67,1003:67,1004:83,1005:58,1006:50,1007:42,1008:67,1009:67,1010:58,1011:33,1012:92,1013:58,1014:58,1015:67,1016:67,1017:75,1018:100,1019:83,1020:58,1021:75,1022:75,1023:75,1024:67,1025:67,1026:92,1027:58,1028:75,1029:67,1030:33,1031:33,1032:42,1033:108,1034:108,1035:83,1036:75,1037:83,1038:75,1039:83,1040:75,1041:67,1042:67,1043:58,1044:83,1045:67,1046:92,1047:67,1048:83,1049:83,1050:75,1051:83,1052:100,1053:83,1054:92,1055:83,1056:67,1057:75,1058:75,1059:75,1060:83,1061:75,1062:83,1063:75,1064:108,1065:108,1066:75,1067:92,1068:67,1069:75,1070:108,1071:75,1072:67,1073:67,1074:58,1075:58,1076:75,1077:67,1078:83,1079:58,1080:75,1081:75,1082:67,1083:67,1084:83,1085:75,1086:67,1087:75,1088:75,1089:58,1090:58,1091:58,1092:92,1093:67,1094:75,1095:58,1096:92,1097:100,1098:67,1099:83,1100:58,1101:58,1102:92,1103:58,1104:67,1105:67,1106:75,1107:58,1108:58,1109:58,1110:33,1111:33,1112:42,1113:92,1114:92,1115:75,1116:67,1117:75,1118:58,1119:75,1120:100,1121:75,1122:75,1123:67,1124:83,1125:83,1126:75,1127:67,1128:100,1129:92,1130:92,1131:83,1132:117,1133:108,1134:67,1135:67,1136:83,1137:83,1138:92,1139:67,1140:83,1141:67,1142:83,1143:67,1144:133,1145:125,1146:92,1147:67,1148:100,1149:75,1150:100,1151:75,1152:75,1153:58,1154:75,1155:0,1156:0,1157:0,1158:0,1159:108,1160:0,1161:0,1162:83,1163:75,1164:67,1165:58,1166:67,1167:75,1168:58,1169:58,1170:67,1171:58,1172:75,1173:67,1174:100,1175:92,1176:67,1177:58,1178:75,1179:67,1180:83,1181:75,1182:75,1183:67,1184:83,1185:75,1186:83,1187:75,1188:100,1189:83,1190:117,1191:100,1192:92,1193:75,1194:75,1195:58,1196:75,1197:58,1198:75,1199:58,1200:75,1201:58,1202:75,1203:75,1204:100,1205:83,1206:75,1207:67,1208:75,1209:67,1210:75,1211:58,1212:92,1213:75,1214:92,1215:75,1216:33,1217:92,1218:83,1219:75,1220:67,1221:83,1222:67,1223:83,1224:75,1225:83,1226:75,1227:75,1228:58,1229:100,1230:83,1231:25,1232:75,1233:67,1234:75,1235:67,1236:100,1237:100,1238:67,1239:67,1240:75,1241:67,1242:75,1243:67,1244:92,1245:83,1246:67,1247:58,1248:67,1249:58,1250:83,1251:75,1252:83,1253:75,1254:92,1255:67,1256:92,1257:67,1258:92,1259:67,1260:75,1261:58,1262:75,1263:58,1264:75,1265:58,1266:75,1267:58,1268:75,1269:58,1270:58,1271:42,1272:92,1273:83,1274:58,1275:42,1276:75,1277:58,1278:75,1279:58,2026:67,19977:108,65403:58},this._ELLIPSIS_LENGTH=new G("…").length}static em_snippet(e,t,a){return null==t&&(t=50),null==a&&(a=.75),new G(e.toString()).snippet(t,a).toString()}constructor(e){if(!(this instanceof G))return new G(e);this.s=e,this.info=this.widthInfo(),this.length=e.length?this.info[this.s.length-1]:0}widthInfo(){const e={"-1":0};for(let t=0,a=this.s.length,n=0<=a;n?t<a:t>a;n?t++:t--)e[t]=e[t-1]+this.ems(this.s.charAt(t));return e}findSpot(e){let t;if(!e)return 0;let a=0,n=this.s.length;for(;a<=n;){t=Math.floor(a/2+n/2);const r=this.info[t-1];if(r>e)n=t-1;else{if(!(r<e))return t;a=t+1}}return a>t?a:t}ems(e){const t=e.charCodeAt(0),a=G.CODEPOINT_TO_WIDTH[t];return a?a/Math.pow(10,G.ACCURACY):768<=t&&t<=879?0:65377<=t&&t<=65500?.58:11904<=t&&t<=40911||44032<=t&&t<=55215||4352<=t&&t<=4607||63744<=t&&t<=64255||65280<=t&&t<=65535||131072<=t&&t<=196607?1.08:.65}substr(e,t){const a=this.findSpot(e);if(null!=t){let n=this.findSpot(e+t);if(n-a<this.s.length){const e=this.s.charCodeAt(n-a);65024<=e&&e<=65039&&n--}return new G(this.s.substr(a,n-a))}return new G(this.s.substr(a))}toString(){return this.s}snippet(e=50,t=.75){if(this.length<=e)return this;const a=(e-=G._ELLIPSIS_LENGTH)*t,n=e-a,r=this.length-n,o=this.substr(0,a),i=this.substr(r);return new G(o.toString()+"…"+i.toString())}}function q(e,t,a=!1){return e.filter((e=>void 0!==e.email)).map((e=>({email:e.email,checkForInvite:t,isResurface:a})))}function z(e,t,a){return[...q(e,!0),...q(a,!0,!0),...q(t,!1)]}function W(e){return["member_invite_expand_eligibility","member_suggestion_expand_eligibility","member_invite_partial_eligibility"].includes(e)}function Z(e,t,a,n){const r=e.length>0,o=t.length>0,i=(r||n&&o)&&(function(e){return["admin_invite_after_move","admin_invite_expand_eligibility"].includes(e)}(a)||W(a));return Boolean(i)}G.initClass();const K=e=>o.create("email",{email:e}),Y=e=>"user"===e[".tag"]?""===e.dbx_account_id?`EMAIL:${e.email}`:`DBX_ID:${e.dbx_account_id}`:"group"===e[".tag"]?`DBX_ID:${e.group_id}`:"email"===e[".tag"]?`EMAIL:${e.email}`:o.exhausts(e,"UNKNOWN"),Q=e=>"user"===e[".tag"]&&e.photo_url||null,J=(e,t)=>"user"===e[".tag"]||"email"===e[".tag"]?e.email:"group"===e[".tag"]?t.formatMessage({id:"XMHn5C",defaultMessage:"{count, plural, one{# member} other{# members}}"},{count:e.group_size||0}):"",X=e=>"email"===e[".tag"]?{".tag":"email",email:e.email}:"group"===e[".tag"]?{".tag":"dropbox_id",dropbox_id:e.group_id}:"user"===e[".tag"]?""===e.dbx_account_id?{".tag":"email",email:e.email}:{".tag":"dropbox_id",dropbox_id:e.dbx_account_id}:{".tag":"other"},ee={".tag":"public"},te={".tag":"team_only"},ae={".tag":"password"},ne={".tag":"team_and_password"},re={".tag":"shared_folder_only"},oe={".tag":"no_one"},ie={".tag":"only_you"},se={".tag":"other"},le={".tag":"day_1"},de={".tag":"day_180"},ce={".tag":"day_3"},_e={".tag":"day_30"},ue={".tag":"day_7"},me={".tag":"day_90"},ge={".tag":"none"},pe={".tag":"year_1"},Ee={".tag":"other"},fe={".tag":"allowed"},he={".tag":"not_allowed"},Se={".tag":"other"},ve={".tag":"optional"},Ae={".tag":"required"},be={".tag":"other"},ye={".tag":"admin_invite_expand_eligibility"},Me={".tag":"member_suggestion_expand_eligibility"},Ie={".tag":"member_invite_expand_eligibility"},Te={".tag":"member_invite_partial_eligibility"},Ce={".tag":"not_enabled"},Re={".tag":"anyone"},we={".tag":"team"},Ne={".tag":"team_and_approved"},Le={".tag":"other"},ke={".tag":"from_team_only"},Oe={".tag":"from_anyone"},xe={".tag":"other"},De={".tag":"default_public"},Pe={".tag":"default_team_only"},Fe={".tag":"team_only"},$e={".tag":"default_no_one"},He={".tag":"other"},Be={".tag":"admins_and_members"},Ue={".tag":"admins_only"},je={".tag":"members"},Ve={".tag":"anyone"},Ge={".tag":"other"},qe={".tag":"optional"},ze={".tag":"required"},We={".tag":"other"},Ze={".tag":"day_1"},Ke={".tag":"day_180"},Ye={".tag":"day_3"},Qe={".tag":"day_30"},Je={".tag":"day_7"},Xe={".tag":"day_90"},et={".tag":"none"},tt={".tag":"year_1"},at={".tag":"other"},nt={".tag":"default"},rt={".tag":"edit"},ot={".tag":"view"},it=e=>"email"===e[".tag"]?h.Contact.buildFromRawEmail(e.email):"group"===e[".tag"]?new h.Contact({type:o.ContactTypes.NEW_STYLE_GROUP,dbx_team_id:e.dbx_team_id,members:e.members,name:e.name,group_id:e.group_id,group_size:e.group_size}):"user"===e[".tag"]?e.dbx_account_id?new h.Contact({type:o.ContactTypes.EMAIL,dbx_team_id:e.dbx_team_id,...void 0!==e.photo_url?{photo_url:e.photo_url}:{},name:e.name,invalid:!S.validateEmail(e.email),dbx_account_id:e.dbx_account_id,email:e.email}):h.Contact.buildFromRawEmail(e.email):o.exhausts(e,h.Contact.buildFromRawEmail("")),st=e=>"invalid"===e.state?{".tag":"disallowed",disallowed:{".tag":"other"}}:"ok"===e.state?"NOT_DROPBOX_USER"===e.msg?{".tag":"allowed",allowed:{".tag":"not_dropbox_user"}}:{".tag":"allowed",allowed:{".tag":"no_warning"}}:"warn"===e.state?e.msg===o.CONTACT_ERROR_MESSAGES.OUT_OF_TEAM?{".tag":"allowed",allowed:{".tag":"outside_of_team"}}:{".tag":"allowed",allowed:{".tag":"other"}}:{".tag":"other"},lt=e=>"owner"===e?w:"reader"===e?N:"writer"===e?L:"reader_no_comment"===e?k:O,dt=e=>void 0===e?o.OTHER:"editor"===e?o.EDITOR:"viewer"===e?o.VIEWER:o.exhausts(e,o.OTHER),ct=e=>"public"===e?ee:"team_only"===e?te:"password"===e?ae:void 0,_t=e=>"public"===e?o.PUBLIC:"team"===e?o.TEAM:"password"===e?o.PASSWORD:"no_one"===e?o.NO_ONE:o.OTHER$1,ut=e=>{var t,a,n,r,o,i,s,l,d,c,_,u,m;const g=[];return void 0===e||(void 0!==(null===(t=e.change_options)||void 0===t?void 0:t.allow)&&g.push({action:{".tag":"change_options"},allow:e.change_options.allow}),void 0!==(null===(a=e.disable_viewer_info)||void 0===a?void 0:a.allow)&&g.push({action:{".tag":"disable_viewer_info"},allow:e.disable_viewer_info.allow}),void 0!==(null===(n=e.edit_contents)||void 0===n?void 0:n.allow)&&g.push({action:{".tag":"edit_contents"},allow:e.edit_contents.allow}),void 0!==(null===(r=e.enable_viewer_info)||void 0===r?void 0:r.allow)&&g.push({action:{".tag":"enable_viewer_info"},allow:e.enable_viewer_info.allow}),void 0!==(null===(o=e.invite_editor)||void 0===o?void 0:o.allow)&&g.push({action:{".tag":"invite_editor"},allow:e.invite_editor.allow}),void 0!==(null===(i=e.invite_viewer)||void 0===i?void 0:i.allow)&&g.push({action:{".tag":"invite_viewer"},allow:e.invite_viewer.allow}),void 0!==(null===(s=e.invite_viewer_no_comment)||void 0===s?void 0:s.allow)&&g.push({action:{".tag":"invite_viewer_no_comment"},allow:e.invite_viewer_no_comment.allow}),void 0!==(null===(l=e.leave_a_copy)||void 0===l?void 0:l.allow)&&g.push({action:{".tag":"leave_a_copy"},allow:e.leave_a_copy.allow}),void 0!==(null===(d=e.relinquish_membership)||void 0===d?void 0:d.allow)&&g.push({action:{".tag":"relinquish_membership"},allow:e.relinquish_membership.allow}),void 0!==(null===(c=e.update_confidentiality)||void 0===c?void 0:c.allow)&&g.push({action:{".tag":"update_confidentiality"},allow:e.update_confidentiality.allow}),void 0!==(null===(_=e.unmount)||void 0===_?void 0:_.allow)&&g.push({action:{".tag":"unmount"},allow:e.unmount.allow}),void 0!==(null===(u=e.unshare)||void 0===u?void 0:u.allow)&&g.push({action:{".tag":"unshare"},allow:e.unshare.allow}),void 0!==(null===(m=e.create_link)||void 0===m?void 0:m.allow)&&g.push({action:{".tag":"create_link"},allow:e.create_link.allow})),g},mt=e=>{var t,a,n,r,o,i,s,l,d,c,_,u,m,g,p;const E=[];return void 0===e||(void 0!==(null===(t=e.create_edit_link)||void 0===t?void 0:t.allow)&&E.push({action:{".tag":"create_edit_link"},allow:e.create_edit_link.allow}),void 0!==(null===(a=e.create_view_link)||void 0===a?void 0:a.allow)&&E.push({action:{".tag":"create_view_link"},allow:e.create_view_link.allow}),void 0!==(null===(n=e.change_options)||void 0===n?void 0:n.allow)&&E.push({action:{".tag":"change_options"},allow:e.change_options.allow}),void 0!==(null===(r=e.disable_viewer_info)||void 0===r?void 0:r.allow)&&E.push({action:{".tag":"disable_viewer_info"},allow:e.disable_viewer_info.allow}),void 0!==(null===(o=e.edit_contents)||void 0===o?void 0:o.allow)&&E.push({action:{".tag":"edit_contents"},allow:e.edit_contents.allow}),void 0!==(null===(i=e.enable_viewer_info)||void 0===i?void 0:i.allow)&&E.push({action:{".tag":"enable_viewer_info"},allow:e.enable_viewer_info.allow}),void 0!==(null===(s=e.invite_viewer)||void 0===s?void 0:s.allow)&&E.push({action:{".tag":"invite_viewer"},allow:e.invite_viewer.allow}),void 0!==(null===(l=e.invite_editor)||void 0===l?void 0:l.allow)&&E.push({action:{".tag":"invite_editor"},allow:e.invite_editor.allow}),void 0!==(null===(d=e.invite_viewer_no_comment)||void 0===d?void 0:d.allow)&&E.push({action:{".tag":"invite_viewer_no_comment"},allow:e.invite_viewer_no_comment.allow}),void 0!==(null===(c=e.relinquish_membership)||void 0===c?void 0:c.allow)&&E.push({action:{".tag":"relinquish_membership"},allow:e.relinquish_membership.allow}),void 0!==(null===(_=e.remove_download_policy)||void 0===_?void 0:_.allow)&&E.push({action:{".tag":"remove_download_policy"},allow:e.remove_download_policy.allow}),void 0!==(null===(u=e.set_download_policy)||void 0===u?void 0:u.allow)&&E.push({action:{".tag":"set_download_policy"},allow:e.set_download_policy.allow}),void 0!==(null===(m=e.unshare)||void 0===m?void 0:m.allow)&&E.push({action:{".tag":"unshare"},allow:e.unshare.allow}),void 0!==(null===(g=e.create_link)||void 0===g?void 0:g.allow)&&E.push({action:{".tag":"create_link"},allow:e.create_link.allow}),void 0!==(null===(p=e.share_message_as_comment)||void 0===p?void 0:p.allow)&&E.push({action:{".tag":"share_message_as_comment"},allow:e.share_message_as_comment.allow})),E},gt=(e,t,a)=>{var n,r,o,i,s,l,d,c;if(void 0===e)throw new Error("Adapter error.");if(e.isFolder()){if(e.isNewSharedFolder()){const n=e;return{".tag":"file_folder",access_type:lt(e.access_type),is_inside_team_folder:t,is_team_folder:a,owner_team:n.owner_team,parent_shared_folder_id:n.parent_shared_folder_id?String(n.parent_shared_folder_id):void 0,path_lower:n.path_lower,parent_folder_name:n.parent_folder_name,...void 0!==n.is_confidential?{is_confidential:n.is_confidential}:{},name:e.name,policy:{member_policy:n.policy.member_policy?{".tag":n.policy.member_policy}:void 0,resolved_member_policy:n.policy.resolved_member_policy?{".tag":n.policy.resolved_member_policy}:void 0,acl_update_policy:n.policy.acl_update_policy?{".tag":n.policy.acl_update_policy}:{".tag":"other"},shared_link_policy:n.policy.shared_link_policy?{".tag":n.policy.shared_link_policy}:{".tag":"other"},viewer_info_policy:n.policy.viewer_info_policy?{".tag":n.policy.viewer_info_policy}:void 0},permissions:ut(e.permissions),members_cursor:e.members_cursor,owner_team_policies:pt(n.owner_team_policies),folder_id:n.folder_id}}{const r=e;return{".tag":"shared_folder",access_type:lt(e.access_type),is_inside_team_folder:t,is_team_folder:a,owner_team:r.owner_team,parent_shared_folder_id:r.parent_shared_folder_id?String(r.parent_shared_folder_id):void 0,path_lower:r.path_lower,parent_folder_name:r.parent_folder_name,...void 0!==r.is_confidential?{is_confidential:r.is_confidential}:{},name:e.name,permissions:ut(e.permissions),policy:{member_policy:r.policy.member_policy?{".tag":r.policy.member_policy}:void 0,resolved_member_policy:r.policy.resolved_member_policy?{".tag":r.policy.resolved_member_policy}:void 0,acl_update_policy:r.policy.acl_update_policy?{".tag":r.policy.acl_update_policy}:{".tag":"other"},shared_link_policy:r.policy.shared_link_policy?{".tag":r.policy.shared_link_policy}:{".tag":"other"},download_policy:r.policy.download_policy?{".tag":r.policy.download_policy}:{".tag":"other"},viewer_info_policy:r.policy.viewer_info_policy?{".tag":r.policy.viewer_info_policy}:void 0},preview_url:r.preview_url||"",shared_folder_id:r.shared_folder_id.toString(),time_invited:(null===(n=r.time_invited)||void 0===n?void 0:n.toString())||"",folder_size:r.folder_size,can_mount:r.can_mount,invite_info:r.invite_info,owner_team_policies:pt(r.owner_team_policies),is_encrypted:r.is_encrypted,folder_id:r.folder_id}}}{const t=e;return{".tag":"file",access_type:lt(t.access_type),download_policy:{".tag":"other"},id:t.id,name:t.name,owner_team:t.owner_team,parent_shared_folder_id:t.parent_shared_folder_id?String(t.parent_shared_folder_id):void 0,path_display:t.path_display,path_lower:t.path_lower,permissions:mt(t.permissions),policy:{member_policy:(null===(r=t.policy)||void 0===r?void 0:r.member_policy)?{".tag":t.policy.member_policy}:void 0,resolved_member_policy:(null===(o=t.policy)||void 0===o?void 0:o.resolved_member_policy)?{".tag":t.policy.resolved_member_policy}:void 0,acl_update_policy:(null===(i=t.policy)||void 0===i?void 0:i.acl_update_policy)?{".tag":t.policy.acl_update_policy}:{".tag":"other"},shared_link_policy:(null===(s=t.policy)||void 0===s?void 0:s.shared_link_policy)?{".tag":t.policy.shared_link_policy}:{".tag":"other"},download_policy:(null===(l=t.policy)||void 0===l?void 0:l.download_policy)?{".tag":t.policy.download_policy}:{".tag":"other"},viewer_info_policy:(null===(d=t.policy)||void 0===d?void 0:d.viewer_info_policy)?{".tag":t.policy.viewer_info_policy}:void 0},preview_url:t.preview_url||"",time_invited:null===(c=t.time_invited)||void 0===c?void 0:c.toString(),is_cloud_doc:t.is_cloud_doc,owner_team_policies:pt(t.owner_team_policies)}}},pt=e=>{if(e)return{shared_folder_member_policy:Et(e.shared_folder_member_policy),shared_folder_join_policy:ft(e.shared_folder_join_policy),shared_link_create_policy:ht(e.shared_link_create_policy),group_creation_policy:St(e.group_creation_policy),shared_folder_link_restriction_policy:vt(e.shared_folder_link_restriction_policy),enforce_link_password_policy:At(e.enforce_link_password_policy),default_link_expiration_days_policy:bt(e.default_link_expiration_days_policy),shared_link_default_permissions_policy:yt(e.shared_link_default_permissions_policy)}},Et=e=>{switch(e){case"team":return we;case"team_and_approved":return Ne;case"other":return Le;default:return Re}},ft=e=>{switch(e){case"from_team_only":return ke;case"other":return xe;default:return Oe}},ht=e=>{switch(e){case"default_team_only":return Pe;case"team_only":return Fe;case"default_no_one":return $e;case"other":return He;default:return De}},St=e=>"admins_only"===e?Ue:Be,vt=e=>{switch(e){case"members":return je;case"other":return Ge;default:return Ve}},At=e=>{switch(e){case"required":return ze;case"other":return We;default:return qe}},bt=e=>{switch(e){case"day_1":return Ze;case"day_180":return Ke;case"day_3":return Ye;case"day_30":return Qe;case"day_7":return Je;case"day_90":return Xe;case"year_1":return tt;case"other":return at;default:return et}},yt=e=>{switch(e){case"default":default:return nt;case"edit":return rt;case"view":return ot}},Mt=e=>{switch(e){case o.LinkAudienceDisallowedReason.DeleteAndRecreate:return o.DISALLOWED_REASON_DELETE_AND_RECREATE;case o.LinkAudienceDisallowedReason.RestrictedBySharedFolder:return o.DISALLOWED_REASON_RESTRICTED_BY_SHARED_FOLDER;case o.LinkAudienceDisallowedReason.RestrictedByTeam:return o.DISALLOWED_REASON_RESTRICTED_BY_TEAM;case o.LinkAudienceDisallowedReason.UserAccountType:return o.DISALLOWED_REASON_USER_ACCOUNT_TYPE;case o.LinkAudienceDisallowedReason.UserNotOnTeam:return o.DISALLOWED_REASON_USER_NOT_ON_TEAM;case o.LinkAudienceDisallowedReason.PermissionDenied:return o.DISALLOWED_REASON_PERMISSION_DENIED;default:return}},It=e=>{if(void 0!==e)return e.map((e=>({audience:_t(e.audience),allowed:e.allowed,disallowed_reason:Mt(e.disallowed_reason)})))},Tt=e=>{switch(e){case"day_1":return le;case"day_180":return de;case"day_3":return ce;case"day_30":return _e;case"day_7":return ue;case"day_90":return me;case"none":return ge;case"year_1":return pe;case"other":return Ee;default:return}},Ct=e=>{switch(e){case"allow":return fe;case"not_allowed":return he;case"other":return Se;default:return}},Rt=e=>{switch(e){case"optional":return ve;case"required":return Ae;case"other":return be;default:return}},wt=e=>({id:e.id,name:e.name}),Nt=e=>{switch(e){case"admin_invite_expand_eligibility":return ye;case"member_suggestion_expand_eligibility":return Me;case"member_invite_expand_eligibility":return Ie;case"member_invite_partial_eligibility":return Te;default:return Ce}},Lt=(...e)=>{},kt=o.SHARE_ACTION_ORIGIN_TYPE.SHARING_SDK_SANDBOX,Ot=(...e)=>(...t)=>{e.forEach((e=>{try{e(...t)}catch(e){}}))},xt=T.createContext({sink:Lt,metadata:{},origin:kt,actionInfo:void 0}),Dt=({sink:e,children:t,origin:a,actionInfo:n})=>{const r=T.useMemo((()=>({sink:e,metadata:{},origin:a,actionInfo:n})),[e,a,n]);return T.createElement(xt.Provider,{value:r},t)};Dt.displayName="Provider";const Pt=()=>{const e=T.useContext(xt);return T.useCallback(((t,a)=>{const n={type:t,payload:a};e.sink(n,e.metadata,e.origin,e.actionInfo)}),[e])},Ft=({children:e,...t})=>{const a=T.useContext(xt),[n]=T.useState({sink:a.sink,metadata:{},origin:a.origin,actionInfo:a.actionInfo});return n.metadata={...a.metadata,...t},T.createElement(xt.Provider,{value:n},e)};Ft.displayName="MetadataProvider";const $t=T.createContext(new s.Dropbox({})),Ht=({sdk:e,children:t})=>T.createElement($t.Provider,{value:e},t);Ht.displayName="DropboxSdkProvider";n.createIntl({locale:"en"});const Bt=({children:e,intl:t})=>t?T.createElement(n.Provider,{value:t},e):e;var Ut;Bt.displayName="Provider",t.Platforms=void 0,(Ut=t.Platforms||(t.Platforms={})).SANDBOX="SANDBOX",Ut.METASERVER="METASERVER",Ut.PAPER="PAPER",Ut.DESKTOP="DESKTOP",Ut.MS_TEAMS="MS_TEAMS",Ut.MS_TEAMS_MOBILE="MS_TEAMS_MOBILE";const jt=T.createContext(t.Platforms.SANDBOX),Vt=({platform:e,children:t})=>T.createElement(jt.Provider,{value:e},t);Vt.displayName="Provider";const Gt=()=>T.useContext(jt),qt=T.createContext({redirectWindowToken:null}),zt=()=>T.useContext(qt).redirectWindowToken,Wt=({children:e,...t})=>{const a=T.useMemo((()=>({redirectWindowToken:t.redirectWindowToken})),[t.redirectWindowToken]);return T.createElement(qt.Provider,{value:a},e)};function Zt(e){const t=window.document.createElement("a");t.href=e;let a=t.protocol||window.location.protocol;":"===t.protocol&&(a=window.location.protocol);const n=t.hostname||window.location.hostname;let r=t.port||window.location.port;"443"===r&&"https:"===a&&(r="");let o=n;return r&&(o=o+":"+r),a+"//"+o+(0===t.pathname.indexOf("/")?t.pathname:`/${t.pathname}`)+t.search+t.hash}Wt.displayName="Provider";const Kt=e=>window.open(e,"_blank"),Yt=T.createContext(Kt),Qt=({openUrl:e,children:t})=>T.createElement(Yt.Provider,{value:e},t);Qt.displayName="Provider";const Jt=()=>{const e=T.useContext(Yt);return T.useCallback((t=>{e(t)}),[e])},Xt=e=>e.formatMessage({id:"0NA7+K",defaultMessage:"Close"}),ea=T.createContext({store:{$item:i.store(null),$props:i.store({})}}),ta=()=>{const{store:e}=T.useContext(ea),t=T.useRef(null);return a=>{var n,r;const o=Math.random().toString();return e.$item.set({key:o,Snackbar:a,snackbarRef:t}),null===(r=(n=e.$props.get()).onSnackbarShownChange)||void 0===r||r.call(n,!0,t),()=>{var t,a;const n=e.$item.get();n&&n.key===o&&(e.$item.set(null),null===(a=(t=e.$props.get()).onSnackbarShownChange)||void 0===a||a.call(t,!1))}}},aa=()=>{const{store:e}=T.useContext(ea),t=i.useStore(e.$item),a=(e=>{const{store:t}=T.useContext(ea);return T.useCallback((()=>{var a,n;const r=t.$item.get();r&&r.key===e&&(t.$item.set(null),null===(n=(a=t.$props.get()).onSnackbarShownChange)||void 0===n||n.call(a,!1))}),[t,e])})(t?t.key:"");return t?C.createPortal(T.createElement("div",{ref:t.snackbarRef,key:t.key,style:{position:"fixed",display:"flex",zIndex:2e4,width:"100%",bottom:"1em",justifyContent:"center"},"data-sharing-sdk":"1"},T.createElement(t.Snackbar,{style:{flexGrow:1},key:t.key,open:!0,onRequestClose:a})),document.body):null},na=({children:e,onSnackbarShownChange:t})=>{const a=i.useInitStore({onSnackbarShownChange:t},(e=>({$item:i.store(null),$props:e}))),n=T.useMemo((()=>({store:a})),[a]);return T.createElement(ea.Provider,{value:n},T.createElement(T.Fragment,null,e,T.createElement(aa,null)))};na.displayName="Provider";var ra;!function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.FATAL="FATAL"}(ra||(ra={}));const oa=o.isObjectOf({status:o.isNumber,headers:o.isUnknown,error:o.isObjectOf({error:o.isObjectOf({".tag":o.isString})})}),ia=o.isObjectOf({status:o.isNumber}),sa=async e=>{try{const t=await e;return{status:ra.SUCCESS,output:t.result}}catch(e){const t=e;return oa(t)?{status:ra.ERROR,error:t.error.error,statusCode:t.status}:ia(e)?{status:ra.FATAL,statusCode:e.status,error:e}:{status:ra.FATAL,error:e}}},la=(e,t)=>({name:e.name,fetch:t,type:"standard"}),da=la({name:"sharing_receiving.SharingTiburonLogger"},(e=>t=>{const a={...t,extras:_a(ua(JSON.stringify(t.extras)))};return sa(e.sharingReceivingSharingTiburonLogger(a))})),ca=e=>e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65,_a=e=>{let t=2,a="";const n=e.length;let r=0;for(let o=0;o<n;o++)t=o%3,o>0&&4*o/3%76==0&&(a+="\r\n"),r|=e[o]<<(16>>>t&24),2!==t&&e.length-o!=1||(a+=String.fromCodePoint(ca(r>>>18&63),ca(r>>>12&63),ca(r>>>6&63),ca(63&r)),r=0);return a.substr(0,a.length-2+t)+(2===t?"":1===t?"=":"==")},ua=e=>{let t;const a=e.length;let n=0;for(let r=0;r<a;r++)t=e.codePointAt(r),t>65536&&r++,n+=t<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;const r=new Uint8Array(n);let o=0,i=0;for(;o<n;)t=e.codePointAt(i),t<128?r[o++]=t:t<2048?(r[o++]=192+(t>>>6),r[o++]=128+(63&t)):t<65536?(r[o++]=224+(t>>>12),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t)):t<2097152?(r[o++]=240+(t>>>18),r[o++]=128+(t>>>12&63),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t),i++):t<67108864?(r[o++]=248+(t>>>24),r[o++]=128+(t>>>18&63),r[o++]=128+(t>>>12&63),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t),i++):(r[o++]=252+(t>>>30),r[o++]=128+(t>>>24&63),r[o++]=128+(t>>>18&63),r[o++]=128+(t>>>12&63),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t),i++),i++;return r},ma=e=>{if(o.getAccessType(e))switch(o.getAccessType(e)){case"owner":return"owner";case"editor":return"writer";default:return"reader"}},ga=e=>({user_access_type:ma(e),is_folder:o.getIsFolder(e),fq_path:o.isNewApiMetadata(e)?e.common_metadata.path_lower:e.path_lower,content_id:o.isNewApiMetadata(e)?e.common_metadata.file_id:o.getIsFile(e)?e.id:o.getIsSharedFolder(e)?e.shared_folder_id:o.getIsFolder(e)?e.path_lower:o.getIsCollection(e)?e.collectionId:"",...{...o.getIsSharedFolder(e)||o.getIsCollection(e)?{ns_id:o.isNewApiMetadata(e)?e.metadata_response&&"shared_folder_id"in e.metadata_response?e.metadata_response.shared_folder_id:"":e.shared_folder_id}:{}},can_create_edit_link:o.getCanDoAction(e,o.CREATE_EDIT_LINK_TAG),can_create_view_link:o.getCanDoAction(e,o.CREATE_VIEW_LINK_TAG),can_edit_inband_invite:o.getCanDoAction(e,o.INVITE_EDITOR_TAG),can_view_inband_invite:o.getCanDoAction(e,o.INVITE_VIEWER_TAG),max_access:o.getCanDoAction(e,o.CREATE_EDIT_LINK_TAG)||o.getCanDoAction(e,o.INVITE_EDITOR_TAG)?"editor":"viewer"}),pa=e=>e&&"other"!==e[".tag"]?"viewer"===e[".tag"]?"reader":"writer":null,Ea=e=>{const t={link_id:e.id,link_access_level:(a=e.link_permissions.link_access_level,a?a[".tag"]:o.VIEWER[".tag"]),audience:o.getCurrentAudience(e)[".tag"]};var a;const n=(e=>{const t=new URL(e);if(t.search.includes("rlkey"))return{kind:"rlkey",val:t.searchParams.get("rlkey"),link_type:"righteous"};if(t.pathname.includes("/s/")||t.pathname.includes("/sh/")){const e=e=>e.pathname.includes("/raw/")||e.pathname.includes("/dl/")||e.pathname.includes("/print/"),a=e(t)?3:2;return{kind:"tkey",val:t.pathname.split("/")[a],link_type:"shmodel"}}return null})(e.url);return n&&(t[n.kind]=n.val,t.link_type=n.link_type),t},fa=e=>{const t={tray_style:e.loggingExtras.tray_style,tray_variants:e.loggingExtras.variants};return{platform_name:e.platformName,platform_version:e.platformVersion,build_channel:e.buildChannel,build_number:e.buildNumber,...t}},ha=(e,t,a,n)=>{const r=t.shareModalSessionId,i=t.sharingObjectMetadata,s=t.desktopMetadata;return r&&(n={...n,modal_session_id:r}),t.sharingObjectIdentifier&&("file"===t.sharingObjectIdentifier[".tag"]?n={...n,file_id:t.sharingObjectIdentifier.fileId}:"shared_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,ns_id:t.sharingObjectIdentifier.sharedFolderId}:"file_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,fq_path:t.sharingObjectIdentifier.path}:"collection"===t.sharingObjectIdentifier[".tag"]&&(n={...n,ns_id:t.sharingObjectIdentifier.nsId,collection_id:t.sharingObjectIdentifier.collectionId})),i&&!o.isNewApiMetadata(i)&&i.path_lower&&(n={...n,fq_path:i.path_lower}),i&&o.isNewApiMetadata(i)&&i.common_metadata.path_lower&&(n={...n,fq_path:i.common_metadata.path_lower}),i&&!o.isNewApiMetadata(i)&&o.getIsFile(i)&&(n={...n,file_id:i.id}),i&&o.isNewApiMetadata(i)&&o.getIsFile(i)&&(n={...n,file_id:i.common_metadata.file_id}),i&&!o.isNewApiMetadata(i)&&o.getIsSharedFolder(i)&&(n={...n,ns_id:i.shared_folder_id}),i&&o.isNewApiMetadata(i)&&o.getIsSharedFolder(i)&&(n={...n,ns_id:i.metadata_response&&"shared_folder_id"in i.metadata_response?i.metadata_response.shared_folder_id:""}),i&&o.getIsCollection(i)&&(n={...n,ns_id:i.shared_folder_id,collection_id:i.collectionId}),s&&(n={...n,...fa(s)}),{share_tiburon_event_type:e,share_tib_action_origin_type:a,extras:n}},Sa=(e,t,a,n)=>{const r=t.shareModalSessionId,o=t.sharingLinkMetadata,i=t.sharingObjectMetadata,s=t.desktopMetadata;return r&&(n={...n,modal_session_id:r}),o&&(n={...n,...Ea(o)}),i&&(n={...n,...ga(i)}),s&&(n={...n,...fa(s)}),{share_tiburon_event_type:e,share_tib_action_origin_type:a,extras:n}},va=e=>{const t=T.useContext($t),a=Pt();if("standard"===e.type){const n=T.useMemo((()=>e.fetch(t)),[e,t]);return T.useCallback((async t=>{const r=Math.random().toString();a("ENDPOINT_FETCH_BEGIN",{name:e.name,input:t,id:r});const o=Date.now(),i=await n(t),s=Date.now();return a("ENDPOINT_FETCH_END",{name:e.name,id:r,latency:s-o,response:i}),i}),[n,e,a])}{const t=e.useFetch();return T.useCallback((async n=>{const r=Math.random().toString();a("ENDPOINT_FETCH_BEGIN",{name:e.name,input:n,id:r});const o=Date.now(),i=await t(n),s=Date.now();return a("ENDPOINT_FETCH_END",{name:e.name,id:r,latency:s-o,response:i}),i}),[t,e,a])}},Aa=(e,t)=>{let a={is_alpha:!0};return t.sharingAccessLevel&&(a={...a,access:t.sharingAccessLevel[".tag"]}),e.createSharedLinkStartTime&&(a={...a,timing:Date.now()-e.createSharedLinkStartTime}),a={...a,include_ns_creation:!1},a},ba=e=>{if(e.shareMe24Metadata){if(e.shareMe24Metadata.shouldStyleForSM21)return o.ScreenName.ManageAccessScreen;if(e.shareMe24Metadata.isShareMe24)return o.ScreenName.ShareMe24ShareScreen}return o.ScreenName.ShareScreen},ya=()=>{const e=(()=>{const e=va(da);return T.useMemo((()=>({SHARE_MODAL_SHARE__PREVALIDATION__API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptTargetValidation,t,n,a))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptTargetValidation,t,n,a))},SHARE_MODAL_SHARE__PREVALIDATION__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedTargetValidation,t,n,a))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedTargetValidation,t,n,a))},SHARE_MODAL_SHARE__PREVALIDATION__API_ERROR:({event:t,metadata:a,extras:n,origin:r})=>{e(ha(o.TiburonEventName.FailTargetValidation,a,r,{...n,error:t.payload.error[".tag"]}))},SHARE_MODAL_SHARE__PREVALIDATION__API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailTargetValidation,t,n,{...a,error:"unknown server error"}))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_ERROR:({event:t,metadata:a,extras:n,origin:r})=>{e(ha(o.TiburonEventName.FailTargetValidation,a,r,{...n,error:t.payload.error[".tag"]}))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailTargetValidation,t,n,{...a,error:"unknown server error"}))},SHARE_MODAL_MANAGE_ACCESS__MANAGE_ACCESS__CLICK:({metadata:t,extras:a,origin:n})=>{t.sharingObjectMembership&&(a={...a,access_level:t.sharingObjectMembership.access_type[".tag"]}),e(ha(o.TiburonEventName.ClickManageAccess,t,n,a))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_MEMBER_ACCESS__CLICK:({event:t,metadata:a,extras:n,origin:r})=>{e(ha(o.TiburonEventName.SelectChangeMemberPermission,a,r,{...n,new_access:"editor"===t.payload.next[".tag"]?"writer":"reader",old_access:"editor"===t.payload.previous[".tag"]?"writer":"reader"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedChangeMemberPermission,t,n,{...a,http_status_code:200,response_status:"success",is_alpha:!1}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedChangeMemberPermission,t,n,{...a,http_status_code:200,response_status:"success",is_alpha:!1}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailChangeMemberPermission,t,n,{...a,is_alpha:!1,http_status_code:0,error_tag:"undefined"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_ERROR:({event:t,metadata:a,extras:n,origin:r})=>{e(ha(o.TiburonEventName.FailChangeMemberPermission,a,r,{...n,is_alpha:!1,http_status_code:t.payload.response.statusCode,error_tag:t.payload.response.error[".tag"]}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailChangeMemberPermission,t,n,{...a,is_alpha:!1,http_status_code:0,error_tag:"undefined"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_ERROR:({event:t,metadata:a,extras:n,origin:r})=>{e(ha(o.TiburonEventName.FailChangeMemberPermission,a,r,{...n,is_alpha:!1,http_status_code:t.payload.response.statusCode,error_tag:t.payload.response.error[".tag"]}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_ERROR:({event:t,metadata:a,extras:n,origin:r})=>{e(ha(o.TiburonEventName.FailTransferFolder,a,r,{...n,is_alpha:!1,http_status_code:t.payload.response.statusCode,error_tag:t.payload.response.error[".tag"]}))},SHARE_MODAL_SHARE__CREATE_LINK__API_START:({metadata:t,extras:a,origin:n,cache:r})=>{t.sharingAccessLevel&&(a={...a,access:t.sharingAccessLevel[".tag"]}),r.createSharedLinkStartTime=Date.now(),e(ha(o.TiburonEventName.AttemptCreateSharedLinkWithSettings,t,n,a))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_START:({metadata:t,extras:a,origin:n,cache:r})=>{t.sharingAccessLevel&&(a={...a,access:t.sharingAccessLevel[".tag"]}),r.createSharedLinkStartTime=Date.now(),e(ha(o.TiburonEventName.AttemptCreateSharedLinkWithSettings,t,n,a))},SHARE_MODAL_SHARE__CREATE_LINK__API_SUCCESS:({metadata:t,event:a,origin:n,extras:r,cache:i})=>{(t={...t,sharingLinkMetadata:a.payload.response.output}).sharingLinkMetadata&&(r={...r,...Ea(t.sharingLinkMetadata)}),e(ha(o.TiburonEventName.SucceedCreateSharedLinkWithSettings,t,n,{http_status_Code:200,response_status:"success",...Aa(i,t),...r}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS:({metadata:t,event:a,origin:n,extras:r,cache:i})=>{(t={...t,sharingLinkMetadata:a.payload.response.output}).sharingLinkMetadata&&(r={...r,...Ea(t.sharingLinkMetadata)}),e(ha(o.TiburonEventName.SucceedCreateSharedLinkWithSettings,t,n,{http_status_Code:200,response_status:"success",...Aa(i,t),...r}))},SHARE_MODAL_SHARE__CREATE_LINK__API_ERROR:({metadata:t,event:a,extras:n,origin:r,cache:i})=>{"shared_link_already_exists"!==a.payload.response.error[".tag"]?e(ha(o.TiburonEventName.FailCreateSharedLinkWithSettings,t,r,{error_tag:a.payload.response.error[".tag"],http_status_code:a.payload.response.statusCode,fail_at:"link_creation",...Aa(i,t),...n})):e(ha(o.TiburonEventName.SucceedCreateSharedLinkWithSettings,t,r,{http_status_code:a.payload.response.statusCode,response_status:"success",...Aa(i,t),...n}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR:({metadata:t,extras:a,cache:n,origin:r,event:i})=>{"shared_link_already_exists"!==i.payload.response.error[".tag"]?e(ha(o.TiburonEventName.FailCreateSharedLinkWithSettings,t,r,{error_tag:i.payload.response.error[".tag"],http_status_code:i.payload.response.statusCode,fail_at:"link_creation",...Aa(n,t),...a})):e(ha(o.TiburonEventName.SucceedCreateSharedLinkWithSettings,t,r,{http_status_code:i.payload.response.statusCode,response_status:"success",...Aa(n,t),...a}))},SHARE_MODAL_SHARE__CREATE_LINK__API_FATAL:({metadata:t,extras:a,origin:n,cache:r})=>{e(ha(o.TiburonEventName.FailCreateSharedLinkWithSettings,t,n,{fail_at:"link_creation",...Aa(r,t),http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL:({metadata:t,extras:a,origin:n,cache:r})=>{e(ha(o.TiburonEventName.FailCreateSharedLinkWithSettings,t,n,{fail_at:"link_creation",...Aa(r,t),http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_SHARE__CREATE_LINK__CLICK:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.ClickTibCreateLink,t,n,a))},SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.ClickTibCreateLink,t,n,a))},SHARE_MODAL_SHARE__INVITE__START:({metadata:t,extras:a,origin:n,cache:r})=>{r.inviteStartTime=Date.now(),e(ha(o.TiburonEventName.ClickInbandShareButton,t,n,{in_progress:!1,access_level:pa(t.sharingAccessLevel),screen:ba(t),...a}));const i=t.sharingLinkMetadata;i&&e(Sa(o.TiburonEventName.ClickShareButtonLinkSettingsStatus,t,n,{...a,isPasswordRequired:i.link_permissions.require_password||!1,isExpirationEnabled:!!i.expires,isDisabledDownloadEnabled:!i.link_permissions.allow_download}))},SHARE_MODAL_SHARE__COPY_LINK__CLICK:({metadata:t,extras:a,origin:n})=>{var r,i;e(Sa(o.TiburonEventName.CopySharedLink,t,n,{...a,tokenized_contact_count:null===(r=t.sharingInviteTargets)||void 0===r?void 0:r.length,sender_trackey:o.getSenderTrackeyFromURL(null===(i=t.sharingLinkMetadata)||void 0===i?void 0:i.url)}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_START:({metadata:t,event:a,origin:n,extras:r})=>{var i,s;t={...t,sharingLinkMetadata:a.payload.linkMetadata},e(Sa(o.TiburonEventName.CopySharedLink,t,n,{...r,tokenized_contact_count:null===(i=t.sharingInviteTargets)||void 0===i?void 0:i.length,sender_trackey:o.getSenderTrackeyFromURL(null===(s=t.sharingLinkMetadata)||void 0===s?void 0:s.url)}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_ERROR:({metadata:t,extras:a,origin:n})=>{var r;e(Sa(o.TiburonEventName.CopySharedLinkFailure,t,n,{...a,tokenized_contact_count:null===(r=t.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__COPY_LINK__COPY_ERROR:({metadata:t,extras:a,origin:n})=>{var r;e(Sa(o.TiburonEventName.CopySharedLinkFailure,t,n,{...a,tokenized_contact_count:null===(r=t.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_FORBIDDEN:({metadata:t,extras:a,origin:n})=>{var r;e(Sa(o.TiburonEventName.CopySharedLinkFailure,t,n,{...a,tokenized_contact_count:null===(r=t.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__INVITE__CANCELLED:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailInbandShare,t,n,{error_tag:"contacts_error",error_message:"contact validation error",num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0,access_level:pa(t.sharingAccessLevel),screen:ba(t),...a}))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_ERROR:({metadata:t,extras:a,origin:n,cache:r,event:i})=>{r.inviteStartTime&&(a.timing=Date.now()-r.inviteStartTime),e(Sa(o.TiburonEventName.FailInbandShare,t,n,{...a,error_tag:i.payload.response.error[".tag"],http_status_code:i.payload.response.statusCode,num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0,screen:ba(t)}))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_FATAL:({metadata:t,extras:a,origin:n,cache:r})=>{r.inviteStartTime&&(a.timing=Date.now()-r.inviteStartTime),e(Sa(o.TiburonEventName.FailInbandShare,t,n,{...a,error_tag:"undefined",http_status_code:0,num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0,screen:ba(t)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_ERROR:({event:t,metadata:a,extras:n,origin:r,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),e(Sa(o.TiburonEventName.FailInbandShare,a,r,{...n,error_tag:t.payload.response.error[".tag"],http_status_code:t.payload.response.statusCode,num_recipients:a.sharingInviteTargets?a.sharingInviteTargets.length:0,screen:ba(a)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_FATAL:({metadata:t,extras:a,origin:n,cache:r})=>{r.inviteStartTime&&(a={...a,timing:Date.now()-r.inviteStartTime}),e(Sa(o.TiburonEventName.FailInbandShare,t,n,{...a,error_tag:"undefined",http_status_code:0,num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0,screen:ba(t)}))},SHARE_MODAL_SHARE__INVITE__SHARE_FILE_FOLDER__FAILURE:({event:t,metadata:a,extras:n,origin:r,cache:i})=>{var s;i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===t.payload.output.type||"PollingApiError"===t.payload.output.type?n={...n,error_tag:t.payload.output.value.response.error[".tag"],http_status_code:t.payload.output.value.response.statusCode}:"NetworkFailure"===t.payload.output.type||"PollingNetworkFailure"===t.payload.output.type?n={...n,error_tag:"network",http_status_code:null!==(s=t.payload.output.value.response.statusCode)&&void 0!==s?s:0}:"PollingFailed"===t.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===t.payload.output.type&&(n={...n,error_tag:"network",http_status_code:408}),e(Sa(o.TiburonEventName.FailInbandShare,a,r,{...n,num_recipients:a.sharingInviteTargets?a.sharingInviteTargets.length:0,screen:ba(a)}))},SHARE_MODAL_SETTINGS__PAGE_VIEW:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.ViewSettingsScreen,t,n,{...a,settings_tab:r.payload.selected_tab})),e(ha(o.TiburonEventName.ViewSettingsTab,t,n,{...a,settings_tab:r.payload.selected_tab}))},SHARE_MODAL_SETTINGS__TAB_CHANGE:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.ViewSettingsTab,t,n,{...a,settings_tab:r.payload.selected_tab}))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_GEAR__CLICK:({metadata:t,extras:a,origin:n})=>{e(Sa(o.TiburonEventName.ClickSettingsGear,t,n,{...a,screen:o.ScreenName.ManageAccessScreen}));const r=t.sharingObjectMetadata;r&&(o.getIsFile(r)?e(ha(o.TiburonEventName.OpenFileSettingsModal,t,n,a)):o.getIsFolder(r)&&e(ha(o.TiburonEventName.OpenFolderSettingsModal,t,n,a)))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_TEXT__CLICK:({metadata:t,extras:a,origin:n,event:r})=>{e(Sa(o.TiburonEventName.ClickManageAccessPageSettingsText,t,n,{...a,screen:o.ScreenName.ManageAccessScreen,settings_tab:r.payload.settings_tab,link_access_level:r.payload.link_access_level,link_type:r.payload.link_type}));const i=t.sharingObjectMetadata;i&&e(ha(o.getIsFile(i)?o.TiburonEventName.OpenFileSettingsModal:o.TiburonEventName.OpenFolderSettingsModal,t,n,a))},SHARE_MODAL_SHARE__SETTINGS_GEAR__CLICK:({metadata:t,extras:a,origin:n})=>{e(Sa(o.TiburonEventName.ClickSettingsGear,t,n,{...a,screen:o.ScreenName.ShareScreen}));const r=t.sharingObjectMetadata;r&&(o.getIsFile(r)?e(ha(o.TiburonEventName.OpenFileSettingsModal,t,n,a)):o.getIsFolder(r)&&e(ha(o.TiburonEventName.OpenFolderSettingsModal,t,n,a)))},SHARE_MODAL_SHARE__SETTINGS_LINK__CLICK:({metadata:t,extras:a,origin:n})=>{a=t.sharingAccessLevel&&"editor"===t.sharingAccessLevel[".tag"]?{...a,settings_tab:"edit_link_settings"}:{...a,settings_tab:"view_link_settings"},e(Sa(o.TiburonEventName.ClickSettingsText,t,n,a))},SHARE_MODAL_SHARE__MODIFY_LINK__CLICK:({metadata:t,extras:a,origin:n})=>{a=t.sharingAccessLevel&&"editor"===t.sharingAccessLevel[".tag"]?{...a,settings_tab:"edit_link_settings"}:{...a,settings_tab:"view_link_settings"},e(Sa(o.TiburonEventName.OpenLinkSettingsModal,t,n,a))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_SUCCESS:({metadata:t,extras:a,origin:n,cache:r})=>{r.inviteStartTime&&(a={...a,timing:Date.now()-r.inviteStartTime}),e(ha(o.TiburonEventName.SucceedInbandShare,t,n,{...a,access_level:pa(t.sharingAccessLevel),num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0,screen:ba(t)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_SUCCESS:({metadata:t,extras:a,cache:n,origin:r})=>{n.inviteStartTime&&(a={...a,timing:Date.now()-n.inviteStartTime}),e(ha(o.TiburonEventName.SucceedInbandShare,t,r,{...a,num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0,screen:ba(t)}))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_ATTEMPT:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptNavigateAwayDuringShare,t,n,a))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_AWAY:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedNavigateAwayDuringShare,t,n,a))},SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED:({event:t,metadata:a,extras:n,origin:r})=>{n={...n,element_trackingId:"link_settings_pro_upsell",element_href:t.payload.href},e(ha(o.TiburonEventName.ElementClick,a,r,n))},SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED:({event:t,metadata:a,extras:n,origin:r})=>{n={...n,element_trackingId:"link_settings_pro_upsell",element_href:t.payload.href},e(ha(o.TiburonEventName.ElementView,a,r,n))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptRemoveAllMembers,t,n,a))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR:({metadata:t,event:a,origin:n,extras:r})=>{e(ha(o.TiburonEventName.FailRemoveAllMembers,t,n,{http_status_code:a.payload.response.statusCode,error_message:a.payload.response.error[".tag"],...r}))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailRemoveAllMembers,t,n,{http_status_code:0,error_message:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedRemoveAllMembers,t,n,{http_status_code:200,response_status:"success",...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptRemoveMember,t,n,a))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptRemoveMember,t,n,a))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptRemoveMember,t,n,{relinquish_membership:!0,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptRemoveMember,t,n,{relinquish_membership:!0,...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_ERROR:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.FailRemoveMember,t,n,{http_status_code:r.payload.response.statusCode,error_tag:r.payload.response.error[".tag"],...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailRemoveMember,t,n,{http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_ERROR:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.FailRemoveMember,t,n,{relinquish_membership:!0,http_status_code:r.payload.response.statusCode,error_tag:r.payload.response.error[".tag"],...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailRemoveMember,t,n,{relinquish_membership:!0,http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_FAILURE:({event:t,metadata:a,extras:n,origin:r,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===t.payload.output.type||"PollingApiError"===t.payload.output.type?n={...n,error_tag:t.payload.output.value.response.error[".tag"],http_status_code:t.payload.output.value.response.statusCode}:"NetworkFailure"===t.payload.output.type||"PollingNetworkFailure"===t.payload.output.type?n={...n,error_tag:"unknown",http_status_code:0}:"PollingFailed"===t.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===t.payload.output.type&&(n={...n,error_tag:"timeout",http_status_code:0}),e(Sa(o.TiburonEventName.FailRemoveMember,a,r,n))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_FAILURE:({event:t,metadata:a,extras:n,origin:r,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===t.payload.output.type||"PollingApiError"===t.payload.output.type?n={...n,error_tag:t.payload.output.value.response.error[".tag"],http_status_code:t.payload.output.value.response.statusCode}:"NetworkFailure"===t.payload.output.type||"PollingNetworkFailure"===t.payload.output.type?n={...n,error_tag:"unknown",http_status_code:0}:"PollingFailed"===t.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===t.payload.output.type&&(n={...n,error_tag:"timeout",http_status_code:0}),e(Sa(o.TiburonEventName.FailRemoveMember,a,r,{relinquish_membership:!0,...n}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedRemoveMember,t,n,{http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedRemoveMember,t,n,{http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedRemoveMember,t,n,{relinquish_membership:!0,http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedRemoveMember,t,n,{relinquish_membership:!0,http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptTransferFolder,t,n,a))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailTransferFolder,t,n,{http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedTransferFolder,t,n,{http_status_code:200,...a}))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__START:({metadata:t,extras:a,origin:n,cache:r})=>{r.shareModalDataLoadStartTime=Date.now(),r.inviteStartTime=void 0,r.createSharedLinkStartTime=void 0,e(ha(o.TiburonEventName.BeginShareFlow,t,n,a))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__SUCCESS:({metadata:t,extras:a,origin:n,cache:r})=>{r.shareModalDataLoadStartTime&&(a={...a,timing:Date.now()-r.shareModalDataLoadStartTime}),e(ha(o.TiburonEventName.ViewShareModal,t,n,a))},SHARE_MODAL_RELINQUISHED_SCREEN__VIEW:({metadata:t,extras:a,origin:n,cache:r})=>{a={...a,is_relinquished_screen:!0},r.shareModalDataLoadStartTime&&(a={...a,timing:Date.now()-r.shareModalDataLoadStartTime}),e(ha(o.TiburonEventName.ViewShareModal,t,n,a))},SHARE_MODAL_ERROR_SCREEN__VIEW:({metadata:t,extras:a,origin:n,event:r})=>{if("response"in r.payload.initialLoadError){const e=r.payload.initialLoadError.response;let t;e.status!==ra.FATAL&&(t=e.error[".tag"]);const n=e.error;a={...a,http_status_code:e.statusCode,error_summary:t,error_message:n,failing_endpoint:r.payload.initialLoadError.type}}else a={...a,event:r};e(ha(o.TiburonEventName.ViewErrorScreen,t,n,a))},SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE:({metadata:t,extras:a,origin:n,event:r})=>{if(t.sharingLinksMetadata){const e=o.getByAccessLevel(t.sharingLinksMetadata,r.payload.link_access_level);e&&(a={...a,...Ea(e)})}e(ha(o.TiburonEventName.ChangeSharedLinkAudience,t,n,{old_audience:r.payload.previous[".tag"],new_audience:r.payload.next[".tag"],screen:o.ScreenName.SettingsScreen,...a}))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_CHANGE_ACCESS_MODAL__VIEW:({metadata:t,extras:a,event:n,origin:r})=>{e(ha(o.TiburonEventName.OpenParentFolderAccessModal,t,r,{...a,num_parent_folders:n.payload.numParents}))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_REMOVE_ACCESS_MODAL__VIEW:({metadata:t,extras:a,event:n,origin:r})=>{e(ha(o.TiburonEventName.OpenParentFolderAccessModal,t,r,{...a,num_parent_folders:n.payload.numParents}))},SHARE_MODAL_SHARE__VIEW:({metadata:t,extras:a,origin:n})=>{let r;t.sharingObjectMetadata&&(r=o.getCanDoAction(t.sharingObjectMetadata,o.INVITE_EDITOR_TAG)),t.sharingObjectMetadata&&o.getIsNonSharedFolder(t.sharingObjectMetadata)&&!r?a={...a,link_only_reason:"limited_permissions"}:t.sharingObjectMetadata&&o.getIsLinkOnlyMode(t.sharingObjectMetadata)?(a=t.sharingObjectMetadata.tooManyMountsError?{...a,link_only_reason:t.sharingObjectMetadata.tooManyMountsError[".tag"]}:{...a,link_only_reason:"is_family"},e(Sa(o.TiburonEventName.ViewLinkOnlyModal,t,n,{...a,share_tab:t.sharingAccessLevel&&"editor"===t.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"}))):(e(Sa(o.TiburonEventName.ViewShareScreen,t,n,{...a,share_tab:t.sharingAccessLevel&&"editor"===t.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"})),e(Sa(o.TiburonEventName.ViewShareTab,t,n,{...a,share_tab:t.sharingAccessLevel&&"editor"===t.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"})))},SHARE_MODAL_SHARE__LINK_ACCESS_LEVEL__CHANGE:({metadata:t,extras:a,origin:n,event:r})=>{e(Sa(o.TiburonEventName.ViewShareTab,t,n,{...a,share_tab:"editor"===r.payload.next[".tag"]?"edit_tab":"view_tab"}))},SHARE_MODAL_MANAGE_ACCESS__VIEW:({metadata:t,extras:a,origin:n,event:r})=>{e(Sa(o.TiburonEventName.ViewManageAccessScreen,t,n,{...a,manage_tab:r.payload.manage_tab,share_modal_initial_screen:r.payload.share_modal_initial_screen}))},SHARE_MODAL_MANAGE_ACCESS_TAB__VIEW:({metadata:t,extras:a,origin:n,event:r})=>{e(Sa(o.TiburonEventName.ViewManageAccessTab,t,n,{...a,manage_tab:r.payload.manage_tab,share_modal_initial_screen:r.payload.share_modal_initial_screen}))},SHARE_MODAL_SHARE__MANAGE_ACCESS__CLICK:({metadata:t,extras:a,origin:n})=>{e(Sa(o.TiburonEventName.ClickWhoCanAccess,t,n,a))},SHARE_MODAL__REQUEST_CLOSE__CALLED:({metadata:t,extras:a,origin:n,event:r,cache:i})=>{t={...t,sharingObjectIdentifier:r.payload.objectIdentifier},t={...t,shareModalSessionId:r.payload.sessionId},i.inviteStartTime&&(a={...a,time_modal_opened:Date.now()-i.inviteStartTime}),e(ha(o.TiburonEventName.CloseShareModal,t,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptTargetSearch,t,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedTargetSearch,t,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.FailTargetSearch,t,n,{...a,error:r.payload.response.error[".tag"]}))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailTargetSearch,t,n,{...a,error:"unknown"}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_START:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.AttemptDeleteSharedLink,t,n,a))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR:({metadata:t,event:a,origin:n,extras:r})=>{e(ha(o.TiburonEventName.FailDeleteSharedLink,t,n,{http_status_code:a.payload.response.statusCode,error_message:a.payload.response.error[".tag"],...r}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.FailDeleteSharedLink,t,n,{http_status_code:0,error_message:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.SucceedDeleteSharedLink,t,n,{http_status_code:200,response_status:"success",...a}))},SHARE_MODAL_SETTINGS__CREATE_LINK__NAMESPACE_CREATE_ERROR:({metadata:t,extras:a,event:n,origin:r})=>{var i,s;a={...a,http_status_code:0,error_tag:"undefined_error",access:(null===(i=t.sharingAccessLevel)||void 0===i?void 0:i[".tag"])||"unknown"},a="ApiError"===n.payload.output.type||"PollingApiError"===n.payload.output.type?{...a,http_status_code:200,error_tag:n.payload.output.value.response.error[".tag"],access:(null===(s=t.sharingAccessLevel)||void 0===s?void 0:s[".tag"])||"unknown"}:"NetworkFailure"===n.payload.output.type||"PollingNetworkFailure"===n.payload.output.type?{...a,http_status_code:n.payload.output.value.response.statusCode||0}:{...a,error_tag:n.payload.output.type},e(ha(o.TiburonEventName.FailCreateNamespaceAfterLinkCreated,t,r,a))},SHARE_MODAL_SHARE__CREATE_LINK__NAMESPACE_CREATE_ERROR:({metadata:t,extras:a,event:n,origin:r})=>{var i,s;a={...a,http_status_code:0,error_tag:"undefined_error",access:(null===(i=t.sharingAccessLevel)||void 0===i?void 0:i[".tag"])||"unknown"},a="ApiError"===n.payload.output.type||"PollingApiError"===n.payload.output.type?{...a,http_status_code:200,error_tag:n.payload.output.value.response.error[".tag"],access:(null===(s=t.sharingAccessLevel)||void 0===s?void 0:s[".tag"])||"unknown"}:"NetworkFailure"===n.payload.output.type||"PollingNetworkFailure"===n.payload.output.type?{...a,http_status_code:n.payload.output.value.response.statusCode||0}:{...a,error_tag:n.payload.output.type},e(ha(o.TiburonEventName.FailCreateNamespaceAfterLinkCreated,t,r,a))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__ATTEMPT:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.AttemptSolveDefaultAudienceConflict,t,n,{...a,user_default_link_audience:r.payload.user_default_link_audience,team_default_link_audience:r.payload.team_default_link_audience,final_audience:r.payload.final_audience,is_team_user:r.payload.is_team_user}))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__FAIL:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.FailSolveDefaultAudienceConflict,t,n,{...a,user_default_link_audience:r.payload.user_default_link_audience,team_default_link_audience:r.payload.team_default_link_audience,final_audience:r.payload.final_audience,is_team_user:r.payload.is_team_user}))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__SUCCEED:({metadata:t,extras:a,origin:n,event:r})=>{e(ha(o.TiburonEventName.SucceedSolveDefaultAudienceConflict,t,n,{...a,user_default_link_audience:r.payload.user_default_link_audience,team_default_link_audience:r.payload.team_default_link_audience,final_audience:r.payload.final_audience,is_team_user:r.payload.is_team_user}))},SHARE_MODAL_VALIDATE_FOLDER_PATH_NO_PERMISSION:({metadata:t,extras:a,origin:n})=>{e(ha(o.TiburonEventName.ValidateFolderPathNoPermission,t,n,a))}})),[e])})(),t=T.useMemo((()=>({})),[]);return T.useCallback(((a,n,r)=>{const o=e[a.type];if(o&&r)try{o({event:a,metadata:n,origin:r,cache:t,extras:{is_sdk:!0}})}catch(e){}}),[e,t])},Ma=({sink:e,children:a,origin:n,actionInfo:r})=>{const o=(()=>{const e=Gt();return T.useCallback(((a,n)=>{var r;("SANDBOX"===e||e===t.Platforms.DESKTOP&&"developer"===(null===(r=n.desktopMetadata)||void 0===r?void 0:r.buildChannel))&&window.console.log(a,n)}),[e])})(),i=ya(),s=T.useMemo((()=>Ot(e,o,i)),[e,o,i]);return T.createElement(Dt,{sink:s,origin:n,actionInfo:r},a)};Ma.displayName="LoggingProviderWithBuiltIns";const Ia=({loggingSink:e,sdk:a,children:n,redirectWindowToken:r=null,intl:o,platform:i=t.Platforms.SANDBOX,openUrl:s=null,origin:l,actionInfo:d,onSnackbarShownChange:c})=>T.createElement(Bt,{intl:o},T.createElement(Vt,{platform:i},T.createElement(Qt,{openUrl:s||Kt},T.createElement(Ht,{sdk:a},T.createElement(Wt,{redirectWindowToken:r},T.createElement(Ma,{sink:e||Lt,origin:l,actionInfo:d},T.createElement(na,{onSnackbarShownChange:c},n)))))));Ia.displayName="Provider";const Ta=/^www\.dropbox\.com$/,Ca=/^meta-.*\.dev\.corp\.dropbox\.com$/,Ra=(e,t)=>{if(!e.sharingObjectIdentifier)throw new Error("Missing objectIdentifier while trying to log to PAP");if(!e.sharingObjectMetadata)throw new Error("Missing objectMetadata while trying to log to PAP");if(!t)throw new Error("Missing actionInfo while trying to log to PAP")},wa=async(e,t)=>{const a=o.PAP_Copy_SharedLink({...e,contentAction:e.contentAction?o.getContentActionFromString(e.contentAction):void 0}),n={isDir:e.isDir?"true":"false"};"start"===e.eventState?o.UDCL.logStart(a,{tags:n,key:t}):o.UDCL.logEnd(a,{tags:n,key:t})},Na=async(e,t)=>{const a=o.PAP_Create_SharedLink({...e,contentAction:e.contentAction?o.getContentActionFromString(e.contentAction):void 0});"start"===e.eventState?o.UDCL.logStart(a,{key:t}):o.UDCL.logEnd(a,{key:t})},La=()=>(({logCopyLinkEvent:e,logCreateLinkEvent:t})=>T.useCallback(((a,n,r,i)=>{switch(a.type){case"SHARE_MODAL_SHARE__COPY_LINK__CLICK":Ra(n,i),o.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...o.getBaseCopySharedLinkProps("start",i,n,!0),...t},o.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__COPY_LINK__COPY_SUCCESS":Ra(n,i),o.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...o.getBaseCopySharedLinkProps("success",i,n,!0),...t},o.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__COPY_LINK__COPY_ERROR":Ra(n,i),o.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...o.getBaseCopySharedLinkProps("rejected",i,n,!0),...t},o.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_START":Ra(n,i),t(o.getBaseCreateSharedLinkProps("start",i,n),o.getFileIdOrPath(n)),e(o.getBaseCopySharedLinkProps("start",i,n,!1),o.getFileIdOrPath(n));break;case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_START":Ra(n,i),t(o.getBaseCreateSharedLinkProps("start",i,n),o.getFileIdOrPath(n));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_SUCCESS":case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS":Ra(n,i),o.getLinkMetadataSharedLinkProps(a.payload.response.output,200).then((e=>t({...o.getBaseCreateSharedLinkProps("success",i,n),...e},o.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_ERROR":case"SHARE_MODAL_SHARE__CREATE_LINK__API_FATAL":Ra(n,i);const r=o.getErrorState$1(a.payload.response);t({...o.getBaseCreateSharedLinkProps(r,i,n),...o.getCreateLinkExceptionProps(a.payload.response)},o.getFileIdOrPath(n)),e({...o.getBaseCopySharedLinkProps(r,i,n,!1),...o.getCreateLinkExceptionProps(a.payload.response)},o.getFileIdOrPath(n));break;case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR":case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL":Ra(n,i);const s=o.getErrorState$1(a.payload.response);t({...o.getBaseCreateSharedLinkProps(s,i,n),...o.getCreateLinkExceptionProps(a.payload.response)},o.getFileIdOrPath(n));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_ERROR":Ra(n,i),o.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...o.getBaseCopySharedLinkProps("rejected",i,n,!1),...t},o.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_FORBIDDEN":Ra(n,i),o.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...o.getBaseCopySharedLinkProps("canceled",i,n,!1),...t},o.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_SUCCESS":Ra(n,i),o.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...o.getBaseCopySharedLinkProps("success",i,n,!1),...t},o.getFileIdOrPath(n))))}}),[t,e]))({logCopyLinkEvent:wa,logCreateLinkEvent:Na}),ka=({userApiProps:e,origin:a,actionInfo:r,children:i,platform:c=t.Platforms.METASERVER,shouldDisableImportContacts:_})=>{const u=La(),m=T.default.useCallback((e=>{"TEAMS_WEB"===e.type&&o.TeamsWebActionsLogger.log(e.payload.name,e.payload.extra)}),[]),g=T.default.useMemo((()=>Ot(u,m)),[u,m]),p=T.default.useMemo((()=>(e=>{const t=window.location.hostname;if(!Ta.test(t)&&!Ca.test(t))throw new Error("Cannot initialize the SDK on an unsupported domain.");const a=new s.DropboxAuth({domain:window.location.hostname,domainDelimiter:""});return new s.Dropbox({auth:a,fetch:(t,a)=>{const n=new Headers((null==a?void 0:a.headers)||[]),r=window.location.hostname;(Ta.test(r)||Ca.test(r))&&n.append("X-CSRF-Token",l.readCsrfToken()||""),n.append("X-Dropbox-Uid",e.id.toString());const o=e.root_ns_id;null!==o&&n.append("Dropbox-API-Path-Root",JSON.stringify({".tag":"namespace_id",namespace_id:o.toString()}));const i={...a||{},headers:n};return fetch(t,i)}})})(e)),[e]),{data:E,isLoading:f,isError:h}=(()=>{const{data:e,isLoading:t,isError:a,error:n}=d.loginAndRegisterConstantsPrefetchRequest.useQuery({apiArg:null,pkgArg:null});return{data:null==e?void 0:e.apiData,isLoading:t,isError:a,error:n}})();if(f||h)return null;const S=_||null==E?void 0:E.redirectWindowToken;return T.default.createElement(Ia,{intl:n.intl,sdk:p,loggingSink:g,redirectWindowToken:S,platform:c,origin:a,actionInfo:r},i)};ka.displayName="SharingSdkProviderInternal";const Oa=e=>e.formatMessage({id:"R8tdDL",defaultMessage:"Can edit"}),xa=e=>e.formatMessage({id:"2kS9ex",defaultMessage:"Can view"}),Da=e=>e.formatMessage({id:"pI4aSB",defaultMessage:"View-only"}),Pa=e=>e.formatMessage({id:"UznKXK",defaultMessage:"People can edit, delete, comment, and add the files to their Dropbox"}),Fa=e=>e.formatMessage({id:"ScDA/0",defaultMessage:"People can edit, delete, comment, and add the file to their Dropbox"}),$a=e=>e.formatMessage({id:"WlnggN",defaultMessage:"People can edit, delete, and add items to this collection"}),Ha=e=>e.formatMessage({id:"jSEExB",defaultMessage:"People can view, download, and comment"}),Ba=e=>e.formatMessage({id:"svq/mv",defaultMessage:"People can view and download items in this collection"}),Ua=e=>e.formatMessage({id:"5AmS1v",defaultMessage:"People can only view and download the file"}),ja=new Map,Va=e=>{const t=ja.get(e);if(t)return t;const a=o.getFileTypeFromString(e.split(".").slice(-1)[0]);return ja.set(e,a),a},Ga=o.defineContext(null),qa=e=>e?"file"===e.type?{sharedObjType:"file",fileType:Va(e.name)||"unresolved",isDir:"false"}:"file_folder"===e.type?{sharedObjType:"file_folder",fileType:"folder",isDir:"true"}:"shared_folder"===e.type?{sharedObjType:"shared_folder",fileType:"folder",isDir:"true"}:o.exhausts(e,{sharedObjType:"fallthrough",fileType:"fallthrough",isDir:"fallthrough"}):{sharedObjType:"unspecified",fileType:"unspecified",isDir:"unspecified"},za=e=>{if(e){if("file"===e.type){const t=Va(e.name);return{sharedObjType:"file",fileType:t,fileExtension:t,isDir:!1}}return"file_folder"===e.type?{sharedObjType:"folder",isDir:!0}:"shared_folder"===e.type?{sharedObjType:"shared_folder",isDir:!0}:o.exhausts(e[".tag"],{})}return{}},Wa=o.defineContext(null),Za=e=>{var t;return e?{actionSurface:e.actionSurface,actionElement:e.actionElement,tiburonOrigin:e.tiburonOrigin,contentAction:e.contentAction,screen:e.screen.toString(),isSm24:"sm24"===(null===(t=e.shareModalType)||void 0===t?void 0:t.toString())?"true":"false"}:{actionSurface:"unspecified",actionElement:"unspecified",tiburonOrigin:"unspecified",contentAction:"unspecified",screen:"unspecified",isSm24:"unspecified"}},Ka=e=>e?{actionSurface:e.actionSurface,actionElement:e.actionElement,contentAction:e.contentAction,tiburonOrigin:e.tiburonOrigin,screen:e.screen,shareModalType:e.shareModalType}:{},Ya=o.defineContext(""),Qa=({teamName:e,parentFolderName:t,isRestoreAccessEnabled:a,onRestoreAccessClick:r})=>{const i=n.useIntl(),s=T.useCallback((()=>{r(e)}),[e,r]),l=""!==t?i.formatMessage({id:"KG/fFv",defaultMessage:"This folder isn’t shared with everyone who has access to parent folder <b>{parent}</b>."},{parent:t,b:e=>T.createElement("b",{style:{fontWeight:"var(--type__body__standard--fontweight_strong)"}},e)}):i.formatMessage({id:"kIOCH3",defaultMessage:"This folder isn’t shared with everyone on {team_name}."},{team_name:G.em_snippet(e,o.SNIPPET_SIZES.DISPLAY_NAME)}),d=i.formatMessage({id:"96XDs/",defaultMessage:"Share with everyone"});return T.createElement(o.Banner,{withLeftIcon:T.createElement(o.UIIcon,{src:o.InfoLine})},T.createElement(o.Banner.Message,null,T.createElement(o.Text,null,l,a&&" ",a&&T.createElement(o.Button,{"aria-label":d,key:"restore access",variant:"transparent",size:"medium",onClick:s,style:{fontFamily:"var(--type__body__standard--fontfamily)",fontWeight:"var(--type__body__standard--fontweight_strong)",fontSize:"var(--type__body__standard--fontsize)",letterSpacing:0}},d))))};Qa.displayName="ConfidentialFolderSection";o.injectInternalStyle("/static/metaserver/static/js/sharing/features/shareme24/common/components/buttons.module.out-vfl6T2gv2.css",(e=>"._base-button_12q59_1{background:var(--dig-color__background__base);border:1px solid var(--dig-color__border__subtle);border-radius:var(--dig-radius__large);cursor:pointer;width:100%;word-break:break-word}._base-button_12q59_1:focus-visible{box-shadow:var(--dig-utilities__boxshadow__focus-ring)!important}._base-button_12q59_1:hover:not(:disabled){background:var(--dig-color__secondary__surface)}._base-button_12q59_1:active:not(:disabled){background:var(--dig-color__secondary__surface--state-1)}._button-wrapper_12q59_30,._horizontal-button_12q59_22,._vertical-button_12q59_26{width:100%}._title-text_12q59_34{color:inherit;font-family:var(--type__title__standard--fontfamily);font-size:14px;font-weight:500;line-height:24px;white-space:normal;width:100%}._vertical-button-outer-wrapper_12q59_44{text-align:left;width:100%}._vertical-button-inner-wrapper_12q59_49{align-items:start;display:flex;flex-direction:column;height:64px;justify-content:start;padding:var(--dig-spacing__micro__medium)}._horizontal-button-outer-wrapper_12q59_58{text-align:left;width:100%}._horizontal-button-inner-wrapper_12q59_63{align-items:center;display:flex;flex-direction:row;height:36px;justify-content:start;padding:var(--dig-spacing__micro__medium)}._flat-horizontal-button_12q59_72{border-color:var(--dig-color__border__subtle);border-radius:var(--dig-radius__small);border-style:solid;border-width:2px;width:100%}._flat-horizontal-button-outer-wrapper_12q59_80{text-align:left;width:100%}._flat-horizontal-button-inner-wrapper_12q59_85{align-items:center;display:flex;flex-direction:row;height:60px;justify-content:start;padding:var(--dig-spacing__micro__medium)}._flat-horizontal-button_12q59_72 ._button-icon-container_12q59_94{background:var(--dig-color__background__subtle);color:var(--dig-color__text__base);flex-basis:var(--dig-spacing__dimension__24);height:var(--dig-spacing__dimension__24);margin-bottom:var(--dig-spacing__micro__small);margin-top:var(--dig-spacing__micro__small);width:var(--dig-spacing__dimension__24)}._button-icon-container_12q59_94,._flat-horizontal-button_12q59_72 ._button-icon-container_12q59_94{align-items:center;border-radius:100%;display:flex;flex-grow:0;flex-shrink:0;justify-content:center;margin-right:var(--dig-spacing__micro__medium)}._button-inner-column_12q59_121{display:flex;flex-direction:column;width:100%}._base-button_12q59_1:disabled{color:var(--dig-color__disabled__surface);cursor:default}._utility-icon-button_12q59_132{align-items:center;background:var(--dig-color__background__base);border:1px solid var(--dig-color__border__subtle);border-radius:var(--dig-radius__large);display:flex;flex-shrink:0;height:40px;justify-content:center;width:48px}._spacer_12q59_144{flex:1;max-height:var(--dig-spacing__micro__large)}"));const Ja="_base-button_12q59_1",Xa=({children:e})=>T.createElement("div",{className:"_button-icon-container_12q59_94"},e);Xa.displayName="ButtonIconContainer";const en=({children:e,...t})=>T.createElement(o.StylelessButton,{className:`${Ja} _vertical-button_12q59_26`,...t},T.createElement("div",{className:"_vertical-button-outer-wrapper_12q59_44"},T.createElement("div",{className:"_vertical-button-inner-wrapper_12q59_49"},e)));en.displayName="VerticalButton";const tn=({children:e,...t})=>T.createElement(o.StylelessButton,{className:`${Ja} _horizontal-button_12q59_22`,...t},T.createElement("div",{className:"_horizontal-button-outer-wrapper_12q59_58"},T.createElement("div",{className:"_horizontal-button-inner-wrapper_12q59_63"},e)));tn.displayName="HorizontalButton";const an=({children:e,...t})=>T.createElement(o.StylelessButton,{className:`${Ja} _flat-horizontal-button_12q59_72`,...t},T.createElement("div",{className:"_flat-horizontal-button-outer-wrapper_12q59_80"},T.createElement("div",{className:"_flat-horizontal-button-inner-wrapper_12q59_85"},e)));an.displayName="HorizontalFlatButton";const nn=T.forwardRef(((e,t)=>{const{children:a,...n}=e;return T.createElement("div",{className:"_button-wrapper_12q59_30",...n,ref:t},a)}));nn.displayName="ButtonWrapper";const rn=({children:e})=>T.createElement("div",{className:"_button-inner-column_12q59_121"},e);rn.displayName="ButtonInnerColumn";const on=T.forwardRef(((e,t)=>{const{children:a,...n}=e;return T.createElement(o.IconButton,{className:"_utility-icon-button_12q59_132",variant:"transparent",...n,ref:t},a)}));on.displayName="UtilityIconButton";const sn=T.forwardRef(((e,t)=>{const{children:a,...n}=e;return T.createElement(o.IconButton,{variant:"borderless",...n,ref:t},e.children)}));sn.displayName="HeaderIconButton";const ln=({content:e})=>T.createElement(o.Text,{size:"medium",isBold:!0,className:"_title-text_12q59_34"},T.createElement(o.Truncate,{lines:2},e));ln.displayName="ButtonTitle";const dn=()=>T.createElement("div",{className:"_spacer_12q59_144"});dn.displayName="Spacer";const cn={".tag":"viewer"},_n={".tag":"editor"},un=e=>"file"===e[".tag"]?e.fileId:"file_folder"===e[".tag"]?e.path:"shared_folder"===e[".tag"]?`ns:${e.sharedFolderId}`:`ns:${e.nsId}`,mn=la({name:"sharing.alphaGetFileMetadata"},(e=>t=>sa(e.sharingAlphaGetFileMetadata(t)))),gn=la({name:"sharing.alphaGetFolderMetadata"},(e=>t=>sa(e.sharingAlphaGetFolderMetadata(t)))),pn=la({name:"sharing.validateFolderPathV2"},(e=>async t=>sa(e.sharingValidateFolderPathV2(t)))),En=la({name:"collections.getAllCollections"},(e=>t=>sa(e.collectionsGetAllCollections(t)))),fn=["change_options","disable_viewer_info","edit_contents","enable_viewer_info","invite_editor","invite_viewer","invite_viewer_no_comment","unshare","update_confidentiality","relinquish_membership"].map((e=>({".tag":e}))),hn=["change_options","create_edit_link","create_link","create_view_link","disable_viewer_info","edit_contents","enable_viewer_info","invite_editor","invite_viewer","invite_viewer_no_comment","relinquish_membership","remove_download_policy","set_download_policy","share_link","share_message_as_comment","unshare"].map((e=>({".tag":e}))),Sn=["change_options","create_link","disable_viewer_info","edit_contents","enable_viewer_info","invite_editor","invite_viewer","invite_viewer_no_comment","relinquish_membership","remove_download_policy","set_download_policy","share_link","leave_a_copy","set_access_inheritance","unmount","unshare","update_confidentiality"].map((e=>({".tag":e}))),vn=["change_options","create_link","disable_viewer_info","edit_contents","enable_viewer_info","invite_editor","invite_viewer","invite_viewer_no_comment","relinquish_membership","remove_download_policy","set_download_policy","share_link","leave_a_copy","set_access_inheritance","unmount","unshare","update_confidentiality"].map((e=>({".tag":e}))),An=["leave_a_copy","make_editor","make_owner","make_viewer","make_viewer_no_comment","remove"].map((e=>({".tag":e}))),bn=o.isObjectOf({path_lower:o.isString,is_confidential:o.isBoolean,is_inside_team_folder:o.isBoolean}),yn={name:{name:"sharing.proxy.getObjectMetadata"}.name,useFetch:()=>{const e=va(mn),t=va(gn),a=va(pn),n=va(En),r=Pt();return T.useCallback((async o=>{var i,s,l,d,c,_;if("file"===o[".tag"]){const t=await e({file:o.fileId,actions:hn});return"SUCCESS"===t.status?{...t,output:{...t.output,".tag":"file"}}:t}if("file_folder"===o[".tag"]){const e=await a({path:o.path,actions:fn,list_members_arg:{actions:An},confidentiality:{".tag":"not_confidential"}});if("SUCCESS"===e.status)return{...e,output:{...e.output,".tag":"file_folder",name:o.name}};if("ERROR"===e.status){if("no_permission"===e.error[".tag"]&&(_=e.error,bn(_))){r("SHARE_MODAL_VALIDATE_FOLDER_PATH_NO_PERMISSION",null);const t={...e.error,name:o.name,".tag":"file_folder"};return{status:ra.SUCCESS,output:t}}if("too_many_mounts_v2"===e.error[".tag"]){const t=e.error.too_many_mounts_v2;if("total_mounts_exceeded"===t[".tag"]||"home_mounts_exceeded"===t[".tag"]||"tree_size_exceeded"===t[".tag"]){const e={...t.metadata,name:o.name,".tag":"link_only",tooManyMountsError:t};return{status:ra.SUCCESS,output:e}}}else if("bad_path"===e.error[".tag"]){const t=e.error.bad_path;if("is_family"===t[".tag"]||"contains_app_folder"===t[".tag"]||"is_app_folder"===t[".tag"]||"inside_app_folder"===t[".tag"]){const e={...Object.fromEntries(Object.entries(t).filter((([e])=>".tag"!==e))),name:o.name,".tag":"link_only"};return{status:ra.SUCCESS,output:e}}}}return e}if("shared_folder"===o[".tag"]){const e=await t({shared_folder_id:o.sharedFolderId,actions:Sn});return"SUCCESS"===e.status?{...e,output:{...e.output,".tag":"shared_folder"}}:e}if("collection"===o[".tag"]){const[e,a]=await Promise.all([t({shared_folder_id:o.nsId,actions:vn}),n({collection_type_filter:[{".tag":"manual"}]})]);if("SUCCESS"!==e.status)return e;if("SUCCESS"!==a.status)return a;const r=null===(i=a.output.collection_infos)||void 0===i?void 0:i.find((e=>e.id===o.collectionId)),_=(null==r?void 0:r.cover_photo_thumbnail)?null==r?void 0:r.cover_photo_thumbnail:null===(c=null===(d=null===(l=null===(s=null==r?void 0:r.sample_collection_items)||void 0===s?void 0:s[0])||void 0===l?void 0:l.target_file)||void 0===d?void 0:d.file_info)||void 0===c?void 0:c.thumbnail_url_tmpl;return{status:ra.SUCCESS,output:{".tag":"collection",...e.output,collectionId:o.collectionId,thumbnailSrc:_}}}return{status:ra.ERROR,error:{".tag":"invalid_object"},statusCode:0}}),[e,t,a,n])},type:"proxy"};const Mn=o.defineContext(null),In=e=>e?o.isNewApiMetadata(e)||"file"===e[".tag"]||"file_folder"===e[".tag"]||"shared_folder"===e[".tag"]||"link_only"===e[".tag"]||"collection"===e[".tag"]?{}:o.exhausts(e[".tag"],{}):{},Tn=e=>e?o.isNewApiMetadata(e)?{}:"file"===e[".tag"]?{contentIdentifier:e.id}:"file_folder"===e[".tag"]||"shared_folder"===e[".tag"]||"link_only"===e[".tag"]||"collection"===e[".tag"]?{contentIdentifier:e.folder_id}:o.exhausts(e[".tag"],{}):{},Cn=Symbol("ON_INITIAL_LOAD_START"),Rn=Symbol("ON_INITIAL_LOAD_FAILURE"),wn=Symbol("ON_INITIAL_LOAD_CANCEL"),Nn=Symbol("ON_INITIAL_LOAD_SUCCESS"),Ln=Symbol("ON_FOLDER_ALREADY_SHARED"),kn=Symbol("ON_TEST_INITIAL_LOAD_START"),On=Symbol("ON_TEST_INITIAL_LOAD_SUCCESS"),xn=Symbol("ON_TEST_INITIAL_LOAD_CANCEL"),Dn=Symbol("ON_TEST_INITIAL_LOAD_FAILURE"),Pn=Symbol("ON_TEST_REFRESH_LOAD_START"),Fn=Symbol("ON_TEST_REFRESH_LOAD_SUCCESS"),$n=Symbol("ON_TEST_REFRESH_LOAD_CANCEL"),Hn=Symbol("ON_TEST_REFRESH_LOAD_FAILURE"),{useEmitter:Bn,defaultEmitter:Un}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i=t(Ya),s={...Za(a),...qa(n),...In(r)},l={...Ka(a),...za(n),...Tn(r)};if(e.key!==Cn){if(e.key===Rn){let t="none";if("response"in e.payload.error)try{const a=e.payload.error.response.error;".tag"in a&&(t=a[".tag"]||"none")}catch(e){t="loggingFailure"}const a={...s,errorType:e.payload.error.type,errorTag:t};return o.UDCL.logEnd(o.PAP_Load_ShareModal({eventState:"failed",...l}),{key:i,tags:a}),void o.UDCL.logEnd("ops.sm24.initial_data_load",{eventState:"failed",key:i,tags:a})}if(e.key===wn)return o.UDCL.logEnd(o.PAP_Load_ShareModal({eventState:"canceled",...l}),{eventState:"canceled",key:i,tags:s}),void o.UDCL.logEnd("ops.sm24.initial_data_load",{eventState:"canceled",key:i,tags:s});if(e.key===Nn)return o.UDCL.logEnd(o.PAP_Load_ShareModal({eventState:"success",...l}),{key:i,tags:s}),void o.UDCL.logEnd("ops.sm24.initial_data_load",{eventState:"success",key:i,tags:s});if(e.key!==Ln)if(e.key!==kn)if(e.key!==On)if(e.key!==xn)if(e.key!==Dn)if(e.key!==Pn)if(e.key!==Fn)if(e.key!==$n)if(e.key!==Hn);else{let t="none";if("response"in e.payload.error)try{const a=e.payload.error.response;".tag"in a&&(t=a[".tag"]||"none")}catch(e){t="loggingFailure"}o.UDCL.logEnd("ops.sm24.test_refresh_data_load",{eventState:"failed",key:i,tags:{...s,errorType:e.payload.error.type,errorTag:t}})}else o.UDCL.logEnd("ops.sm24.test_refresh_data_load",{eventState:"canceled",key:i,tags:s});else o.UDCL.logEnd("ops.sm24.test_refresh_data_load",{eventState:"success",key:i,tags:s});else o.UDCL.logStart("ops.sm24.test_refresh_data_load",{key:i,tags:s});else{let t="none";if("response"in e.payload.error)try{const a=e.payload.error.response;".tag"in a&&(t=a[".tag"]||"none")}catch(e){t="loggingFailure"}o.UDCL.logEnd("ops.sm24.test_initial_data_load",{eventState:"failed",key:i,tags:{...s,errorType:e.payload.error.type,errorTag:t}})}else o.UDCL.logEnd("ops.sm24.test_initial_data_load",{eventState:"canceled",key:i,tags:s});else o.UDCL.logEnd("ops.sm24.test_initial_data_load",{eventState:"success",key:i,tags:s});else o.UDCL.logStart("ops.sm24.test_initial_data_load",{key:i,tags:s});else o.UDCL.logEvent("ops.sm24.already_shared",{tags:s})}else o.UDCL.logStart("ops.sm24.initial_data_load",{key:i,tags:s})})),jn=e=>{const t=va(yn),a=Bn();return T.useCallback((async()=>{const t=e.$nonce.get(),n=e.$options.get(),r=e.$state.get(),i=n.objMetadataNewApiVariant;let s=n.objectIdentifier;"loaded"===r.status&&(s=r.objectIdentifier),a.select(Cn).emit(null);const l=t=>{e.$state.set({status:"error",errorType:"INITIAL_LOAD_ERROR",loadError:t}),a.select(Rn).emit({error:t})},d=await o.getSharingApiv2ResponseWithErrors(o.sharingPrefsPackage.fetchQuery(u.queryClient,{})),c=await o.getSharingApiv2ResponseWithErrors(o.sharingAccountInfoPackage.fetchQuery(u.queryClient,{},{staleTime:18e5}));let _,m,g;if("V1"===i?m=await o.getSharingApiv2ResponseWithErrors(o.sharingObjectMetadataPackage.fetchQuery(u.queryClient,{apiArg:{file_id:s.fileId}},{staleTime:3e5})):_=await u.queryClient.fetchQuery(["object-metadata",n.objectIdentifier],(()=>o.getSharingObjectMetadata(s))),t!==e.$nonce.get())return void a.select(wn).emit(null);if("SUCCESS"!==c.status||"SUCCESS"!==d.status||_&&"SUCCESS"!==_.status||m&&"SUCCESS"!==m.status)return void(_&&"SUCCESS"!==_.status?"ERROR"===_.status?l({type:"METADATA_ERROR",response:_}):l({type:"METADATA_FATAL",response:_}):m&&"SUCCESS"!==m.status?"ERROR"===m.status?l({type:"METADATA_ERROR_V2",response:m}):l({type:"METADATA_FATAL",response:m}):"SUCCESS"!==d.status?"ERROR"===d.status?l({type:"SHARING_PREFS_ERROR",response:d}):l({type:"SHARING_PREFS_FATAL",response:d}):"SUCCESS"!==c.status?l({type:"SHARING_ACCOUNT_INFO_ERROR"}):l({type:"OTHER"}));g="V1"===i?m.output:_.output;let p=s;"file_folder"===s[".tag"]&&o.getIsSharedFolder(g)&&(p={".tag":"shared_folder",sharedFolderId:o.getSharedFolderId(g),fileId:s.fileId}),e.$state.set({status:"loaded",objectIdentifier:p,memberActionsInProgress:{},memberAccountIdsAlreadyFetched:{},accountMetadata:c.output,memberAccounts:{},objectMetadata:g,sharingPrefs:d.output}),a.select(Nn).emit(null)}),[e,t,a])},Vn=e=>{const t=va(yn),a=(e=>T.useCallback((t=>{(e.$options.get().onRefreshError||(()=>{}))(t)}),[e]))(e),n=Bn();return T.useCallback((async()=>{const t=e.$state.get();if("loaded"!==t.status)return;const n=e.$nonce.get(),r=e.$state.get();if("V1"===e.$options.get().objMetadataNewApiVariant){const i=await o.getSharingApiv2ResponseWithErrors(o.sharingObjectMetadataPackage.fetchQuery(u.queryClient,{apiArg:{file_id:t.objectIdentifier.fileId}},{staleTime:3e5}));if(e.$nonce.get()!==n||"loaded"!==r.status)return null;if("ERROR"===i.status)return a({type:"METADATA_ERROR_V2",response:i}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"METADATA_ERROR_V2",response:i}});if("FATAL"===i.status)return a({type:"FATAL",response:i}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"FATAL",response:i}});e.$state.set({...r,objectMetadata:i.output})}else{const i=await o.getSharingObjectMetadata(t.objectIdentifier);if(e.$nonce.get()!==n||"loaded"!==r.status)return null;if("ERROR"===i.status)return a({type:"METADATA_ERROR",response:i}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"METADATA_ERROR",response:i}});if("FATAL"===i.status)return a({type:"FATAL",response:i}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"FATAL",response:i}});let s=r.objectIdentifier;"file_folder"===r.objectIdentifier[".tag"]&&".tag"in i.output&&"shared_folder"===i.output[".tag"]&&(s={".tag":"shared_folder",sharedFolderId:i.output.shared_folder_id,fileId:i.output.shared_folder_id}),e.$state.set({...r,objectMetadata:i.output,objectIdentifier:s})}return null}),[e,t,a,n])},Gn=e=>{const t=qn(e);return T.useMemo((()=>{if(!t||t.isLoading)return{isLoading:!0};if(t.isError)return{isError:!0,isLoading:!1,error:t.error.appError};{const e={};return Object.values(t.data.apiData).forEach((t=>{e[t.account_id]=t})),{isError:!1,isLoading:!1,output:e}}}),[t])},qn=e=>o.getAccountBatchPackage.useQuery({apiArg:{account_ids:e}},{enabled:e.length>0,staleTime:3e5,keepPreviousData:!0}),zn=e=>{const t=Wn(e);return T.default.useMemo((()=>!t||t.isLoading?{isLoading:!0}:t.isError?{isError:!0,isLoading:!1,error:t.error.appError}:{isError:!1,isLoading:!1,output:t.data.apiData}),[t])},Wn=e=>{const t=un(e);return o.sharingListSharedLinksPackage.useQuery({apiArg:{path:t,direct_only:!0}},{staleTime:3e5})};const Zn=e=>{const t=function(e){const t=un(e);return o.seenStateInfoPackage.useQuery({apiArg:{file_infos:[{file_identifier:t}],limit:150}},{staleTime:3e5,enabled:"file"===e[".tag"]})}(e);return T.useMemo((()=>t?t.isLoading||!t.data?{isLoading:!0}:t.error?{isLoading:!1,isError:!0,error:t.error.appError}:t.data.apiData&&0!==t.data.apiData.length?{output:t.data.apiData[0],isLoading:!1,isError:!1}:{isLoading:!1,isError:!1,output:void 0}:{isLoading:!0}),[t])};const Kn=(e,t)=>{const a=[],n=t&&null!==o.getEditLinkMetadata(t),r=t&&null!==o.getViewLinkMetadata(t);if(!e)return a;for(const t of e.seen_state_info.seen_states)if(!Yn.isAnonymousSeenState(t)){const e=t.seen_state_user.sharing_access_type;if(e)switch(e[".tag"]){case"link_only":a.push(t);break;case"view_link_access":r&&a.push(t);break;case"edit_link_access":n&&a.push(t)}}return a};var Yn;function Qn(e){return{class:"share",action:"select",object:"manage_access_action",properties:e}}function Jn(e){return{class:"share",action:"view",object:"manage_access",properties:e}}!function(e){function t(e){return e.startsWith("dbafvid:")}e.isAnonymousUserId=t,e.isAnonymousSeenState=e=>t(e.seen_state_user.user_id)}(Yn||(Yn={}));const Xn=Symbol("ON_VIEW_MANAGE_ACCESS"),er=Symbol("ON_VIEW_PARENT_FOLDER_REMOVE_ACCESS_MODAL"),tr=Symbol("ON_VIEW_PARENT_FOLDER_CHANGE_ACCESS_MODAL"),ar=Symbol("ON_VIEW_PARENT_FOLDER_CHANGE_INHERITANCE_MODAL"),nr=Symbol("ON_VIEW_CONFIRMATION_MODAL"),rr=Symbol("ON_VIEW_ENTRY_POINT_BUTTON"),or=Symbol("ON_VIEW_REMOVE_ALL_INHERITED_MEMBERS_CONFIRMATION_MODAL"),ir=Symbol("ON_MEMBER_ACTION_START"),sr=Symbol("ON_MEMBER_ACTION_CANCEL"),lr=Symbol("ON_MEMBER_ACTION_SUCCESS"),dr=Symbol("ON_REMOVE_ALL_INHERITED_MEMBERS_START"),cr=Symbol("ON_REMOVE_ALL_INHERITED_MEMBERS_CANCEL"),_r=Symbol("ON_REMOVE_ALL_INHERITED_MEMBERS_SUCCESS"),{useEmitter:ur,defaultEmitter:mr}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r),isSm24:"true"},s={...Ka(a),...za(n),...Tn(r)};if(e.key!==Xn)if(e.key!==er)if(e.key!==tr)if(e.key!==nr)if(e.key!==rr)if(e.key!==or)if(e.key!==ir)if(e.key!==sr)if(e.key!==lr)if(e.key!==dr)if(e.key!==cr)if(e.key!==_r){if(e.key!==ar)return o.exhausts(e,void 0);o.UDCL.logEvent(Jn({...s,manageAccessElement:"parent_folder_change_inheritance_modal"}),{tags:{...i,element:"parent_folder_change_inheritance_modal"}})}else o.UDCL.logEnd(Qn({...s,eventState:"success",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"success"}});else o.UDCL.logEnd(Qn({...s,eventState:"canceled",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"canceled"}});else o.UDCL.logStart(Qn({...s,eventState:"start",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"start"}});else o.UDCL.logEnd(Qn({...s,eventState:"success",memberActionType:e.payload.memberActionType,newAccessLevel:e.payload.newAccessLevel?e.payload.newAccessLevel[".tag"]:void 0}),{tags:{...i,action:e.payload.memberActionType,eventState:"success"}});else o.UDCL.logEnd(Qn({...s,eventState:"canceled",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"canceled"}});else o.UDCL.logStart(Qn({...s,eventState:"start",memberActionType:e.payload.memberActionType,prevAccessLevel:e.payload.prevAccessLevel[".tag"]}),{tags:{...i,action:e.payload.memberActionType,eventState:"start"}});else o.UDCL.logEvent(Jn({...s,manageAccessElement:"remove_all_inherited_members_confirmation_modal"}),{tags:{...i,element:"remove_all_inherited_members_confirmation_modal"}});else o.UDCL.logEvent(Jn({...s,manageAccessElement:"manage_access_entry_point_button"}),{tags:{...i,element:"manage_access_entry_point_button"}});else o.UDCL.logEvent(Jn({...s,manageAccessElement:"manage_access_confirmation_modal"}),{tags:{...i,element:"manage_access_confirmation_modal"}});else o.UDCL.logEvent(Jn({...s,manageAccessElement:"parent_folder_change_access_modal"}),{tags:{...i,element:"parent_folder_change_access_modal"}});else o.UDCL.logEvent(Jn({...s,manageAccessElement:"parent_folder_remove_access_modal"}),{tags:{...i,element:"parent_folder_remove_access_modal"}});else o.UDCL.logEvent(Jn({...s,manageAccessElement:"manage_access_screen"}),{tags:{...i,element:"manage_access_screen"}})}));o.injectInternalStyle("/static/metaserver/static/js/sharing/features/shareme24/manage_access/manage-access-inband-button.module.out-vfl4SYsg0.css",(e=>"._manage-access-button_3t37j_1{background-color:var(--dig-color__opacity__surface--state-1);border:0;border-radius:17px;color:var(--dig-color__text__subtle);height:34px;margin-right:8px}._manage-access-button-facepile_3t37j_10{padding-left:12px}._manage-access-button-facepile-other-item_3t37j_14>*>div{background:var(--dig-color__secondary__surface--state-1)}._manage-access-button-icon-container_3t37j_19{align-items:center;display:flex;height:100%;justify-content:center}"));const gr="_manage-access-button_3t37j_1",pr="_manage-access-button-facepile_3t37j_10",Er="_manage-access-button-facepile-other-item_3t37j_14",fr="_manage-access-button-icon-container_3t37j_19",hr=(e,t)=>T.default.createElement(o.Facepile.Item,{key:e,alt:t.name.display_name,cursor:"pointer","aria-label":t.name.display_name,src:t.profile_photo_url},Sr(t.name.display_name));function Sr(e){return function(e){if(null==e||!(e.length>0))return"";const t=e.split(" ");let a=t.map((e=>e.charAt(0).toLowerCase()));a.length>2&&(a=a.splice(0,2));return a.join("")}(e).toUpperCase()}const vr=()=>T.default.createElement("div",{className:pr},T.default.createElement(o.Facepile,{size:"xsmall",isInteractive:!1},new Array(3).fill(0).map(((e,t)=>(e=>T.default.createElement(o.Facepile.Item,{key:e},T.default.createElement(o.Skeleton.Avatar,{size:"xsmall"})))(t))))),Ar=e=>{const{accountData:t,objectMembers:a}=e,{user:n}=o.useActiveUser(),r=T.default.useMemo((()=>{let e=0,r=[];const{groups:i,users:s,invitees:l}=a,d=n?t[n.account_id]:void 0;var c;return d&&r.push(hr(e++,d)),i.forEach((t=>{r.push(((e,t)=>"team"===t.group.group_type[".tag"]?T.default.createElement(o.Facepile.Item,{key:e,cursor:"pointer",colorPalette:o.avatarColorPalette(),alt:t.group.group_name,"aria-label":t.group.group_name},T.default.createElement(o.UIIcon,{src:m.TeamLine,role:"presentation"})):T.default.createElement(o.Facepile.Item,{key:e,cursor:"pointer",alt:t.group.group_name,"aria-label":t.group.group_name},Sr(t.group.group_name)))(e++,t))})),s.forEach((a=>{if(!n||a.user.account_id!==n.account_id)if(Object.keys(t).length>0){const n=t[a.user.account_id];if(n){const t=hr(e++,n);r.push(t)}}else{const t=((e,t)=>T.default.createElement(o.Facepile.Item,{key:e,cursor:"pointer","aria-label":t.user.display_name},Sr(t.user.display_name)))(e++,a);r.push(t)}})),l.forEach((t=>{const a=((e,t)=>{var a,n;const r="email"===t.invitee[".tag"]?t.invitee.email:null===(a=t.user)||void 0===a?void 0:a.display_name;return T.default.createElement(o.Facepile.Item,{key:e,cursor:"pointer","aria-label":r,alt:null===(n=t.user)||void 0===n?void 0:n.display_name},Sr(r))})(e++,t);r.push(a)})),r.length>3&&(r=r.slice(0,2),r.push((c=e++,T.default.createElement(o.Facepile.Item,{className:Er,key:c,cursor:"pointer",colorPalette:{background:"#00000000",foreground:"var(--dig-color__text__base)"}},T.default.createElement(o.UIIcon,{src:o.PersonMultipleLine,role:"presentation"}))))),r}),[n,a,t]);return T.default.createElement("div",{className:pr},T.default.createElement(o.Facepile,{size:"xsmall",isInteractive:!1},r))};Ar.displayName="ManageAccessButtonFacepile";const br=(e,t,a)=>{const n=o.getName(a),r=o.getParentFolderName(a);return t?e.formatMessage({id:"5xCeTo",defaultMessage:"Removing members from <strong>{folderName}</strong>…"},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.default.createElement("strong",null,e)}):""===r?e.formatMessage({id:"90I244",defaultMessage:"Sharing <strong>{folderName}</strong> with everyone…"},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.default.createElement("strong",null,e)}):e.formatMessage({id:"16RnmU",defaultMessage:"Sharing <strong>{folderName}</strong> with members of <strong>{parentFolderName}</strong>…"},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),parentFolderName:G.em_snippet(r,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.default.createElement("strong",null,e)})},yr=(e,t)=>t?e.formatMessage({id:"1HgFQB",defaultMessage:"Couldn’t remove members. Try again."}):e.formatMessage({id:"ypun4U",defaultMessage:"Couldn’t share folder. Try sharing again."}),Mr=(e,t,a)=>{const n=o.getName(a),r=o.getParentFolderName(a);return t?e.formatMessage({id:"7POTZF",defaultMessage:"Members removed from <strong>{folderName}</strong>."},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.default.createElement("strong",null,e)}):void 0===r||""===r?e.formatMessage({id:"nni9pE",defaultMessage:"<strong>{folderName}</strong> shared with everyone."},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.default.createElement("strong",null,e)}):e.formatMessage({id:"qvP8A+",defaultMessage:"<strong>{folderName}</strong> shared with members of <strong>{parentFolderName}</strong>."},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),parentFolderName:G.em_snippet(r,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.default.createElement("strong",null,e)})},Ir=e=>e.formatMessage({id:"2kS9ex",defaultMessage:"Can view"}),Tr=(e,t)=>"editor"===t[".tag"]?(e=>e.formatMessage({id:"R8tdDL",defaultMessage:"Can edit"}))(e):"owner"===t[".tag"]?(e=>e.formatMessage({id:"/epRg4",defaultMessage:"Owner"}))(e):"viewer"===t[".tag"]?Ir(e):"viewer_no_comment"===t[".tag"]?(e=>e.formatMessage({id:"pI4aSB",defaultMessage:"View-only"}))(e):Ir(e),Cr=e=>e.formatMessage({id:"uiUfVo",defaultMessage:"People with a link might still have access."}),Rr=e=>e.formatMessage({id:"J9wEBS",defaultMessage:"Manage Links"}),wr=e=>e.formatMessage({id:"6K7VUR",defaultMessage:"Close"}),Nr=e=>e.formatMessage({id:"Tmil/1",defaultMessage:"Couldn’t remove member. Try removing them again."}),Lr=(e,t)=>e.formatMessage({id:"Ye9pDs",defaultMessage:"Removing member from <b>{currentFolder}</b>…"},{currentFolder:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),kr=(e,t)=>e.formatMessage({id:"vhAme6",defaultMessage:"Member removed from <b>{currentFolder}</b>."},{currentFolder:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),Or=e=>e.formatMessage({id:"/4HTAy",defaultMessage:"Updating member access…"}),xr=e=>e.formatMessage({id:"OpE7PX",defaultMessage:"Member access updated."}),Dr=e=>e.formatMessage({id:"qMG/h/",defaultMessage:"Couldn’t change access."}),Pr=(e,t)=>e.formatMessage({id:"zzQ4WU",defaultMessage:"Changing access for <b>{currentFolder}</b>…"},{currentFolder:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),Fr=e=>e.formatMessage({id:"ad6tQw",defaultMessage:"Couldn’t change access. Try changing access again."}),$r=(e,t)=>e.formatMessage({id:"PAzrUg",defaultMessage:"Removing members from <b>{currentFolder}</b>…"},{currentFolder:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),Hr=e=>e.formatMessage({id:"OyDuPN",defaultMessage:"Couldn’t remove members. Try removing them again."}),Br=e=>e.formatMessage({id:"idUNYc",defaultMessage:"Checkbox"}),Ur=(e,t,a)=>e.formatMessage({id:"/7+vx5",defaultMessage:"Because {memberName} can edit the parent folder, their access to <b>{contentName}</b> can't be changed."},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),contentName:G.em_snippet(a,o.SNIPPET_SIZES.FILENAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),jr=(e,t)=>e.formatMessage({id:"b2R7ut",defaultMessage:"Can't change access for {memberName}"},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME)}),Vr=(e,t)=>e.formatMessage({id:"fP62vP",defaultMessage:"Couldn't change access for {memberName}"},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME)}),Gr=(e,t,a,n)=>e.formatMessage({id:"kQXitL",defaultMessage:"{count, plural, one{To change their access to <b>{contentName}</b>, you'll need to change their access to the parent folder <b>{singleParentFolderName}</b>.} other{To change their access to <b>{contentName}</b>, you'll need to change their access to the parent folders listed.}}"},{count:t,contentName:G.em_snippet(a,o.SNIPPET_SIZES.FILENAME),singleParentFolderName:G.em_snippet(n,o.SNIPPET_SIZES.FILENAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),qr=e=>e.formatMessage({id:"DzCuYI",defaultMessage:"Okay"}),zr=e=>e.formatMessage({id:"9CMIle",defaultMessage:"Cancel"}),Wr=(e,t)=>e.formatMessage({id:"jc0mkL",defaultMessage:"Couldn't remove {memberName}"},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME)}),Zr=(e,t,a)=>e.formatMessage({id:"1NJLE0",defaultMessage:"Because {memberName} has access to the parent folder, they can't be removed from <b>{contentName}</b>."},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),contentName:G.em_snippet(a,o.SNIPPET_SIZES.FILENAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),Kr=(e,t,a,n)=>e.formatMessage({id:"wslHDy",defaultMessage:"{count, plural, one{To remove them from <b>{contentName}</b>, you'll need to remove them from the parent folder <b>{singleParentFolderName}</b>.} other{To remove them from <b>{contentName}</b>, you'll need to remove them from the parent folders listed.}}"},{count:t,contentName:G.em_snippet(a,o.SNIPPET_SIZES.FILENAME),singleParentFolderName:G.em_snippet(n,o.SNIPPET_SIZES.FILENAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}),Yr=({children:e,accountData:t,objectMembers:a,objectMetadata:r})=>{const i=n.useIntl(),{user:s}=o.useActiveUser(),l=T.default.useMemo((()=>{if(o.getIsNonSharedFolder(r)&&o.getParentFolderName(r))return((e,t)=>e.formatMessage({id:"8AwtWF",defaultMessage:"All users with access to <b>{parentFolderName}</b> have access"},{parentFolderName:t,b:e=>T.default.createElement("b",null,e)}))(i,o.getParentFolderName(r));let e=!1,n=[];const{groups:l,users:d,invitees:c}=a;return d.forEach((e=>{if(!s||e.user.account_id!==s.account_id)if(Object.keys(t).length>0){const a=t[e.user.account_id];a&&n.push(a.name.display_name)}else n.push(e.user.display_name.split(" ")[0])})),l.forEach((e=>{n.push(e.group.group_name)})),c.forEach((t=>{var a,r;"email"===t.invitee[".tag"]?n.push(null!==(r=null===(a=t.user)||void 0===a?void 0:a.display_name)&&void 0!==r?r:t.invitee.email):e=!0})),n.length>3&&(e=!0,n=n.slice(0,3)),0===n.length?e?(e=>e.formatMessage({id:"y5hy2t",defaultMessage:"Others have access"}))(i):(e=>e.formatMessage({id:"Qg2V/b",defaultMessage:"Only you have access"}))(i):e?((e,t)=>1===t.length?e.formatMessage({id:"QZrsxj",defaultMessage:"{member} and others have access"},{member:t[0]}):e.formatMessage({id:"zDig8e",defaultMessage:"{listOfMembers}, and others have access"},{listOfMembers:t.join(", ")}))(i,n):((e,t)=>1===t.length?e.formatMessage({id:"vJpxUi",defaultMessage:"{memberName} has access"},{memberName:t[0]}):2===t.length?e.formatMessage({id:"6NqZtx",defaultMessage:"{firstMember} and {secondMember} have access"},{firstMember:t[0],secondMember:t[1]}):e.formatMessage({id:"/m2Vwi",defaultMessage:"{allButLastMember}, and {lastMember} have access"},{allButLastMember:t.slice(0,-1).join(", "),lastMember:t[t.length-1]}))(i,n)}),[r,a,i,s,t]);return T.default.createElement(o.Tooltip,{title:l,placement:"bottom",maxWidth:160},T.default.createElement("div",null,e))};Yr.displayName="ManageAccessButtonTooltip";const Qr=e=>"user"in e&&null!=e.user?e.user.display_name:"group"in e&&void 0!==e.group?e.group.group_name:"invitee"in e&&void 0!==e.invitee&&"email"===e.invitee[".tag"]?e.invitee.email:"",Jr=(e,t)=>!!t&&("user"in e&&null!=e.user&&e.user.account_id===t.account_id),Xr=e=>"user"in e&&null!=e.user?{".tag":"dropbox_id",dropbox_id:e.user.account_id}:"group"in e&&void 0!==e.group?{".tag":"dropbox_id",dropbox_id:e.group.group_id}:"invitee"in e&&void 0!==e.invitee&&"email"===e.invitee[".tag"]?{".tag":"email",email:e.invitee.email}:{".tag":"other"};var eo;!function(e){e[e.RemoveAccess=0]="RemoveAccess",e[e.DowngradeAccess=1]="DowngradeAccess"}(eo||(eo={}));const to=e=>e.sort(((e,t)=>{const a=Qr(e).toLowerCase(),n=Qr(t).toLowerCase();return a<n?-1:a>n?1:0})),ao=(e,t,a)=>{const n=((e,t)=>e.formatMessage({id:"b+NGsd",defaultMessage:"{time_str}"},{time_str:t}))(e,uo(e,a));return`${t} · ${n}\n`},no=(e,t)=>t<=0?"":((e,t)=>e.formatMessage({id:"+8e1lg",defaultMessage:"{count, plural, one{and # other} other{and # others}}"},{count:t}))(e,t),ro=[{action:{".tag":"make_editor"},allow:!1},{action:{".tag":"make_owner"},allow:!1},{action:{".tag":"make_viewer"},allow:!1},{action:{".tag":"make_viewer_no_comment"},allow:!1},{action:{".tag":"remove"},allow:!1}],oo=e=>e?e.map((e=>{const{seen_state_user:{user_id:t,display_name:a,email:n,sharing_access_type:r,same_team:o},when_last_seen:i}=e;let s={".tag":"viewer"};return r&&"edit_link_access"===r[".tag"]&&(s={".tag":"editor"}),{access_type:s,user:{account_id:t,display_name:a,email:n||"",same_team:o,disabled:!1},is_inherited:!1,permissions:ro,time_last_seen:i?new Date(1e3*i).toString():void 0}})):[],io=e=>{if(!e)return{};const t={};return e.forEach((e=>{const{seen_state_user:{user_id:a,display_name:n,email:r,photo_circle_url:o,same_team:i}}=e,s={account_id:a,name:{given_name:"",surname:"",familiar_name:"",display_name:n,abbreviated_name:""},email:r||"",email_verified:!0,profile_photo_url:o,is_teammate:i,disabled:!1};t[a]=s})),t},so=6e4,lo=36e5,co=864e5,_o=2592e6,uo=(e,t,a=new Date)=>{const n=Number(a)-Number(t);if(n>=31536e6)return e.formatDate(t,{year:"numeric",month:"short",day:"numeric"});let r=0,o="minute";switch(n<so?(r=0,o="minute"):n<lo?(r=Math.floor(n/so),o="minute"):n<co?(r=Math.floor(n/lo),o="hour"):n<_o?(r=Math.floor(n/co),o="day"):(r=Math.min(11,Math.floor(n/_o)),o="month"),o){case"minute":return 0===r?(e=>e.formatMessage({id:"XP0b1q",defaultMessage:"just now"}))(e):((e,t)=>e.formatMessage({id:"wKaToF",defaultMessage:"{value, plural, one{# minute ago} other{# minutes ago}}"},{value:t}))(e,r);case"hour":return((e,t)=>e.formatMessage({id:"Tq1+vX",defaultMessage:"{value, plural, one{# hour ago} other{# hours ago}}"},{value:t}))(e,r);case"day":return 1===r?(e=>e.formatMessage({id:"YDw317",defaultMessage:"Yesterday"}))(e):((e,t)=>e.formatMessage({id:"jN1kbT",defaultMessage:"{value, plural, one{# day ago} other{# days ago}}"},{value:t}))(e,r);case"month":return 1===r?(e=>e.formatMessage({id:"aCaq4h",defaultMessage:"Last month"}))(e):((e,t)=>e.formatMessage({id:"RfkWNk",defaultMessage:"{value, plural, one{# month ago} other{# months ago}}"},{value:t}))(e,r)}},mo=()=>T.default.createElement(o.StylelessButton,{className:o.cx(Ja,gr)},T.default.createElement(vr,null),T.default.createElement(o.Box,{className:fr},T.default.createElement(o.UIIcon,{size:"small",src:o.ChevronRightLine}))),go=e=>{const t=ur(),a=T.default.useRef(!1),{user:n}=o.useActiveUser();let{objectIdentifier:r}=e;const i=o.useSharingObjectMetadata(r),s=i.isLoading,l=!i.isLoading&&!i.isError,d=l?i.output:void 0,c=d&&".tag"in d&&"shared_folder"===d[".tag"];"file_folder"===r[".tag"]&&c&&(r={".tag":"shared_folder",sharedFolderId:d.shared_folder_id});const _=o.useObjectMembers(r),u=_.isLoading,m=_.isFirstPageLoaded&&_.isFirstPageOnly,g=zn(r),p=!g.isLoading&&!g.isError,E=p?g.output:void 0,f=g.isLoading,h=Zn(r),S=h.isLoading||h.isError?void 0:h.output,v=Kn(S,E),A=oo(v),b=io(v),y=((e,t)=>{const a=[];return e.isFirstPageLoaded&&e.isFirstPageOnly?(e.firstPage.users.map((e=>a.push(e.user.account_id))),0===e.firstPage.users.length&&t&&a.push(t.account_id),a):[]})(_,n),M=Gn(y),I=!M.isLoading&&!M.isError,C=M.isLoading,R=m&&I&&l&&p,w=u||C||s||f;if(T.default.useEffect((()=>{!a.current&&R&&(a.current=!0,t.select(rr).emit(null))}),[R,t]),R){const t={..._.firstPage};t.users=[...t.users,...A];const a={...M.output,...b};return T.default.createElement(po,{...e,objectMetadata:i.output,objectMembers:t,accountData:a})}return w?T.default.createElement(mo,null):null};go.displayName="ManageAccessButton";const po=({objectMembers:e,accountData:t,objectMetadata:a,...n})=>T.default.createElement(Yr,{objectMembers:e,accountData:t,objectMetadata:a},T.default.createElement(o.StylelessButton,{className:o.cx(Ja,gr),onClick:n.onClick,"data-testid":"manage-access-button","data-uxa-log":"manage_access_inband_entry_button"},T.default.createElement(Ar,{objectMembers:e,accountData:t}),T.default.createElement(o.Box,{className:fr},T.default.createElement(o.UIIcon,{size:"small",src:o.ChevronRightLine}))));po.displayName="ManageAccessButtonInner";const Eo=["altText","inverse"];var fo=e=>{let{altText:t,inverse:a}=e,n=g._objectWithoutProperties(e,Eo);const{getInverseProps:r}=o.useTheme(),{className:i}=r(),s="dig-Illustration dig-13or4mr1_4-3-0 dig-Illustration-spot"+(a?i+" dig-Illustration--inverse":"");return T.createElement("svg",g._objectSpread2(g._objectSpread2({role:"presentation"},n),{},{className:s,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),T.createElement("title",null,t),T.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},T.createElement("path",{d:"M136.608 219.783c-.342.342-9.166.718-21.52.916-7.467.12-15.13.436-17.029.703-3.389.477-9.153 2.017-17.153 4.585-6.83 2.192-12.763 6.926-12.763 10.183 0 1.285.948 2.347 1.922 2.153.335-.068 1.23.205 1.99.604.76.398 4.653 1.698 8.653 2.888 4 1.189 7.935 2.426 8.745 2.748.81.322 3.957.95 6.995 1.396 3.038.447 6.766 1.109 8.285 1.472 1.519.363 6.179.859 10.355 1.102 4.177.243 11.323.694 15.879 1.001 4.557.307 13.877.571 20.712.585 8.356.017 13.439.225 15.519.636 3.939.776 5.306.256 6.821-2.6 1.333-2.514 2.347-3.199 6.052-4.092 3.643-.877 11.22-.573 18.783.754 2.912.511 6.743.935 8.515.941 3.191.012 4.857.217 12.887 1.585 2.278.388 7.456 1.117 11.507 1.621 10.391 1.293 17.48 3.696 23.671 8.026 2.213 1.547 4.645 2.044 10.21 2.082 2.18.015 5.079.239 6.443.498 1.363.258 8.044.572 14.844.696 6.801.124 12.567.351 12.814.503.247.153 5.245.251 11.108.218 7.33-.041 12.921.188 17.904.731 6.665.728 7.291.732 7.824.048.495-.635 1.152-.691 4.488-.383 7.189.664 11.632-.544 23.937-6.505 6.357-3.08 6.87-3.434 10.816-7.446 6.363-6.469 6.816-7.896 3.777-11.88-2.419-3.171-5.583-5.312-8.328-5.636-5.711-.673-60.96-3.99-80.826-4.853-12.024-.522-24.348-1.154-27.385-1.404-3.038-.251-9.05-.661-13.36-.913-4.309-.25-8.81-.59-10.001-.753-2.464-.337-2.424-.387-2.867 3.573-.354 3.163-2.526 7.021-4.839 8.594-1.379.938-2.011 1.065-4.386.882-3.063-.236-6.457-1.712-6.84-2.975-.136-.447-.29-2.946-.343-5.552-.052-2.607-.258-4.839-.456-4.962-.352-.218-14.986-.809-35.019-1.415l-9.993-.302.242 1.567c.133.861-.049 2.39-.405 3.397-.614 1.734-.791 1.862-3.366 2.419-2.754.595-6.588.424-8.051-.358-1.155-.618-2.849-3.547-3.16-5.464l-.269-1.649-11.603-.049c-6.381-.027-11.662.011-11.736.084Z",fill:"#14C8EB"}),T.createElement("path",{d:"M220.118 164.552c-1.416 1.416-.008 5.05 2.264 5.842 3.399 1.185 5.468.37 5.468-2.153 0-2.364-2.291-4.241-5.176-4.241-1.102 0-2.252.249-2.556.552Zm4.555.86c2.176 1.55 1.652 4.571-.793 4.571-1.146 0-2.933-1.981-2.933-3.25 0-.898 1.16-2.273 1.917-2.273.26 0 1.073.429 1.809.952Zm-15.348 2.998c-2.979 1.606-.271 4.964 3.809 4.723 2.868-.169 5.32 2.581 7.969 8.937.709 1.702.706 1.722-.225 1.224-.52-.279-1.702-.567-2.625-.642a37.632 37.632 0 0 1-3.431-.475c-1.47-.285-1.932-.17-2.876.718-1.563 1.468-1.425 2.99.44 4.854 1.799 1.799 2.38 1.89 3.914.613.849-.707 1.117-1.402 1.151-2.977.05-2.325.538-2.534 3.264-1.394 1.124.469 1.655 1.034 1.842 1.956.145.713.463 1.932.707 2.709.626 1.993.553 3.217-.233 3.869-.52.431-.707 1.959-.806 6.561l-.128 5.998-4.279 1.078c-3.882.978-4.608 1.345-7.825 3.954-1.949 1.58-3.782 3.191-4.072 3.578a40.945 40.945 0 0 1-1.507 1.822c-.991 1.133-1.06 1.916-.193 2.205.261.087 2.219-1.671 4.351-3.906 4.932-5.172 6.062-5.986 9.409-6.786 4.149-.99 4.369-.947 4.063.81-.144.823-.707 2.842-1.252 4.488-.857 2.588-.991 4.044-.993 10.816-.003 7.392.055 7.904 1.039 9.284 1.448 2.031 4.462 3.114 7.726 2.777 3.431-.354 5.138-1.466 6.672-4.344 1.703-3.199 1.934-4.452 1.886-10.263-.045-5.46-.716-7.418-4.039-11.769-1.241-1.627-1.683-2.704-1.844-4.498-.867-9.639-1.045-10.639-2.041-11.449-.544-.443-1.484-.806-2.089-.806-.965 0-1.099-.211-1.093-1.726.008-1.971 1.062-6.75 1.89-8.567.492-1.08.743-1.191 2.111-.934 2.852.535 4.598-2.579 2.333-4.165-1.554-1.089-2.493-.872-3.833.884-1.233 1.617-3.393 7.783-3.47 9.906-.035.98-.108.917-.494-.427-.249-.867-.593-4.785-.764-8.707-.221-5.066-.478-7.186-.886-7.321-.437-.145-.577 1.013-.58 4.795l-.004 4.986-1.372-2.391c-1.218-2.124-4.999-5.663-6.05-5.663-.217 0-.394-.586-.394-1.301 0-1.379-1.411-3.009-2.992-3.456-.506-.144-1.489.046-2.186.422Zm3.346 1.131c.276.515.369 1.355.207 1.867-.455 1.436-3.15 1.053-3.366-.478-.283-2.003 2.238-3.111 3.159-1.389Zm19.443 7.621c.46.46-.135 1.469-1.324 2.248-1.627 1.067-2.215.425-1.076-1.174.913-1.283 1.797-1.678 2.4-1.074Zm-16.235 6.393c.601.724.305 2.771-.549 3.8-.676.816-2.516.719-2.849-.15-.497-1.296-.299-2.299.659-3.327 1.097-1.177 1.947-1.278 2.739-.323Zm11.051 11.044 2.071.313.103 5.796.103 5.795 2.236 3.257c3.443 5.016 3.928 6.685 3.683 12.659-.189 4.568-.351 5.326-1.711 8.006-.834 1.643-2.008 3.231-2.637 3.568-2.686 1.437-6.559.071-8.074-2.849-.723-1.395-.874-2.811-.933-8.745-.062-6.189.053-7.418.91-9.759 1.15-3.142 1.831-13.434 1.125-16.98-.385-1.929-.351-2.125.31-1.772.409.219 1.675.539 2.814.711Zm5.983 10.339c0 .267.155.506.345.531 1.226.166 4.492.347 10.931.607 8.407.339 12.441.859 17.03 2.195 5.885 1.714 9.435 4.137 9.435 6.442 0 .485.282 1.44.625 2.124.345.684.761 2.267.925 3.519.281 2.145.965 3.223 1.742 2.743.399-.247.081-4.095-.586-7.09-1.054-4.73-6.5-8.094-16.336-10.093-5.298-1.077-24.111-1.84-24.111-.978Zm-70.375 2.927c-3.543 1.241-4.12 4.647-2.533 14.933.248 1.611 2.013 3.585 3.87 4.329 1.702.681 9.003.014 10.137-.927.783-.65.93-1.435 1.047-5.589.184-6.458-.328-9.563-1.835-11.136-1.902-1.986-7.295-2.798-10.686-1.61Zm6.766.313c1.022.004 1.915.405 2.738 1.228l1.222 1.221-1.127.433c-2.016.775-11.023-.419-11.023-1.461 0-.792 4.041-1.915 5.753-1.598.506.094 1.603.174 2.437.177Zm136.099 2.049c-3.668.451-5.489.965-8.972 2.534-5.127 2.309-6.987 3.685-9.657 7.145-1.628 2.11-1.866 2.665-1.392 3.237.315.379.747.69.961.69.213 0 1.862-1.536 3.663-3.412 2.474-2.576 4.124-3.825 6.739-5.1 5.876-2.866 6.506-2.996 14.354-2.974 9.574.027 31.69 1.174 33.426 1.734 5.941 1.914 6.559 2.316 8.849 5.752 1.213 1.82 2.609 4.293 3.101 5.496.94 2.295 1.048 2.393 1.969 1.808 1.267-.804-1.761-7.824-4.712-10.924-1.732-1.819-11.101-4.351-18.643-5.037-1.645-.15-3.923-.36-5.062-.466-1.14-.106-5.385-.311-9.436-.454-4.05-.143-8.089-.336-8.975-.428-.886-.092-3.682.087-6.213.399Zm-140.711 1.446c1.082.339 3.486.675 5.342.746l3.375.129.091 5.915c.116 7.589-.045 7.885-4.539 8.327-3.278.324-5.297.059-4.868-.637.128-.206-.09-.642-.483-.969-1.637-1.358-2.16-3.35-2.391-9.117-.22-5.477-.192-5.712.638-5.369.477.197 1.753.636 2.835.975Zm98.289 2.61c.877 1.075 1.916 2.733 2.309 3.682.636 1.536.894 1.726 2.349 1.726.899 0 1.634-.142 1.634-.315 0-1.308-2.172-4.277-4.063-5.554-3.264-2.204-4.236-2.003-2.229.461Zm160.707 13.759c-6.483 1.463-8.45 2.811-14.339 9.829-2.125 2.531-4.646 5.431-5.605 6.443-1.881 1.988-4.62 6.037-10.867 16.063-8.484 13.615-12.208 16.067-29.752 19.584a60.29 60.29 0 0 1-5.293.761c-1.497.135-4.379.438-6.404.672a183.82 183.82 0 0 1-7.824.688c-3.732.237-6.421.574-11.276 1.414-2.151.373-3.553 1.729-4.888 4.727-2.206 4.957-2.514 7.186-2.375 17.195.128 9.272.135 9.328 1.49 12.076 1.615 3.279 5.7 9.379 8.025 11.987a110.62 110.62 0 0 1 3.492 4.18c1.685 2.134 9.145 8.517 13.082 11.193.91.619 1.929 1.395 2.263 1.726.335.33.819.601 1.076.601.412 0-.358 1.553-4.451 8.975-.558 1.012-1.8 3.29-2.761 5.062-.96 1.772-2.232 3.995-2.826 4.939-.595.944-1.081 1.81-1.081 1.923 0 .114-.756 1.515-1.68 3.116-.925 1.6-2.447 4.256-3.383 5.901a1975.49 1975.49 0 0 1-3.553 6.214c-6.731 11.717-9.334 16.375-9.334 16.706 0 .924-1.219 1.967-1.965 1.681-.735-.282-.728-.392.103-1.559.492-.69 1.295-2.274 1.787-3.52.491-1.246 1.32-2.99 1.842-3.875.522-.885 2.177-4.509 3.677-8.053 1.501-3.544 4.329-9.861 6.285-14.037 1.956-4.177 4.078-8.734 4.715-10.126.637-1.392 2.605-5.61 4.371-9.372 2.909-6.198 3.143-6.908 2.493-7.559-.65-.651-.766-.591-1.229.628-.281.74-1.145 2.691-1.92 4.336-2.944 6.252-4.902 10.443-6.021 12.888-1.034 2.259-2.298 4.968-6.765 14.498-2.289 4.885-3.231 7.073-3.231 7.512 0 .236-.29.67-.645.965-.355.294-.786 1.096-.958 1.782-.172.686-.909 2.49-1.638 4.008a120.056 120.056 0 0 0-2.532 5.754 937.766 937.766 0 0 1-1.727 4.25c-.445 1.075-.389 1.359.383 1.953.497.383 1.509.645 2.248.583 1.446-.122.333 1.703 15.366-25.197 3.461-6.191 5.101-9.098 8.833-15.648a632.7 632.7 0 0 0 3.238-5.753 299.82 299.82 0 0 1 3.159-5.516c1.039-1.768 1.888-3.533 1.888-3.923 0-.389-.673-1.073-1.495-1.52-.823-.447-3.049-2.044-4.948-3.55a804.668 804.668 0 0 0-5.753-4.519c-4.362-3.377-13.17-13.57-14.381-16.642-.15-.38-.813-1.519-1.474-2.531-2.442-3.739-2.418-3.586-2.226-14.083.14-7.635.368-10.549 1.017-12.957.491-1.824 1.085-3.107 1.438-3.107.331 0 .933-.331 1.337-.735.95-.95 4.744-1.951 8.536-2.252 20.583-1.635 29.121-3.136 39.581-6.955 6.114-2.232 8.844-4.946 15.927-15.832.577-.886 1.681-2.543 2.455-3.682 3.048-4.491 4.768-7.214 5.662-8.964.514-1.007 2.512-3.781 4.44-6.166a620.193 620.193 0 0 0 4.779-5.974c4.829-6.203 9.561-8.057 20.587-8.065 5.227-.004 6.195.134 10.586 1.511 6.974 2.187 12.085 4.79 14.958 7.617 1.327 1.306 2.558 2.829 2.733 3.384.398 1.252.996 1.3 1.309.103.325-1.244-1.856-4.549-4.325-6.553-2.81-2.281-5.674-3.623-12.604-5.907-5.575-1.837-6.376-1.98-11.737-2.101-4.475-.1-6.673.079-9.895.805Zm-379.936 3.721c-.002.185-.78.736-1.729 1.225-.949.489-2.406 1.598-3.236 2.463-2.01 2.093-2.294 5.05-1.006 10.474.511 2.152 1.34 6.812 1.842 10.356.503 3.544 1.447 8.514 2.098 11.046a297.701 297.701 0 0 1 2.271 9.665c.598 2.785 1.52 6.306 2.05 7.824 1.115 3.201 2.277 8.3 2.57 11.277.112 1.139.498 2.899.857 3.912.36 1.012.78 2.469.934 3.238.353 1.761 3.942 8.89 5.51 10.947.652.853 1.184 1.789 1.184 2.081 0 .883 3.157 4.09 5.207 5.288 2.504 1.463 4.727 2.081 9.52 2.645 2.152.252 4.534.547 5.294.654.759.107 3.4.224 5.868.26 4.316.062 4.487.103 4.487 1.091 0 .565-.135 1.163-.3 1.329-.29.288-1.953 4.827-3.91 10.668-.508 1.519-1.095 3.176-1.302 3.682-.208.506-.59 1.542-.85 2.301-.905 2.654-3.402 9.673-3.765 10.586a72.791 72.791 0 0 0-.919 2.531c-.304.886-.738 2.025-.965 2.532-.226.506-.811 2.163-1.3 3.682-.489 1.519-1.643 4.832-2.564 7.364-3.235 8.889-8.068 23.807-8.177 25.243-.167 2.18 1.065 1.844 2.272-.62 1.18-2.411 1.394-2.272.35.228-.767 1.836-.618 2.994.385 2.994.548 0 2.203-3.122 4.148-7.824.366-.886 1.303-3.061 2.082-4.833.778-1.772 2.441-5.811 3.695-8.975 1.253-3.164 3.672-9.17 5.373-13.347 1.702-4.177 3.768-9.355 4.592-11.507.825-2.151 2.575-6.461 3.89-9.577 1.315-3.115 2.47-6.015 2.566-6.443.272-1.205 4.337-10.776 4.83-11.371.278-.335 2.581-.566 6.321-.634 3.235-.058 7.122-.179 8.638-.269 1.516-.089 5.655-.313 9.199-.496a889.42 889.42 0 0 0 8.054-.442c.886-.059 4.511-.259 8.055-.443 3.544-.184 6.598-.429 6.787-.544.572-.349 1.126 1.438 4.224 13.65 1.637 6.455 3.51 13.704 4.161 16.109a5226.94 5226.94 0 0 1 1.371 5.063c.102.38.524 2.037.939 3.682.796 3.166 1.505 5.842 2.744 10.356a1375.242 1375.242 0 0 1 4.461 16.799c2.625 10.132 3.555 13.597 4.507 16.799.527 1.772.86 3.481.739 3.797-.469 1.236-1.174.46-1.882-2.071-.407-1.456-1.527-5.132-2.488-8.169-8.761-27.679-10.16-32.053-11.264-35.21a320.568 320.568 0 0 1-2.495-7.594c-.797-2.531-2.698-8.427-4.225-13.101a1403.312 1403.312 0 0 1-4.398-13.693c-1.336-4.281-1.779-5.193-2.516-5.193-1.173 0-1.13.736.257 4.421.634 1.684 1.239 3.501 1.345 4.038.105.537.824 2.84 1.598 5.118.773 2.278 2.561 7.87 3.973 12.427 1.412 4.556 3.061 9.734 3.664 11.506.603 1.772 2.156 6.639 3.451 10.816 1.296 4.177 2.951 9.355 3.679 11.506.728 2.152 2.812 8.469 4.631 14.038 3.903 11.947 4.224 12.657 5.707 12.657 1.704 0 2.557-.477 2.557-1.429 0-.956-3.196-14.133-5.792-23.885-.91-3.417-1.921-7.352-2.247-8.745-.325-1.392-1.563-6.259-2.751-10.816-1.189-4.556-2.324-9.009-2.523-9.895-.2-.886-1.234-4.925-2.298-8.975l-3.568-13.577c-.899-3.418-1.892-7.198-2.206-8.4l-.572-2.186h7.229l.01 2.646c.043 11.533.632 17.859 1.701 18.27 1.25.48 1.611-.253 1.317-2.677-.157-1.298-.388-5.467-.513-9.264-.126-3.797-.345-7.473-.487-8.17-.196-.952-.081-1.265.462-1.265.396 0 2.639-.621 4.984-1.381 3.756-1.216 4.412-1.593 5.522-3.172 1.813-2.577 2.357-5.795 2.073-12.243-.436-9.906-3.131-15.038-9.479-18.047l-2.463-1.168.286-2.821c.571-5.617.504-28.314-.084-28.903-.304-.303-.711-.393-.905-.201-.527.525-.891 9.772-.85 21.586l.037 10.491-1.15-.288c-.632-.159-1.175-.323-1.206-.366-.03-.043-.407-3.495-.836-7.672a3123.368 3123.368 0 0 0-1.671-15.773c-.489-4.498-.89-8.381-.89-8.629 0-.248-.238-.451-.528-.451-.383 0-.435 1.105-.186 4.027.188 2.215.425 5.166.526 6.558.101 1.393.395 4.499.655 6.904.755 7.015 1.378 14.418 1.224 14.571-.077.078-1.81.013-3.849-.145l-3.708-.285-.05-2.353c-.071-3.307-.422-4.655-2.185-8.386-2.173-4.602-6.083-7.894-12.037-10.136-2.362-.889-3.805-1.091-8.054-1.123-2.847-.022-6.471.107-8.053.286-2.284.259-2.888.195-2.932-.309-.031-.349-.024-2.291.014-4.317.039-2.025-.056-4.976-.211-6.558-.252-2.582-.386-2.877-1.304-2.877-1.011 0-1.021.067-.849 5.638.095 3.102.348 6.311.562 7.134l.389 1.496h-5.91l-.07-3.797c-.038-2.089-.118-4.004-.177-4.257-.059-.253-.131-1.873-.16-3.599-.05-2.979-.106-3.132-1.088-2.992-.984.14-1.029.32-.894 3.599.078 1.899.336 5.093.572 7.099.237 2.005.38 3.69.319 3.743-.062.054-2.62-.034-5.682-.194l-5.57-.292-2.485-2.097c-3.82-3.223-9.364-6.73-15.948-10.088-2.09-1.065-3.674-2.137-3.522-2.383.384-.622-12.006-12.679-14.16-13.778-2.565-1.308-6.83-2.298-9.287-2.155-1.175.068-2.137.275-2.139.46Zm7.064 2.04c4.047 2.064 15.642 11.658 14.94 12.361-.29.289-8.763-1.798-13.35-3.289-4.192-1.362-5.904-2.89-6.984-6.231-.901-2.793-.95-3.924-.177-4.182.806-.27 3.848.461 5.571 1.341Zm-7.776 2.328c.28 1.882.683 2.863 2.103 5.116 1.207 1.916 5.368 3.603 13.334 5.407 1.899.43 4.902 1.295 6.674 1.922 3.51 1.242 14.167 6.612 15.649 7.885.506.435 1.852 1.382 2.991 2.106 1.14.723 3.084 2.162 4.322 3.197 3.092 2.585 14.067 13.388 16.159 15.907.941 1.133 2.983 2.979 4.538 4.103 1.554 1.124 2.938 2.209 3.074 2.411.675 1.007 6.103 1.399 21.021 1.517 9.486.075 16.95.334 18.313.635 1.266.279 3.234.687 4.373.905 2.507.48 3.759 1.113 6.359 3.214 4.273 3.454 5.456 6.81 5.883 16.683l.289 6.673-1.778 1.671c-1.801 1.693-5.362 3.27-8.696 3.852-1.005.176-4.416.386-7.58.468-3.165.081-7.618.261-9.896.399a978.55 978.55 0 0 1-10.125.539c-3.291.157-7.123.352-8.515.432-1.392.079-5.12.288-8.285.464-3.164.175-6.478.391-7.364.48-5.254.528-16.43.896-26.234.865-9.86-.032-11.495-.141-13.017-.865-1.77-.843-5.854-4.399-5.854-5.098 0-.211-1.119-2.262-2.487-4.557-1.368-2.295-2.742-4.984-3.053-5.976-.311-.992-.934-2.442-1.385-3.222-.974-1.687-2.566-6.763-2.97-9.474-.159-1.064-.464-2.396-.679-2.96-.215-.565-.513-1.803-.664-2.751-.15-.948-.454-2.071-.673-2.494-.219-.422-.965-3.15-1.657-6.061-.692-2.912-1.873-7.779-2.624-10.816-.75-3.038-1.858-8.423-2.46-11.967-.602-3.544-1.316-7.168-1.586-8.054-.27-.886-.796-3.333-1.167-5.436-.58-3.281-.584-4.035-.036-5.293.61-1.4 2.965-4.22 3.269-3.914.08.079.275 1.019.434 2.087Zm141.528 6.284c-.119.119-1.459.349-2.976.51-3.14.333-7.363 2.279-8.597 3.961-.855 1.165-1.982 8.604-2.436 16.068-.203 3.358.193 9.622.917 14.498.113.76.411 8.63.663 17.49.252 8.86.66 16.937.906 17.95.585 2.401 3.83 9.142 5.574 11.579.753 1.053 2.248 2.867 3.323 4.032 1.72 1.865 2.395 2.234 5.636 3.086 2.025.533 4.149.996 4.718 1.031.569.035 1.035.113 1.035.175 0 .061-2.47 9.071-5.49 20.021-5.579 20.226-9.726 35.504-9.888 36.428-.05.28-.33 1.235-.624 2.121-.293.886-.629 2.129-.747 2.762-.117.632-.977 4.05-1.911 7.594-2.169 8.233-2.274 9.05-1.381 10.776.649 1.255.966 1.42 2.728 1.42h1.993l2.078-5.408c1.143-2.974 2.957-8.1 4.032-11.391 1.075-3.291 2.218-6.604 2.541-7.364.588-1.382 10.497-30.591 15.888-46.831l2.864-8.629 1.898.014c1.044.008 3.348.201 5.12.431 1.772.229 7.571.754 12.887 1.165 5.316.411 10.567.89 11.669 1.065l2.003.316.143 3.912c.174 4.727.613 17.491.926 26.925.354 10.667.669 19.677.917 26.235.125 3.29.328 8.986.451 12.657.591 17.59 1.084 23.59 2.014 24.52.236.236 1.246.291 2.246.122l1.816-.307.295-5.609c1.234-23.479 1.839-36.705 2.384-52.095.134-3.797.333-8.353.443-10.125.11-1.772.329-7.157.487-11.967.158-4.81.359-9.211.448-9.78.106-.68-.158-1.207-.768-1.533-1.474-.789-1.288-2.246-1.974 15.455-.138 3.544-.36 9.654-.495 13.578-.136 3.924-.336 9.205-.447 11.736-.11 2.532-.329 9.263-.486 14.959-.158 5.695-.357 11.598-.443 13.117-.086 1.519-.173 6.865-.192 11.882l-.035 9.12-1.185-.145-1.185-.146-.163-8.054c-.216-10.645-.666-25.502-.92-30.377-.112-2.152-.32-8.365-.462-13.808-.141-5.442-.349-11.034-.461-12.426-.113-1.393-.336-7.917-.496-14.498-.238-9.855-.416-12.109-1.002-12.772-.674-.762-.426-.807 4.537-.829 6.573-.029 8.473-.262 13.073-1.601 4.435-1.29 11.912-3.609 14.827-4.599 1.165-.396 2.264-.555 2.442-.355.178.201 4.693 13.309 10.033 29.131 5.34 15.821 10.23 30.155 10.866 31.854 1.855 4.959.561 4.027-1.583-1.139-2.081-5.016-3.376-7.957-5.621-12.766-.768-1.645-2.485-5.477-3.815-8.514a494.486 494.486 0 0 0-4.253-9.435 448.306 448.306 0 0 1-4.14-9.206c-2.15-4.938-3.231-7.314-6.642-14.613-1.324-2.83-1.841-3.247-3.067-2.47-.709.449-.166 1.812 6.16 15.473.587 1.265 2.318 5.143 3.849 8.616 1.53 3.474 2.964 6.684 3.187 7.134.454.918 1.324 2.834 2.987 6.572.619 1.392 1.75 3.883 2.512 5.536.763 1.653 1.95 4.345 2.639 5.984.688 1.638 2.483 5.536 3.988 8.662 2.174 4.516 2.897 5.634 3.515 5.438 2.967-.94 2.678-1.401 3.025 4.836.174 3.121.38 6.192.458 6.824.078.633.174 2.121.214 3.306.059 1.759.252 2.212 1.05 2.466 1.455.462 1.798-.505 1.562-4.391-.115-1.898-.328-7.076-.472-11.506-.145-4.43-.35-9.504-.455-11.276a767.566 767.566 0 0 1-.449-8.975c-.143-3.165-.361-7.825-.487-10.356-.126-2.531-.433-8.952-.682-14.268a2796.74 2796.74 0 0 0-.678-13.807c-.123-2.279-.335-6.628-.471-9.666-.355-7.894-.665-14.526-.916-19.561-.119-2.404-.326-7.168-.46-10.585a734.676 734.676 0 0 0-.466-10.126c-.123-2.152-.334-6.294-.47-9.205-.136-2.911-.447-6.944-.692-8.963a257.663 257.663 0 0 1-.444-3.797c0-.07-.524-.127-1.163-.127h-1.163l.288 6.05c.255 5.367.207 6.019-.43 5.775-.91-.35-6.698 1.602-9.335 3.148-3.611 2.116-2.053 2.864 1.907.916 1.266-.623 2.638-1.139 3.049-1.147.411-.008 1.706-.549 2.876-1.204 1.171-.655 2.139-1.12 2.15-1.035.011.084.139 2.38.284 5.102.303 5.661.608 5.34-4.225 4.447-4.666-.863-8.303-2.967-12.65-7.318-4.499-4.504-3.973-3.839-12.3-15.57-2.319-3.268-8.704-10.065-10.711-11.404a198.794 198.794 0 0 1-3.661-2.524c-2.182-1.544-10.832-4.544-13.142-4.558-.76-.005-2.107-.23-2.991-.5-.884-.27-4.922-.786-8.972-1.146-4.05-.36-8.814-.873-10.586-1.139-9.439-1.42-29.738-3.462-30.165-3.035Zm265.692 1.284c.699 1.821-3.769 17.342-6.368 22.12-.375.69-.672 1.364-.66 1.498.044.505-3.35 7.039-5.195 9.999-1.057 1.696-2.807 4.112-3.888 5.369l-1.967 2.284 1.459.32c1.328.292 1.64.12 3.477-1.917 3.779-4.19 10.251-16.359 12.342-23.206a192.2 192.2 0 0 1 1.656-5.101c.49-1.428 1-3.5 1.133-4.603.134-1.103.338-2.457.455-3.009.298-1.415-.486-3.217-1.679-3.855-.829-.444-.967-.425-.765.101Zm-250.485 2.005c8.383.836 10.447 1.088 11.574 1.414 1.123.325 11.573 1.551 15.811 1.854 2.025.145 4.806.544 6.179.887 1.373.343 2.659.523 2.857.401.438-.271 6.965 1.362 9.232 2.309 2.341.978 10.371 7.591 12.717 10.473 1.094 1.344 4.1 5.26 6.679 8.702 4.029 5.375 5.922 7.597 11.023 12.935 1.42 1.485 5.621 3.96 8.354 4.921 1.622.57 4.01.957 6.239 1.011l3.611.087.256 2.582c.244 2.461.423 5.953.967 18.921.133 3.165.343 7.825.465 10.356.341 7.026.645 13.655.929 20.251.142 3.291.347 7.641.455 9.666.108 2.025.31 6.995.447 11.046.139 4.05.345 8.399.46 9.665.114 1.266.322 6.029.461 10.586l.253 8.284-1.789-5.753c-4.706-15.133-18.616-55.981-19.223-56.45-.562-.434-.244-.672 1.756-1.314 3.213-1.031 7.968-3.312 8.671-4.158.307-.37.824-.672 1.149-.672.897 0 5.739-4.099 5.739-4.858 0-.894-.111-.865-2.393.637-5.933 3.903-11.829 6.747-18.548 8.947-8.698 2.846-18.782 5.779-20.942 6.09-3.363.483-14.698.589-18.18.169l-5.062-.613c-1.862-.227-27.244-2.837-31.068-3.195-6.747-.632-8.289-.852-10.495-1.5-1.343-.393-3.036-1.216-3.762-1.827-3.472-2.921-7.976-10.881-9.732-17.198-.387-1.389-.615-6.536-.694-15.648-.065-7.468-.346-15.235-.624-17.26-.904-6.575-1.042-16.146-.326-22.483.738-6.529 1.247-7.67 4.081-9.141 1.928-1 9.119-1.689 12.578-1.205 1.265.178 5.718.664 9.895 1.081Zm258.443 7.845c-2.684 9.234-2.756 10.053-2.795 31.728-.038 22.003-.287 24.839-2.725 31.039-.64 1.63-1.165 3.267-1.165 3.637 0 .962-3.887 7.588-6.558 11.179-2.939 3.951-3.307 4.124-15.764 7.442-8.127 2.164-9.976 2.423-20.711 2.9-3.544.157-6.705.497-7.024.755-.805.652-15.133 1.606-22.742 1.515l-6.293-.076-.922 3.482c-.506 1.915-1.851 6.9-2.987 11.077-1.137 4.177-3.443 12.668-5.125 18.87-1.682 6.202-3.557 12.933-4.165 14.958-.609 2.025-1.958 6.893-2.999 10.816a2019.844 2019.844 0 0 1-2.274 8.515c-3.278 11.889-3.707 14.15-2.794 14.713.632.392 1.997-4.248 10.831-36.805 5.384-19.846 9.878-36.354 10.927-40.144l1.048-3.783 14.268-.209c7.847-.115 15.368-.422 16.713-.681 1.345-.259 3.727-.495 5.293-.522 3.304-.059 6.52-.526 14.814-2.152l8.217-1.609c1.228-.24 2.367-.303 2.531-.14.164.163.642 1.781 1.062 3.597.421 1.814 3.174 12.93 6.12 24.701 2.945 11.771 6.402 25.596 7.681 30.723 2.78 11.143 3.621 13.636 4.672 13.838.558.108.782-.156.777-.918-.008-1.014-2.136-9.846-4.806-19.94a2654.17 2654.17 0 0 1-3.983-15.418 5810.775 5810.775 0 0 0-4.559-17.72 1944.06 1944.06 0 0 1-3.236-12.657c-.794-3.164-1.739-5.985-2.099-6.269-.529-.417-.235-.71 1.539-1.53 5.14-2.379 6.432-3.485 9.947-8.513 7.179-10.269 10.47-22.793 9.744-37.077-.433-8.503-.455-21.314-.045-25.774.198-2.152.752-5.569 1.23-7.594 1.001-4.231 1.12-7.168.325-7.963-.926-.926-1.194-.652-1.968 2.009Zm-100.327 11.418c.096 3.559-.088 7.054-.493 9.32l-.648 3.626 1.189 1.059c.655.582 1.282.967 1.395.854.464-.465 1.134-6.798 1.127-10.668-.009-5.683-1.016-9.886-2.368-9.886-.196 0-.287 2.563-.202 5.695Zm-249.937-.549c2.785.037 7.946.028 11.469-.02 5.809-.079 6.741.025 10.012 1.114 3.624 1.207 7.74 3.849 10.082 6.47 1.641 1.837 3.492 6.352 3.847 9.383l.296 2.531-13.48-.017c-9.265-.011-14.056-.192-15.322-.579-2.64-.806-3.169-1.27-14.01-12.291-2.24-2.278-4.635-4.82-5.322-5.648l-1.248-1.506 4.307.248c2.369.137 6.585.279 9.369.315Zm192.937-.198c-.107.19-.145.863-.084 1.496.061.633.242 4.671.404 8.975.16 4.303.388 9.895.505 12.427.197 4.271.433 9.663.925 21.171.109 2.532.318 7.917.465 11.967.148 4.05.353 9.435.457 11.966.104 2.532.306 8.331.451 12.888.144 4.556.355 10.252.469 12.657.115 2.404.32 8.1.458 12.656.137 4.557.349 10.77.471 13.808.123 3.038.33 8.216.461 11.506.291 7.285.619 13.252.952 17.329.176 2.151.083 3.164-.313 3.409-.856.528-4.619.266-5.416-.378-.581-.47-.635-.45-.314.122 1.327 2.357 3.096 2.865 6.205 1.781l1.491-.52-.279-11.561c-.154-6.36-.368-13.53-.476-15.935-.108-2.405-.327-8.1-.486-12.657-.16-4.556-.363-9.838-.451-11.736-.089-1.899-.289-7.077-.444-11.506-.155-4.43-.373-10.023-.484-12.427-.112-2.405-.319-7.894-.461-12.197-.141-4.303-.347-10.103-.457-12.887-.11-2.785-.315-8.687-.456-13.117-.141-4.43-.348-10.333-.459-13.118a1851.69 1851.69 0 0 1-.503-15.418c-.164-5.696-.39-10.511-.502-10.701-.112-.19-.593-.345-1.069-.345s-.954.155-1.06.345Zm27.408 4.212-3.338 4.072-4.026-.229c-3.401-.195-4.742-.037-8.629 1.01-4.207 1.134-8.492 3.192-7.893 3.791.135.135 1.966-.284 4.07-.929 6.865-2.109 9.577-2.65 12.58-2.512l2.944.135-1.376 2.045c-2.215 3.292-3.562 10.033-3.971 19.87-.198 4.775-.179 4.893.844 5.16.576.151 1.103.218 1.171.15.068-.067.216-2.493.33-5.389.295-7.512 1.084-14.068 1.878-15.602.375-.726 1.98-3.013 3.567-5.081 5.309-6.919 6.817-9.321 6.267-9.984-.276-.332-.632-.598-.79-.591-.16.006-1.792 1.845-3.628 4.084Zm95.562 26.491c-.315.315-5.271 1.561-7.218 1.815-1.708.223-8.855.781-12.286.96-4.413.231-10.847 1.319-14.012 2.372-5.61 1.866-12.935 5.861-15.725 8.576-1.364 1.329-3.045 2.778-3.735 3.219-1.533.981-4.672 5.717-5.693 8.586-1.07 3.008-4.418 9.921-6.356 13.125-1.396 2.308-2.208 5.32-1.434 5.32.121 0 1.673-1.43 3.45-3.178 3.014-2.967 5.074-6.3 5.074-8.208 0-.92 4.244-9.331 5.962-11.817 2.842-4.112 8.171-7.948 15.21-10.948 7.189-3.064 9.812-3.568 24.49-4.709 6.409-.498 8.94-.896 11.846-1.864 3.943-1.314 4.328-1.583 3.888-2.728-.258-.674-2.909-1.073-3.461-.521Zm-104.037 8.304c-.293.293-8.703 1.542-11.354 1.686-1.761.096-1.899.179-1.178.707.467.341 2.066.598 3.722.598 1.985 0 2.922.182 2.963.576l.174 1.725c.064.633.257 4.983.431 9.666.174 4.683.394 9.757.489 11.276.094 1.519.292 5.765.439 9.435.521 13.019 1.053 24.168 1.407 29.456.11 1.646.326 4.959.482 7.362.163 2.52.508 4.515.817 4.711.825.525 3.434.415 3.789-.159.393-.637.506-5.555.921-40.145l.33-27.541-1.102.156-1.102.156-.064 32.799c-.064 32.607-.164 34.793-1.544 33.939-.194-.119-.393-3.793-.441-8.164-.048-4.371-.155-8.878-.239-10.017-.083-1.14-.281-5.696-.44-10.126-.303-8.419-.577-14.735-.96-22.092-.126-2.405-.348-7.79-.494-11.967-.146-4.177-.323-8.347-.393-9.267l-.127-1.674 3.335-.537c1.834-.296 3.462-.666 3.617-.821.49-.49-1.197-1.969-2.245-1.969-.551 0-1.106.104-1.233.231Zm45.872 3.503c-11.696 2.441-16.481 3.149-21.348 3.161-4.301.01-7.418.737-7.418 1.73 0 .541 1.007.618 5.869.448 5.849-.205 10.487-.823 19.215-2.562 5.348-1.065 8.27-1.556 9.927-1.67 1.509-.102 2.27-.577 2.27-1.416 0-.911-3.231-.793-8.515.309ZM135.17 323.165c-.727.145-.821.469-.609 2.083.139 1.051.367 2.418.506 3.036.14.619.673 3.208 1.185 5.753.512 2.546 1.131 5.457 1.375 6.47s.961 4.549 1.592 7.858c.632 3.309 1.255 6.312 1.384 6.674.128.361.335 1.278.46 2.037.364 2.224 2.157 10.245 3.289 14.722.752 2.971.9 4.226.526 4.457-.801.495-1.081.124-1.702-2.253a522.549 522.549 0 0 0-1.939-7.03 877.496 877.496 0 0 0-3.118-10.816c-2.25-7.667-9.672-31.67-9.847-31.845-.125-.125-.626-.101-1.113.054-.833.265-.848.423-.261 2.688.343 1.325.835 3.051 1.094 3.837.259.785.547 1.826.641 2.312.179.929 2.239 8.093 3.054 10.622.262.811.559 1.908.661 2.436.102.529.404 1.625.67 2.436.268.812 1.313 4.376 2.322 7.92 1.01 3.544 2.127 7.375 2.484 8.515l2.345 7.522 1.698 5.451 1.618-.303c3.382-.634 3.799-.96 3.383-2.637-.207-.835-.733-3.59-1.169-6.121-.435-2.532-1.172-6.26-1.636-8.285a293.625 293.625 0 0 1-1.61-7.594 260.83 260.83 0 0 0-1.131-5.523c-.202-.886-.585-2.646-.852-3.912a1430.05 1430.05 0 0 0-1.436-6.674 484.274 484.274 0 0 1-2.106-10.125c-.693-3.491-.901-3.935-1.758-3.765Zm-40.333 1.618c0 .208-3.093 7.694-5.736 13.883-1.19 2.785-2.744 6.616-3.456 8.515-.711 1.898-2.236 5.626-3.39 8.284a351.416 351.416 0 0 0-3.98 9.647c-2.8 7.15-7.986 19.348-8.154 19.179-.081-.08.148-.956.508-1.944 2.825-7.755 4.515-12.454 4.618-12.844.066-.253.243-.771.394-1.151.465-1.178 3.134-8.936 3.324-9.665.099-.38.692-2.14 1.318-3.912 4.822-13.658 6.351-18.041 6.502-18.64.095-.38.983-2.956 1.973-5.724 1.224-3.423 2.08-5.142 2.674-5.375.887-.348 3.405-.536 3.405-.253Zm9.67 4.103c.002 2.088.199 7.214.437 11.391.237 4.177.555 11.529.705 16.339.15 4.81.359 10.298.464 12.197.105 1.898.321 7.697.478 12.887.158 5.189.425 10.979.595 12.867.343 3.823.557 4.02 4.45 4.115l1.842.045.08-4.716c.043-2.594.199-12.277.345-21.516.147-9.24.377-23.468.513-31.617.241-14.562.229-14.828-.692-15.32-.515-.276-.959-.339-.986-.14-.292 2.145-.99 45.104-.998 61.46-.006 10.403-.048 10.931-.875 10.931-.478 0-.951-.259-1.052-.576-.1-.316-.407-5.339-.682-11.161-.613-12.978-.83-17.608-1.397-29.686-.243-5.19-.553-12.749-.689-16.799-.417-12.44-.655-14.498-1.67-14.498-.786 0-.872.374-.868 3.797Zm-33.414-2.119a89.746 89.746 0 0 1-.974 2.694c-.382 1.013-1.07 2.98-1.53 4.372-.459 1.393-2.002 5.846-3.43 9.896-4.114 11.677-6.025 17.237-9.714 28.266-3.485 10.42-3.582 11.055-1.688 11.079.525.006 9.323-17.369 9.323-18.411 0-.249.207-.453.46-.453s.46-.198.46-.44 1.573-3.712 3.494-7.71c12.716-26.457 13.287-27.75 12.261-27.75-.25 0-.712.311-1.027.691-.315.38-4.794 9.127-9.952 19.438-5.158 10.311-9.378 18.609-9.378 18.44 0-.169.228-.891.506-1.603.454-1.162 2.318-6.381 6.46-18.095a896.684 896.684 0 0 0 2.717-7.825c.732-2.151 1.87-5.362 2.53-7.134 1.74-4.684 2.037-5.753 1.6-5.753-.215 0-.716-.125-1.115-.278-.461-.176-.825.033-1.003.576Zm129.948 6.886c1.075.13 1.956.419 1.956.642 0 .429-2.102 6.486-2.795 8.053-1.016 2.299-21.089 62.584-22.336 67.082-.705 2.539-1.034 3.107-1.801 3.107-1.389 0-3.128-1.343-2.588-1.998.556-.675 4.291-14.289 18.075-65.89 1.014-3.797 2.153-7.985 2.531-9.307l.687-2.403 2.157.239c1.187.131 3.038.345 4.114.475Zm10.652 6.953c-.026 2.73-.126 6.103-.222 7.495-.096 1.392-.229 11.065-.297 21.495-.12 18.499-.1 18.981.798 19.662 1.014.768 3.327.937 4.31.314.357-.226.7-1.436.796-2.801.093-1.322.467-3.884.832-5.694.365-1.809 1.948-11.972 3.518-22.584 2.759-18.649 2.826-19.317 1.998-19.922-.472-.345-.906-.465-.965-.266-.18.607-5.571 37.01-5.882 39.713-.841 7.325-1.732 10.585-2.892 10.585-.184.001-.266-11.685-.183-25.968.152-25.907.15-25.97-.805-26.481-.941-.503-.958-.427-1.006 4.452Zm200.469 10.142c.168 3.227.381 6.179.474 6.558.094.38.296 3.694.449 7.364.154 3.671.37 8.02.481 9.666l.201 2.991-1.345-4.602c-.741-2.532-2.639-9.729-4.219-15.994-2.869-11.378-2.874-11.391-4.122-11.391h-1.25l1.301 4.947c3.785 14.399 9.795 38.19 9.824 38.892.025.589.423.805 1.483.805h1.448l-.126-5.105c-.07-2.808-.246-6.278-.392-7.71-.348-3.406-.554-5.842-1.672-19.818-.515-6.429-1.045-11.866-1.178-12.081-.132-.215-.56-.391-.951-.391-.618 0-.671.756-.406 5.869Zm-30.703-3.727c-.123.214-2.336 6.707-4.917 14.428-2.582 7.72-4.81 14.348-4.951 14.728-2.807 7.527-16.251 47.621-16.251 48.464 0 .368.298.917.662 1.219 1.127.936 1.288.511 10.419-27.591a9469.999 9469.999 0 0 1 11.293-34.505c4.444-13.465 5.14-15.961 4.603-16.499-.348-.348-.734-.458-.858-.244Zm46.601 3.181c0 .143.394 1.231.875 2.417a1840.646 1840.646 0 0 1 6.71 16.884c6.249 15.961 8.105 19.673 9.257 18.521.219-.219-1.195-4.972-2.087-7.015a81.891 81.891 0 0 1-1.172-2.991c-.424-1.139-1.06-2.693-1.413-3.452-.782-1.68-6.075-14.503-8.406-20.365-1.433-3.604-1.851-4.256-2.728-4.257-.569-.001-1.036.115-1.036.258ZM67.278 392.596c-.542.933-.673.634-.229-.523.157-.411.384-.651.502-.532.119.118-.004.593-.273 1.055Z",fill:"currentColor"}),T.createElement("path",{d:"M68.659 236.623c-.392.634 1.335 2.549 3.032 3.364 5.129 2.461 9.96 3.95 19.257 5.934 17.174 3.667 22.188 4.348 35.209 4.779 6.875.228 11.02.334 37.166.944 10.209.238 10.719.162 9.658-1.44-.368-.556-9.91-.906-37.159-1.362-15.334-.257-19.661-.5-28.075-1.581-3.671-.471-11.901-1.988-14.958-2.757a113.98 113.98 0 0 0-3.682-.839l-2.071-.434 2.543-.055c1.4-.031 4.195.144 6.213.387 2.019.243 6.57.662 10.114.932 3.544.268 8.1.694 10.126.945 7.297.905 21.775 1.734 28.765 1.649 3.924-.049 11.069.133 15.879.402 12.128.681 13.769.607 13.955-.631.08-.538.08-.998 0-1.023-.081-.024-3.254-.127-7.051-.228-3.797-.102-7.164-.283-7.481-.402-.317-.12-5.184-.231-10.816-.247-5.631-.016-12.931-.221-16.222-.456-3.291-.235-9.297-.65-13.347-.922-4.051-.273-8.4-.688-9.666-.921-1.265-.234-5.408-.543-9.205-.687-3.797-.143-9.182-.555-11.966-.914-2.785-.36-6.41-.687-8.055-.727-3.905-.095-6.8-.941-9.223-2.696-2.08-1.506-2.538-1.665-2.94-1.014Zm186.484 17.914c-1.438.092-2.186.349-2.186.75 0 .454 1.382.69 5.408.923 2.974.173 6.65.395 8.169.495 1.519.1 5.972.297 9.896.437 19.412.696 31.286 1.19 33.368 1.39 1.266.121 6.133.335 10.816.475 4.683.141 12.036.466 16.339.723 4.303.256 9.171.354 10.816.216l2.992-.25-2.992.704c-3.188.749-9.451.879-21.402.442a24727.77 24727.77 0 0 1-43.724-1.641c-14.681-.565-23.534-.467-23.367.258.134.589 11.67 1.414 24.978 1.786 5.696.159 12.53.39 15.188.511 2.658.121 8.561.329 13.118.462 12.828.374 21.818.71 24.947.931 5.239.371 15.995-1.416 17.856-2.965.506-.422 1.49-1.051 2.186-1.399.697-.347 1.266-.935 1.266-1.305 0-.542-.334-.594-1.726-.267-2.477.582-27.318.429-37.626-.232-4.809-.308-11.644-.642-15.188-.742-5.815-.163-9.687-.341-20.479-.938-3.058-.17-17.062-.66-23.935-.839a63.932 63.932 0 0 0-4.718.075Z",fill:"#1E1919"})))};const ho=()=>{const e=So();return T.useMemo((()=>(null==e?void 0:e.isLoading)?{isLoading:!0}:(null==e?void 0:e.error)?{isLoading:!1,isError:!0}:{output:e.data.apiData,isLoading:!1,isError:!1}),[e])},So=()=>o.sharingAccountInfoPackage.useQuery({}),vo=e=>"personal"!==e.role&&!!e.is_team_member,Ao=e=>vo(e)&&!!e.is_team_admin,bo=(e,t)=>vo(e)&&e.team_id===o.getOwnerTeamId(t),yo=(e,t)=>(e=>vo(e)&&!!e.is_tmr_member)(e)&&bo(e,t)&&o.getIsTeamSharedFolder(t),Mo=(e,t)=>{var a;return!!(null!==(a=e.permissions)&&void 0!==a?a:[]).find((e=>e.action[".tag"]===t[".tag"]&&e.allow))},Io=({store:e})=>{const t=n.useIntl(),a=i.useStore(e.$showSecurityBanner),r=i.useStore(e.$securityBannerType),s=ho(),l=s.isLoading||s.isError?null:s.output,{openLinkSettings:d,objectIdentifier:c}=i.useStore(e.$props),_=zn(c),u=!_.isLoading&&!_.isError?_.output:void 0,m=o.useSharingObjectMetadata(c);if(!(!m.isLoading&&!m.isError)||!l||!u)return null;const g=m.output,p=null!==o.getEditLinkMetadata(u),E=null!==o.getViewLinkMetadata(u),f=()=>{e.$showSecurityBanner.set(!1)};if(!(o.getCanInvite(g,{".tag":"editor"})||o.getCanInvite(g,{".tag":"viewer"})))return T.createElement(To,{store:e});if(p&&a){let e;switch(r){case eo.RemoveAccess:e=Cr(t);break;case eo.DowngradeAccess:default:e=(e=>e.formatMessage({id:"Sy/4UA",defaultMessage:"People who can view could still edit via link."}))(t)}return T.createElement(Co,{header:e,transparentButtonLabel:Rr(t),onClickOutlineButton:f,openLinkSettings:d})}return E&&a&&r===eo.RemoveAccess?T.createElement(Co,{header:Cr(t),transparentButtonLabel:Rr(t),onClickOutlineButton:f,openLinkSettings:d}):null};Io.displayName="ManageAccessDowngradeBanner";const To=({store:e})=>{const t=n.useIntl(),a=Jt(),r=ho(),s=r.isLoading||r.isError?null:r.output,l=i.useStore(e.$objectIdentifier),d=o.useSharingObjectMetadata(l),c=!d.isLoading&&!d.isError,_=o.useObjectMembers(l,!1),u=_.isFirstPageLoaded&&!_.isFirstPageOnly;if(!c||!s||!u)return null;const m=d.output,g=vo(s)&&s.team_id===o.getOwnerTeamId(m),p=o.getOwnerTeamName(m),E=Ao(s),f=o.getIsTeamSharedFolder(m),h=o.getIsFolder(m),S=()=>_.allMembers.groups.some((e=>"team"===(e.group.group_type||{})[".tag"]&&Mo(e,{".tag":"make_editor"})&&Mo(e,{".tag":"make_viewer"})))&&null!=p?((e,t)=>e.formatMessage({id:"ifarDl",defaultMessage:"This folder is automatically shared with all members of {team_name}."},{team_name:t}))(t,p):g?E?((e,t)=>e.formatMessage({id:"9MdxEb",defaultMessage:"You can manage access in the admin console. <adminLink>Go to admin console</adminLink>"},{adminLink:e=>T.default.createElement(o.Button,{variant:"transparent",size:"small",onClick:()=>t("/team/admin/content/home")},e)}))(t,a):((e,t)=>e.formatMessage({id:"MSVH3B",defaultMessage:"Only admins and group managers can change team folder membership. <findAdminLink>Find admin</findAdminLink>"},{findAdminLink:e=>T.default.createElement(o.Button,{variant:"transparent",size:"small",onClick:()=>t("/team?_tk=left_nav_team")},e)}))(t,a):null!=p?((e,t)=>e.formatMessage({id:"ToMYBy",defaultMessage:"This folder can only be managed by the {ownerTeamName} team."},{ownerTeamName:t}))(t,p):(e=>e.formatMessage({id:"ReqZ5Y",defaultMessage:"This folder can only be managed by the owner team."}))(t),v=()=>h?(e=>e.formatMessage({id:"qQ/mzN",defaultMessage:"You don’t have permission to manage membership of this folder."}))(t):(e=>e.formatMessage({id:"+xrZUw",defaultMessage:"You don’t have permission to manage membership of this file."}))(t);return T.createElement(o.Banner,null,f?S():v())};To.displayName="NoPermissionBanner";const Co=({header:e,onClickOutlineButton:t,openLinkSettings:a,transparentButtonLabel:r})=>{const i=n.useIntl();return T.createElement(o.Banner,{style:{padding:"12px"}},T.createElement(o.Box,{style:{display:"flex",flexDirection:"column",marginBottom:"8px"}},T.createElement(o.Text,null,e),T.createElement(o.Text,null,(e=>e.formatMessage({id:"ov3n4T",defaultMessage:"Delete the link to restrict access."}))(i))),T.createElement(o.Box,{style:{gap:"8px",display:"flex",flexDirection:"row",alignItems:"center"}},T.createElement(o.Button,{variant:"outline",onClick:t},T.createElement(o.Text,{size:"small",isBold:!0},(e=>e.formatMessage({id:"YCTkuR",defaultMessage:"Got It"}))(i))),T.createElement(o.Button,{variant:"transparent",onClick:()=>{a&&a({initialTab:"edit_link_settings"})}},T.createElement(o.Text,{size:"small",isBold:!0},r))))};Co.displayName="DowngradeBanner";const Ro=(e,t)=>({options:e,useAction:t}),wo=(e,t)=>({success:!1,type:e,value:t}),No=(e,t)=>({success:!0,type:e,value:t}),Lo=e=>({success:!1,type:"TypeExhaustion",value:{value:e}}),ko=e=>({success:!1,type:"UncaughtException",value:{error:e}}),Oo=e=>{const t=e.options.name,a=e.useAction(),n=Pt();return T.useCallback((async e=>{let r;n("ACTION__START",{name:t,input:e});try{r=await a(e)}catch(e){r=ko(e)}return n("ACTION__COMPLETE",{name:t,input:e,output:r}),r}),[n,a,t])},xo=la({name:"sharing.relinquishFolderMembership"},(e=>t=>sa(e.sharingRelinquishFolderMembership(t)))),Do=(e,t)=>{const a=(null==t?void 0:t.timeout)||1e4,n=(null==t?void 0:t.interval)||1e3;return new Promise((t=>{const r=setTimeout((()=>t({status:"TIMEOUT"})),a),o=async()=>{try{const a=await e();if("COMPLETE"===a.status)return clearTimeout(r),void t(a);setTimeout(o,n)}catch(e){clearTimeout(r),t({status:"ERROR",error:e})}};o()}))},Po=la({name:"sharing.sharingCheckJobStatus"},(e=>t=>sa(e.sharingCheckJobStatus(t)))),Fo=Ro({name:"CheckRelinquishFolderMembershipJobStatus"},(()=>{const e=va(Po);return T.useCallback((async({asyncJobId:t})=>{const a=await e({async_job_id:t});return"FATAL"===a.status?wo("NetworkFailure",{response:a}):"ERROR"===a.status?wo("ApiError",{response:a}):"in_progress"===a.output[".tag"]?No("InProgress",{response:{...a,output:a.output}}):"failed"===a.output[".tag"]?wo("Failed",{response:{...a,output:a.output}}):"complete"===a.output[".tag"]?No("Complete",{response:{...a,output:a.output}}):Lo(a.output)}),[e])})),$o=Ro({name:"PollCheckRelinquishFolderMembershipJobStatus"},(()=>{const e=Oo(Fo);return T.useCallback((async({asyncJobId:t,timeout:a,interval:n})=>{const r=await Do((async()=>{const a=await e({asyncJobId:t});return"InProgress"===a.type?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{timeout:a,interval:n});return"TIMEOUT"===r.status?wo("Timeout",null):"ERROR"===r.status?ko(r.error):r.output.success?No("Complete",r.output.value):r.output}),[e])})),Ho=Ro({name:"RelinquishFolderMembership"},(()=>{const e=va(xo),t=Oo($o);return T.useCallback((async({relinquishFolderMembershipArg:a,timeout:n,interval:r})=>{const o=await e(a);if("ERROR"===o.status)return wo("ApiError",{response:o});if("FATAL"===o.status)return wo("NetworkFailure",{response:o});if("complete"===o.output[".tag"])return No("Complete",{response:{...o,output:o.output}});if("async_job_id"!==o.output[".tag"])return Lo(o.output);const i=await t({asyncJobId:o.output.async_job_id,timeout:n,interval:r});return i.success?No("PollingComplete",i.value):"ApiError"===i.type?wo("PollingApiError",i.value):"NetworkFailure"===i.type?wo("PollingNetworkFailure",i.value):"Failed"===i.type?wo("PollingFailed",i.value):"Timeout"===i.type?wo("PollingTimeout",i.value):i}),[e,t])})),Bo=la({name:"sharing.removeFolderMember"},(e=>t=>sa(e.sharingRemoveFolderMember(t)))),Uo=la({name:"sharing.checkRemoveMemberJobStatus"},(e=>t=>sa(e.sharingCheckRemoveMemberJobStatus(t)))),jo=Ro({name:"CheckRemoveFolderMemberJobStatus"},(()=>{const e=va(Uo);return T.useCallback((async({asyncJobId:t})=>{const a=await e({async_job_id:t});return"FATAL"===a.status?wo("NetworkFailure",{response:a}):"ERROR"===a.status?wo("ApiError",{response:a}):"in_progress"===a.output[".tag"]?No("InProgress",{response:{...a,output:a.output}}):"failed"===a.output[".tag"]?wo("Failed",{response:{...a,output:a.output}}):"complete"===a.output[".tag"]?No("Complete",{response:{...a,output:a.output}}):Lo(a.output)}),[e])})),Vo=Ro({name:"PollCheckRemoveFolderMemberJobStatus"},(()=>{const e=Oo(jo);return T.useCallback((async({asyncJobId:t,timeout:a,interval:n})=>{const r=await Do((async()=>{const a=await e({asyncJobId:t});return"InProgress"===a.type?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{timeout:a,interval:n});return"TIMEOUT"===r.status?wo("Timeout",null):"ERROR"===r.status?ko(r.error):r.output.success?No("Complete",r.output.value):r.output}),[e])})),Go=Ro({name:"RemoveFolderMember"},(()=>{const e=va(Bo),t=Oo(Vo);return T.useCallback((async({removeFolderMemberArg:a,timeout:n,interval:r})=>{const o=await e(a);if("ERROR"===o.status)return wo("ApiError",{response:o});if("FATAL"===o.status)return wo("NetworkFailure",{response:o});const i=await t({asyncJobId:o.output.async_job_id,timeout:n,interval:r});return i.success?No("PollingComplete",i.value):"ApiError"===i.type?wo("PollingApiError",i.value):"NetworkFailure"===i.type?wo("PollingNetworkFailure",i.value):"Failed"===i.type?wo("PollingFailed",i.value):"Timeout"===i.type?wo("PollingTimeout",i.value):i}),[e,t])})),qo=la({name:"sharing.set_access_inheritance"},(e=>t=>sa(e.sharingSetAccessInheritance(t)))),zo=la({name:"sharing.checkShareInternalJobStatus"},(e=>t=>sa(e.sharingCheckShareInternalJobStatus(t)))),Wo=Ro({name:"CheckSetAccessInheritanceJobStatus"},(()=>{const e=va(zo);return T.useCallback((async({asyncJobId:t})=>{const a=await e({async_job_id:t});return"FATAL"===a.status?wo("NetworkFailure",{response:a}):"ERROR"===a.status?wo("ApiError",{response:a}):"in_progress"===a.output[".tag"]?No("InProgress",{response:{...a,output:a.output}}):"failed"===a.output[".tag"]?wo("Failed",{response:{...a,output:a.output}}):"complete"===a.output[".tag"]?No("Complete",{response:{...a,output:a.output}}):Lo(a.output)}),[e])})),Zo=Ro({name:"PollCheckSetAccessInheritanceJobStatus"},(()=>{const e=Oo(Wo);return T.useCallback((async({asyncJobId:t,timeout:a,interval:n})=>{const r=await Do((async()=>{const a=await e({asyncJobId:t});return"InProgress"===a.type?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{timeout:a,interval:n});return"TIMEOUT"===r.status?wo("Timeout",null):"ERROR"===r.status?ko(r.error):r.output.success?No("Complete",r.output.value):r.output}),[e])})),Ko=Ro({name:"SetAccessInheritance"},(()=>{const e=va(qo),t=Oo(Zo);return T.useCallback((async({setAccessInheritanceArg:a,timeout:n,interval:r})=>{const o=await e(a);if("ERROR"===o.status)return wo("ApiError",{response:o});if("FATAL"===o.status)return wo("NetworkFailure",{response:o});if("complete"===o.output[".tag"])return No("Complete",{response:{...o,output:o.output}});if("async_job_id"!==o.output[".tag"])return Lo(o.output);const i=await t({asyncJobId:o.output.async_job_id,timeout:n,interval:r});return i.success?No("PollingComplete",i.value):"ApiError"===i.type?wo("PollingApiError",i.value):"NetworkFailure"===i.type?wo("PollingNetworkFailure",i.value):"Failed"===i.type?wo("PollingFailed",i.value):"Timeout"===i.type?wo("PollingTimeout",i.value):i}),[e,t])})),Yo=la({name:"sharing.share_folder"},(e=>t=>sa(e.sharingAlphaShareFolder(t)))),Qo=Ro({name:"CheckShareFileFolderJobStatus"},(()=>{const e=va(zo);return T.useCallback((async({asyncJobId:t})=>{const a=await e({async_job_id:t});return"FATAL"===a.status?wo("NetworkFailure",{response:a}):"ERROR"===a.status?wo("ApiError",{response:a}):"in_progress"===a.output[".tag"]?No("InProgress",{response:{...a,output:a.output}}):"failed"===a.output[".tag"]?wo("Failed",{response:{...a,output:a.output}}):"complete"===a.output[".tag"]?No("Complete",{response:{...a,output:a.output}}):Lo(a.output)}),[e])})),Jo=Ro({name:"PollCheckShareFileFolderJobStatus"},(()=>{const e=Oo(Qo);return T.useCallback((async({asyncJobId:t,timeout:a,interval:n})=>{const r=await Do((async()=>{const a=await e({asyncJobId:t});return"InProgress"===a.type?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{timeout:a,interval:n});return"TIMEOUT"===r.status?wo("Timeout",null):"ERROR"===r.status?ko(r.error):r.output.success?No("Complete",r.output.value):r.output}),[e])})),Xo=Ro({name:"ShareFileFolder"},(()=>{const e=va(Yo),t=Oo(Jo);return T.useCallback((async({path:a,confidentiality:n,timeout:r,interval:o})=>{const i=await e({path:a,confidentiality:n});if("ERROR"===i.status)return wo("ApiError",{response:i});if("FATAL"===i.status)return wo("NetworkFailure",{response:i});if("complete"===i.output[".tag"])return No("Complete",{response:{...i,output:i.output}});if("async_job_id"!==i.output[".tag"])return Lo(i.output);const s=await t({asyncJobId:i.output.async_job_id,timeout:r,interval:o});return s.success?No("PollingComplete",s.value):"ApiError"===s.type?wo("PollingApiError",s.value):"NetworkFailure"===s.type?wo("PollingNetworkFailure",s.value):"Failed"===s.type?wo("PollingFailed",s.value):"Timeout"===s.type?wo("PollingTimeout",s.value):s}),[e,t])})),ei=la({name:"sharing.getParentFolderAccess"},(e=>t=>sa(e.sharingGetParentFolderAccess(t)))),ti=la({name:"sharing.relinquishFileMembership"},(e=>t=>sa(e.sharingRelinquishFileMembership(t)))),ai=la({name:"sharing.removeFileMember2"},(e=>t=>sa(e.sharingRemoveFileMember2(t)))),ni=la({name:"sharing.transferFolder"},(e=>t=>sa(e.sharingTransferFolder(t)))),ri=la({name:"sharing.updateFileMember"},(e=>t=>sa(e.sharingUpdateFileMember(t)))),oi=la({name:"sharing.updateFolderMember"},(e=>t=>sa(e.sharingUpdateFolderMember(t)))),ii="sharing-notification",si=e=>{ui(),o.Snackbar.complete(e,ii)},li=({title:e,onUndoClick:t})=>{ui(),o.Snackbar.completeWithUndo(e,t,ii,{timeoutDelayMs:2e4})},di=e=>{o.Snackbar.close(),o.Snackbar.fail(e,ii)},ci=({intl:e,title:t,onHelpButtonClick:a,helpButtonText:n})=>{const r=n||mi(e);ui(),o.Snackbar.show(T.default.createElement(o.Snackbar,{title:t,actionButtonText:r,onActionClick:a,variant:"fail",id:ii}))},_i=e=>{ui(),o.Snackbar.sync(e,!0,ii)},ui=()=>o.Snackbar.close(ii),mi=e=>e.formatMessage({id:"b0sjjf",defaultMessage:"Learn more"}),gi=e=>"dropbox_id"===e[".tag"]?`DBX_ID:${e.dropbox_id}`:"email"===e[".tag"]?`EMAIL:${e.email}`:"other"===e[".tag"]?"OTHER":o.exhausts(e,"UNKNOWN"),pi=(e,t)=>{const a=ur();return T.useCallback((n=>{a.select(ir).emit({memberActionType:t,prevAccessLevel:n.access_type});const r=Xr(n),o=e.$memberActionsInProgress.get();e.$memberActionsInProgress.set({...o,[gi(r)]:!0})}),[a,t,e.$memberActionsInProgress])},Ei=(e,t)=>{const a=ur();return T.useCallback((async(n,r)=>{a.select(sr).emit({memberActionType:t});const i=e.$memberActionsInProgress.get(),s=Xr(n),l={...i};delete l[gi(s)],await o.invalidateObjectMembers(r),window.requestAnimationFrame((()=>{e.$memberActionsInProgress.set({...l})}))}),[a,t,e.$memberActionsInProgress])},fi=()=>{const e=n.useIntl();return T.useCallback((()=>{di((e=>e.formatMessage({id:"xn+a8/",defaultMessage:"An unexpected error has occurred."}))(e))}),[e])},hi=e=>T.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]),Si=e=>{const t=Pt(),a=Oo(Ko);return T.useCallback((async({sharedFolderId:n,inProgressMessage:r,setToConfidential:o,keepInheritedMembers:i=!1})=>{e.$props.get().onChangeConfidentiality(),_i(r),t("SHARE_MODAL_MANAGE_ACCESS__SET_ACCESS_INHERITANCE__API_START",null);const s=await a({setAccessInheritanceArg:{shared_folder_id:n,access_inheritance:o?{".tag":"no_inherit"}:{".tag":"inherit"},keep_inherited_members:o?i:void 0},timeout:12e4,interval:1e3});return s.success?t("SHARE_MODAL_MANAGE_ACCESS__SET_ACCESS_INHERITANCE__API_SUCCESS",null):t("SHARE_MODAL_MANAGE_ACCESS__SET_ACCESS_INHERITANCE__API_FAILURE",{output:s}),s}),[e.$props,t,a])},vi=e=>{const t=Pt(),a=i.useStore(e.$objectIdentifier),n=Oo(Xo);return T.useCallback((async({onStart:e,onInProgress:r,onCancel:o,onSuccess:i,onError:s,setToConfidential:l})=>{if(t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_START",null),e(),"file_folder"!==a[".tag"])return s(),null;r();const d=void 0!==l?l?{".tag":"confidential"}:{".tag":"not_confidential"}:void 0,c=await n({path:a.path,timeout:12e4,interval:1e3,confidentiality:d});if(!c.success)return"ApiError"===c.type&&"bad_path"===c.value.response.error[".tag"]&&"already_shared"===c.value.response.error.bad_path[".tag"]&&c.value.response.error.bad_path.shared_folder_id?(t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_FAILURE",{output:c}),c.value.response.error.bad_path.shared_folder_id):(t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_FAILURE",{output:c}),o(),s(),null);t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_SUCCESS",null);const _=c.value.response.output.shared_folder_id;return i(_),_}),[t,a,n])},Ai=e=>{const t=i.useStore(e.$objectIdentifier),a=fi(),n=vi(e),r=pi(e,"share_folder"),o=Ei(e,"share_folder"),s=(()=>{const e=ur();return T.useCallback((()=>{e.select(lr).emit({memberActionType:"share_folder"})}),[e])})();return T.useCallback((async(e,i)=>await n({onStart:()=>{r(e)},onInProgress:()=>{_i(i)},onCancel:()=>{o(e,t)},onSuccess:()=>{s()},onError:()=>{a()}})),[n,r,o,t,s,a])},bi=e=>{const t=Pt(),a=n.useIntl(),r=i.useStore(e.$objectIdentifier),{onObjectIdentifierChanged:s}=i.useStore(e.$props),l=fi(),d=Ai(e),c=Si(e),_=va(ri),u=va(oi),m=va(ei),g=o.useSharingObjectMetadata(r),p=!g.isLoading&&!g.isError?g.output:null,E=Ei(e,"change_member_access"),f=(e=>{const t=ur();return T.useCallback((async(a,n,r)=>{t.select(lr).emit({memberActionType:"change_member_access",newAccessLevel:r});const i=e.$memberActionsInProgress.get(),s=Xr(a),l={...i};delete l[gi(s)],await o.invalidateObjectMembers(n),window.requestAnimationFrame((()=>{e.$memberActionsInProgress.set(l)}))}),[t,e.$memberActionsInProgress])})(e),h=pi(e,"change_member_access");return T.useCallback((async(n,i,g)=>{var S;const v=g.is_inherited&&"viewer"===n[".tag"]&&"viewer"!==(null===(S=g.inherited_access_type)||void 0===S?void 0:S[".tag"]);if(h(g),p&&o.getIsFile(p)){const i=Xr(g),s={file:o.isNewApiMetadata(p)?"":p.id,member:i,access_level:n};t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_START",null),v||_i(Or(a));const d=await _(s);"SUCCESS"===d.status?(t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_SUCCESS",{response:d}),d.output.access_level&&d.output.access_level!==n?(E(g,r),e.$changeFileMemberAccessFailureData.set({error:d.output,member:i})):(f(g,r,n),si(xr(a)))):("ERROR"===d.status?(di(Dr(a)),t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_ERROR",{response:d})):t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_FATAL",{response:d}),E(g,r),l())}else if(p&&(o.getIsSharedFolder(p)||o.getIsNonSharedFolder(p)&&i)){const _=p.name;let m=o.getIsNonSharedFolder(p)?null:p.shared_folder_id;if(o.getIsNonSharedFolder(p)&&(m=await d(g,Pr(a,_))),!m)return void o.invalidateSharingObjectMetadata(r);const h={".tag":"shared_folder",sharedFolderId:m,fileId:r.fileId};if(s(h),i){if(!(await c({sharedFolderId:m,inProgressMessage:Pr(a,_),setToConfidential:!0,keepInheritedMembers:!0})).success)return void di(Fr(a));o.invalidateSharingObjectMetadata(h)}t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_START",null),v||_i(Or(a));const S=Xr(g),A=await u({shared_folder_id:m,member:S,access_level:n});"SUCCESS"===A.status?(t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_SUCCESS",{response:A}),A.output.access_level&&A.output.access_level!==n?(o.invalidateObjectMembers(h),E(g,h),e.$changeMemberAccessLevelData.set({data:A.output||[],member:S})):(f(g,h,n),si(xr(a)))):"ERROR"===A.status?(t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_ERROR",{response:A}),di(Dr(a)),e.$changeFolderMemberAccessFailureData.set({error:A.error,member:S}),E(g,h)):(t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_FATAL",{response:A}),E(g,h),l(),di(Fr(a)))}else if(p&&o.getIsNonSharedFolder(p)){if("viewer"===n[".tag"]){t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_START",null);const a=Xr(g),r=await m({shared_folder_id:p.parent_shared_folder_id||"",member:a,access_level:n});return void("SUCCESS"===r.status?(t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_SUCCESS",{response:r}),e.$changeMemberAccessLevelData.set({member:a,data:r.output})):("ERROR"===r.status?t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_ERROR",{response:r}):t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_FATAL",{response:r}),l()))}const i=await d(g,Or(a));if(!i)return void o.invalidateSharingObjectMetadata(r);const c={".tag":"shared_folder",sharedFolderId:i};s(c),t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_START",null);const _=Xr(g),h=await u({shared_folder_id:i||"",member:_,access_level:n});"SUCCESS"===h.status?(t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_SUCCESS",{response:h}),h.output.access_level&&h.output.access_level!==n?(E(g,c),e.$changeMemberAccessLevelData.set({data:h.output||[],member:_})):(f(g,c,n),si(xr(a)))):("ERROR"===h.status?t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_ERROR",{response:h}):t("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_FATAL",{response:h}),E(g,c),l(),di(Fr(a)))}}),[h,p,t,_,a,E,r,e,f,l,s,u,d,c,m])},yi=e=>{const t=Pt(),a=n.useIntl(),r=va(ti),s=Oo(Ho),l=i.useStore(e.$objectIdentifier),{onObjectIdentifierChanged:d}=i.useStore(e.$props),c=Ai(e),_=Si(e),u=fi(),m=o.useSharingObjectMetadata(l),g=!m.isLoading&&!m.isError?m.output:null,p=pi(e,"relinquish_folder_membership"),E=Ei(e,"relinquish_folder_membership"),f=(e=>{const t=ur();return T.useCallback((async()=>{t.select(lr).emit({memberActionType:"relinquish_folder_membership"}),e.$props.get().onRequestClose()}),[t,e.$props])})(e);return T.useCallback((async(e,n,i)=>{if(g&&o.getIsFile(g)){p(e),t("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_START",null);const a=await r({file:o.isNewApiMetadata(g)?"":g.id});E(e,l),"SUCCESS"===a.status?(t("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_SUCCESS",{response:a}),f()):("ERROR"===a.status?t("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_ERROR",{response:a}):t("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_FATAL",{response:a}),u())}if(g&&(o.getIsSharedFolder(g)||o.getIsNonSharedFolder(g)&&n)){const r=o.getName(g);let m=o.getIsNonSharedFolder(g)?null:g.shared_folder_id;if(o.getIsNonSharedFolder(g)&&(m=await c(e,Lr(a,r))),!m)return;const h={".tag":"shared_folder",sharedFolderId:m,fileId:l.fileId};if(d(h),n){if(!(await _({sharedFolderId:m,inProgressMessage:Lr(a,r),setToConfidential:!0,keepInheritedMembers:!0})).success)return E(e,h),u(),void di(Nr(a));o.invalidateSharingObjectMetadata(h)}if(null!==m&&void 0!==i){p(e),t("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_START",null);const n=await s({relinquishFolderMembershipArg:{shared_folder_id:m,leave_a_copy:i},timeout:12e4,interval:1e3});E(e,h),n.success?(t("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_SUCCESS",null),f(),si(kr(a,r))):(t("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_FAILURE",{output:n}),u(),di(Nr(a)))}}}),[g,p,t,r,E,l,f,u,d,c,a,_,s])},Mi=e=>{const t=Pt(),a=n.useIntl(),r=va(ai),s=va(ei),l=Oo(Go),d=i.useStore(e.$objectIdentifier),{onObjectIdentifierChanged:c}=i.useStore(e.$props),_=Ai(e),u=Si(e),m=fi(),g=o.useSharingObjectMetadata(d),p=!g.isLoading&&!g.isError?g.output:null,E=Ei(e,"remove_member"),f=pi(e,"remove_member"),h=(e=>{const t=ur();return T.useCallback((async(a,n)=>{t.select(lr).emit({memberActionType:"remove_member"});const r=Xr(a),i={...e.$memberActionsInProgress.get()};delete i[gi(r)],await o.invalidateObjectMembers(n),window.requestAnimationFrame((()=>{e.$memberActionsInProgress.set(i)}))}),[t,e.$memberActionsInProgress])})(e);return T.useCallback((async(n,i,g,S)=>{const v=Xr(n);if(p&&o.getIsFile(p)){f(n),t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_START",null);const a=await r({file:o.isNewApiMetadata(p)?"":p.id,member:v});"SUCCESS"===a.status?t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_SUCCESS",{response:a}):"ERROR"===a.status?t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_ERROR",{response:a}):t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_FATAL",{response:a}),"SUCCESS"===a.status?"success"===a.output[".tag"]&&a.output.access_level?(E(n,d),e.$removeFileMemberWarningData.set({error:a.output,member:v})):h(n,d):"ERROR"===a.status&&"no_explicit_access"===a.error[".tag"]?(E(n,d),e.$removeFileMemberFailureData.set({error:a.error,member:v})):(E(n,d),m())}if(p&&(o.getIsSharedFolder(p)||o.getIsNonSharedFolder(p)&&i)){let r=o.getIsNonSharedFolder(p)?null:p.shared_folder_id;const s=o.getName(p);if(o.getIsNonSharedFolder(p)&&(r=await _(n,g?$r(a,s):Lr(a,s))),!r)return;const A={".tag":"shared_folder",sharedFolderId:r,fileId:d.fileId};if(c(A),i){if(!(await u({sharedFolderId:r,inProgressMessage:g?$r(a,s):Lr(a,s),setToConfidential:!0,keepInheritedMembers:!0})).success)return E(n,A),m(),void di(g?Hr(a):Nr(a))}if(null!==r&&void 0!==S){f(n),t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_START",null);const i=await l({removeFolderMemberArg:{shared_folder_id:r,member:v,leave_a_copy:S},timeout:12e4,interval:1e3});if(i.success){if(t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_SUCCESS",null),"complete"===i.value.response.output[".tag"]&&i.value.response.output.access_level)return E(n,A),void e.$removeMemberAccessLevelData.set({member:v,data:i.value.response.output});h(n,A),si(g?((e,t)=>e.formatMessage({id:"yqWm25",defaultMessage:"Members removed from <b>{currentFolder}</b>."},{currentFolder:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}))(a,s):kr(a,s))}else"ApiError"===i.type?(t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_FAILURE",{output:i}),e.$removeFolderMemberFailureData.set({error:i.value.response.error,member:v}),E(n,A)):(t("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_FAILURE",{output:i}),E(n,A),m(),di(g?Hr(a):Nr(a)))}}else if(p&&o.getIsNonSharedFolder(p)){t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_START",null);const a=await s({shared_folder_id:p.parent_shared_folder_id||"",member:v});"SUCCESS"===a.status?(t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_SUCCESS",{response:a}),e.$removeMemberAccessLevelData.set({member:v,data:a.output})):("ERROR"===a.status?t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_ERROR",{response:a}):t("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_FATAL",{response:a}),m())}}),[p,f,t,r,E,d,e,h,m,c,_,a,u,l,s])},Ii=e=>{const t=Pt(),a=va(ni),r=fi(),s=n.useIntl(),l=i.useStore(e.$objectIdentifier),d=o.useSharingObjectMetadata(l),c=!d.isLoading&&!d.isError?d.output:null,_=pi(e,"transfer_folder_ownership"),u=Ei(e,"transfer_folder_ownership"),m=(e=>{const t=ur();return T.useCallback((async()=>{t.select(lr).emit({memberActionType:"transfer_folder_ownership"}),await e.$props.get().onTransferFolderOwnership()}),[t,e.$props])})(e);return T.useCallback((async(e,n,i)=>{if(!c||c&&!o.getIsSharedFolder(c))throw new Error("Unsupported file type.");_(n),t("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_START",null);const d=await a({shared_folder_id:o.isNewApiMetadata(c)?"":c.shared_folder_id,to_dropbox_id:e});"SUCCESS"===d.status?(t("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_SUCCESS",null),await m(),si(((e,t)=>e.formatMessage({id:"BNpXMo",defaultMessage:"Made {displayName} the owner."},{displayName:t}))(s,i))):(u(n,l),"ERROR"===d.status?t("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_ERROR",{response:d}):"FATAL"===d.status&&t("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_FATAL",{response:d}),r())}),[c,_,t,a,u,l,m,s,r])},Ti=e=>{const t=n.useIntl(),a=i.useStore(e.$objectIdentifier),r=o.useSharingObjectMetadata(a),s=!r.isLoading&&!r.isError?r.output:null,{onObjectIdentifierChanged:l}=i.useStore(e.$props),d=fi(),c=(()=>{const e=ur();return T.useCallback((()=>{e.select(dr).emit({memberActionType:"remove_all_inherited_members"})}),[e])})(),_=(()=>{const e=ur();return T.useCallback((()=>{e.select(cr).emit({memberActionType:"remove_all_inherited_members"})}),[e])})(),u=(e=>{const t=ur();return T.useCallback((async(a,n=!1)=>{n||t.select(_r).emit({memberActionType:"remove_all_inherited_members"}),await o.invalidateObjectMembers(a),e.$props.get().onChangeConfidentiality()}),[t,e.$props])})(e),m=vi(e),g=Si(e);return T.useCallback((async n=>{if(!s)return d(),null;const r=async()=>{const a=e.$objectIdentifier.get();if("shared_folder"!==a[".tag"])return;(await g({sharedFolderId:a.sharedFolderId,inProgressMessage:br(t,!1,s),setToConfidential:!1})).success?(si(Mr(t,!1,s)),u(a,!0)):di(yr(t,!1))};if("shared_folder"===a[".tag"]){c();return(await g({sharedFolderId:a.sharedFolderId,inProgressMessage:br(t,n,s),setToConfidential:!0,keepInheritedMembers:!1})).success?(li({title:Mr(t,n,s),onUndoClick:r}),await o.invalidateObjectMembers(a),u(a)):(di(yr(t,!0)),_()),a.sharedFolderId}{const n=n=>{li({title:Mr(t,!0,s),onUndoClick:r});const i={".tag":"shared_folder",sharedFolderId:n};e.$objectIdentifier.set(i),l(i),o.invalidateSharingObjectMetadata(a),u(i)},i=()=>{_i(br(t,!0,s))},d=()=>{di(yr(t,!0))};return await m({onStart:()=>{c()},onInProgress:i,onCancel:()=>{_()},onSuccess:n,onError:d,setToConfidential:!0})}}),[s,a,d,e.$objectIdentifier,g,t,c,u,_,m,l])},Ci=({store:e,isOpen:a,onClose:r})=>{const s=ur(),l=n.useIntl(),d=Gt()!==t.Platforms.DESKTOP,c=hi(e),_=i.useStore(e.$objectIdentifier),u=o.useSharingObjectMetadata(_),m=!u.isLoading&&!u.isError,g=Ti(e);if(T.useEffect((()=>{c(a)}),[a,c]),T.useEffect((()=>{a&&s.select(or).emit(null)}),[a,s]),!a||!m)return null;const p=u.output,E=o.getName(p),f=o.getParentFolderName(p);return T.createElement(T.Fragment,null,T.createElement(o.Modal$1,{open:a,isCentered:!0,withCloseButton:d?wr(l):void 0,onRequestClose:()=>{r()}},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,((e,t)=>e.formatMessage({id:"V8posb",defaultMessage:"Remove members of “{parentFolderName}” folder?"},{parentFolderName:G.em_snippet(t,o.SNIPPET_SIZES.FOLDER_NAME)}))(l,f))),T.createElement(o.Modal$1.Body,null,((e,t,a)=>e.formatMessage({id:"YMtvO3",defaultMessage:"Members of <b>{parentFolderName}</b> folder won’t be able to access <b>{folderName}</b>."},{parentFolderName:G.em_snippet(t,o.SNIPPET_SIZES.FOLDER_NAME),folderName:G.em_snippet(a,o.SNIPPET_SIZES.FOLDER_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}))(l,f,E)),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"opacity",onClick:()=>{r()}},(e=>e.formatMessage({id:"JJWPQC",defaultMessage:"Cancel"}))(l)),T.createElement(o.Button,{variant:"primary",onClick:()=>{r(),g(!0)}},(e=>e.formatMessage({id:"0BoZ69",defaultMessage:"Remove"}))(l)))))};Ci.displayName="RemoveAllInheritedMembersConfirmationModal";const Ri=e=>{const t=e.toUpperCase().split(" ").filter((e=>e));return`${t.length>0?t[0][0]:""}${t.length>1?t[t.length-1][0]:""}`};function wi(e,t){if(!e)return"";const a=(e=e.toUpperCase()).trim().split(" "),n=Li(a[0]),r=Li(a[a.length-1]);if(a.length>=2)return Ni(t)?r[0]+n[0]:n[0]+r[0];const o=Li(e);return Ni(t)&&!function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>=128)return!1;return!0}(e)&&o.length>1?o[0]+o[1]:o[0]}function Ni(e){return["zh","ja","ko"].includes(new Intl.Locale(e).language)}function Li(e){const t=[],a=e.length;let n=0;for(;n<a;){const r=e[n];if(r>="\ud800"&&r<="\udb7f"){if(!(n<a-1))break;{const a=r+e[n+1];t.push(a),n+=2}}else t.push(r),n+=1}return t}const ki=e=>{if("member_error"===e[".tag"]){const t=e.member_error;if("no_explicit_access"===t[".tag"]){return t.access_details||[]}}return[]},Oi=e=>{const{intl:t,folderName:a,folderPath:n,role:r,isPaired:i,onManageAccessClicked:s}=e,l=((e,t)=>e?`/${t}`:"/home")(i,r),d=`${l}${n}?share_manage_access=true`;return T.createElement(o.Menu.Row,{preferComposition:!0,style:{height:"57px",alignItems:"center"}},T.createElement(o.Menu.RowAccessory,null,T.createElement(p.FolderSharedDefaultSmall,null)),T.createElement(o.Menu.RowContent,null,T.createElement(o.Truncate,{location:.5},T.createElement(o.Menu.RowTitle,null,a))),T.createElement(o.Menu.RowAccessory,null,T.createElement(o.Button,{variant:"transparent",onClick:()=>{s(d)},size:"small"},(e=>e.formatMessage({id:"Ca+R4I",defaultMessage:"Manage Access"}))(t))))},xi=(e,t)=>{const a=hi(e),n=Ei(e,"change_member_access"),r=i.useStore(e.$props).objectIdentifier;return T.useCallback((()=>{e.$changeFileMemberAccessFailureData.set(null),e.$changeFolderMemberAccessFailureData.set(null),e.$changeMemberAccessLevelData.set(null),a(!1),n(t,r)}),[t,r,a,n,e])},Di=({store:e,member:a})=>{var r;const s=ur(),l=n.useIntl(),d=i.useStore(e.$objectIdentifier),c=i.useStore(e.$changeFileMemberAccessFailureData),_=o.useSharingObjectMetadata(d),u=!_.isLoading&&!_.isError,m=Qr(a),g=Gt()!==t.Platforms.DESKTOP,p=T.useRef(!1),E=c&&c.error.access_details&&u;T.useEffect((()=>{p.current||E&&(p.current=!0,s.select(tr).emit(null))}),[E,s]);const f=xi(e,a),h=hi(e);if(!E)return null;const S=_.output,v=c.error.access_details,A=v?v[0]:void 0;return h(!0),A?T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:g?wr(l):void 0,onRequestClose:f},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,Vr(l,m))),T.createElement(o.Modal$1.Body,null,Gr(l,null!==(r=null==v?void 0:v.length)&&void 0!==r?r:0,o.getName(S),A.folder_name)),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"primary",onClick:f},qr(l)))):T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:g?wr(l):void 0,onRequestClose:f},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,jr(l,m))),T.createElement(o.Modal$1.Body,null,Ur(l,m,o.getName(S))),T.createElement(o.Modal$1.Footer,null))};Di.displayName="NoExplicitAccessOnAccessChangeModal";const Pi=({store:e,member:a})=>{const r=n.useIntl(),s=ur(),l=i.useStore(e.$changeFolderMemberAccessFailureData),d=i.useStore(e.$changeMemberAccessLevelData),c=(()=>{const e=Jt();return T.useCallback((t=>e(t)),[e])})(),_=xi(e,a),u=i.useStore(e.$objectIdentifier),m=o.useSharingObjectMetadata(u),g=!m.isLoading&&!m.isError,p=Qr(a),E=ho(),f=E.isLoading||E.isError?null:E.output,h=Gt()!==t.Platforms.DESKTOP,S=T.useRef(!1),v=l||d,A=Xr(a),b=(null==d?void 0:d.member)||(null==l?void 0:l.member),y=(I=A,!(!(M=b)||!I)&&("dropbox_id"===M[".tag"]&&"dropbox_id"===I[".tag"]?M.dropbox_id===I.dropbox_id:"email"===M[".tag"]&&"email"===I[".tag"]?M.email===I.email:"other"===M[".tag"]&&"other"===I[".tag"]));var M,I;if(T.useEffect((()=>{const e=v&&y;S.current||e&&(S.current=!0,s.select(tr).emit(null))}),[v,y,s]),!v)return null;if(!y)return null;if(!g||!f)return null;const C=m.output,R=l?ki(l.error):(null==d?void 0:d.data.access_details)||[];if(!(0!==R.length))return T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:h?wr(r):void 0,onRequestClose:_},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,jr(r,p))),T.createElement(o.Modal$1.Body,null,Ur(r,p,o.getName(C))),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"opacity",onClick:_},zr(r))));const w=Gr(r,R.length,o.getName(C),R[0].folder_name);return T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:h?wr(r):void 0,onRequestClose:_},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,Vr(r,p))),T.createElement(o.Modal$1.Body,null,w,T.createElement(o.Box,{style:{height:"100%",maxHeight:"150px",border:"1px solid #DFDCD8",borderRadius:"5px",overflow:"auto",marginTop:"var(--spacing__unit--3)"}},R.slice(0,15).map(((e,t)=>T.createElement(Oi,{key:t,intl:r,folderName:e.folder_name,folderPath:e.path,onManageAccessClicked:c,role:f.role,isPaired:f.is_paired}))))),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"opacity",onClick:_},zr(r))))};Pi.displayName="ParentFolderAccessModal";const Fi=(e,t)=>{const a=hi(e),n=Ei(e,"remove_member"),r=i.useStore(e.$objectIdentifier);return T.useCallback((()=>{e.$removeFileMemberFailureData.set(null),e.$removeFileMemberWarningData.set(null),e.$removeFolderMemberFailureData.set(null),e.$removeMemberAccessLevelData.set(null),a(!1),n(t,r)}),[t,r,a,n,e])},$i=({store:e,member:a})=>{var r,s,l,d;const c=n.useIntl(),_=ur(),u=i.useStore(e.$objectIdentifier),m=i.useStore(e.$removeFileMemberFailureData),g=i.useStore(e.$removeFileMemberWarningData),p=Fi(e,a),E=Qr(a),f=hi(e),h=o.useSharingObjectMetadata(u),S=!h.isLoading&&!h.isError,v=Gt()!==t.Platforms.DESKTOP,A=T.useRef(!1),b=m||g,y="no_explicit_access"===(null===(r=null==m?void 0:m.error)||void 0===r?void 0:r[".tag"])&&("success"!==(null===(s=null==g?void 0:g.error)||void 0===s?void 0:s[".tag"])||null!=(null===(l=null==g?void 0:g.error)||void 0===l?void 0:l.access_details));let M=null;"success"===(null==g?void 0:g.error[".tag"])?M=g.error.access_details||[]:m&&"no_explicit_access"===m.error[".tag"]&&(M=m.error.access_details||[]);const I=null!=M;if(T.useEffect((()=>{const e=b&&y&&I;A.current||e&&(A.current=!0,_.select(er).emit(null))}),[_,A,b,y,I]),!b)return null;if(!y)return null;if(!I||!S)return null;const C=M?M[0]:null,R=h.output;return f(!0),C?T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:v?wr(c):void 0,onRequestClose:p},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,Wr(c,E))),T.createElement(o.Modal$1.Body,null,Kr(c,null!==(d=null==M?void 0:M.length)&&void 0!==d?d:0,o.getName(R),C.folder_name)),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"primary",onClick:p},qr(c)))):T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:v?wr(c):void 0,onRequestClose:p},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,Wr(c,E))),T.createElement(o.Modal$1.Body,null,Zr(c,E,o.getName(R))),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"primary",onClick:p},qr(c))))};$i.displayName="NoExplicitAccessOnRemoveModal";const Hi=({store:e,member:a})=>{const r=n.useIntl(),s=ur(),l=i.useStore(e.$objectIdentifier),d=i.useStore(e.$removeMemberAccessLevelData),c=i.useStore(e.$removeFolderMemberFailureData),_=ho(),u=_.isLoading||_.isError?null:_.output,m=o.useSharingObjectMetadata(l),g=!m.isLoading&&!m.isError,p=(()=>{const e=Jt();return T.useCallback((t=>e(t)),[e])})(),E=Fi(e,a),f=Qr(a),h=Gt()!==t.Platforms.DESKTOP,S=T.useRef(!1),v=g&&u,A=c||d;if(T.useEffect((()=>{if(!S.current){v&&A&&(S.current=!0,s.select(er).emit(null))}}),[s,A,v]),!v)return null;if(!A)return null;const b=c?ki(c.error):(null==d?void 0:d.data.access_details)||[],y=0!==b.length,M=m.output;if(!y)return T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:h?wr(r):void 0,onRequestClose:E},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,Wr(r,f))),T.createElement(o.Modal$1.Body,null,Zr(r,f,o.getName(M))),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"opacity",onClick:E},zr(r))));const I=Kr(r,b.length,o.getName(M),b[0].folder_name);return T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:h?wr(r):void 0,onRequestClose:E},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,Wr(r,f))),T.createElement(o.Modal$1.Body,null,I,T.createElement("div",{style:{height:"100%",maxHeight:"150px",border:"1px solid #DFDCD8",borderRadius:"5px",overflow:"auto",marginTop:"var(--spacing__unit--3)"}},b.slice(0,15).map(((e,t)=>T.createElement(Oi,{key:t,intl:r,folderName:e.folder_name,folderPath:e.path,onManageAccessClicked:p,role:u.role,isPaired:u.is_paired}))))),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"opacity",onClick:E},zr(r))))};Hi.displayName="ParentFolderAccessModal";var Bi;!function(e){e[e.RemoveAccess=0]="RemoveAccess",e[e.DowngradeAccess=1]="DowngradeAccess"}(Bi||(Bi={}));var Ui;!function(e){function t(e){return e.startsWith("dbafvid:")}e.isAnonymousUserId=t,e.isAnonymousSeenState=e=>t(e.seen_state_user.user_id)}(Ui||(Ui={}));const ji=({store:e,isOpen:a,member:r,selectedAccessLevel:s,onClose:l})=>{const d=ur(),c=n.useIntl(),_=Gt()!==t.Platforms.DESKTOP,{user:u}=o.useActiveUser(),m=hi(e),g=bi(e),p=yi(e),E=Mi(e),f=i.useStore(e.$objectIdentifier),h=o.useSharingObjectMetadata(f),S=!h.isLoading&&!h.isError;T.useEffect((()=>{m(a)}),[a,m]);const v=T.useRef(!1);if(T.useEffect((()=>{v.current||a&&(v.current=!0,d.select(ar).emit(null))}),[a,d]),!a||!S)return null;const A=h.output,b=Jr(r,u),y=o.getName(A),M=o.getParentFolderName(A),I=o.getOwnerTeamName(A),C=""===M,R=b,w="remove"!==s,N=(e=>{let t="";return"user"in e&&void 0!==e.user&&(t=e.user.display_name),"group"in e&&void 0!==e.group&&(t=e.group.group_name),"invitee"in e&&void 0!==e.invitee&&"email"==e.invitee[".tag"]&&(t=e.invitee.email),t})(r),L=Vi(c,w,C),k=Gi(c,I,y,M,R,w,C),O=qi(c,I,y,M,N,R,w,C);return T.createElement(T.Fragment,null,T.createElement(o.Modal$1,{open:a,isCentered:!0,withCloseButton:_?wr(c):void 0,onRequestClose:()=>{l()}},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,k)),T.createElement(o.Modal$1.Body,null,O),T.createElement(o.Modal$1.Footer,null,T.createElement(o.Button,{variant:"opacity",onClick:()=>{l()}},(e=>e.formatMessage({id:"TnNYmK",defaultMessage:"Cancel"}))(c)),T.createElement(o.Button,{variant:"primary",onClick:()=>{l();const e="group"in r&&void 0!==r.group;if(w){g({".tag":s},!0,r)}else R?p(r,!0,!1):E(r,!0,e,!1)}},L))))};ji.displayName="ChangeInheritanceConfirmationModal";const Vi=(e,t,a)=>t?(e=>e.formatMessage({id:"Mq03yj",defaultMessage:"Change access"}))(e):a?(e=>e.formatMessage({id:"PjD4Vl",defaultMessage:"Remove everyone"}))(e):(e=>e.formatMessage({id:"poGJG/",defaultMessage:"Remove"}))(e),Gi=(e,t,a,n,r,i,s)=>r?((e,t)=>e.formatMessage({id:"gODx5K",defaultMessage:"Remove yourself from <b>{parentFolderName}</b>?"},{parentFolderName:G.em_snippet(t,o.SNIPPET_SIZES.FOLDER_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}))(e,n):i?((e,t)=>e.formatMessage({id:"gBVsYr",defaultMessage:"Change how members can access “{currentFolder}”?"},{currentFolder:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME)}))(e,a):s?t?((e,t)=>e.formatMessage({id:"n/U4N5",defaultMessage:"Remove everyone at “{teamName}”?"},{teamName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME)}))(e,t):(e=>e.formatMessage({id:"u5fnTi",defaultMessage:"Remove everyone on your team?"}))(e):((e,t)=>e.formatMessage({id:"Ca5nCo",defaultMessage:"Remove a member of “{parentFolderName}”?"},{parentFolderName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME)}))(e,n),qi=(e,t,a,n,r,i,s,l)=>i?((e,t)=>e.formatMessage({id:"cowZmX",defaultMessage:"You won’t be able to see future changes to this shared folder, and new members of <b>{parentFolderName}</b> won’t have access to this folder automatically."},{parentFolderName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e)}))(e,n):s?l?((e,t,a)=>e.formatMessage({id:"a6N9uo",defaultMessage:"{memberName} will only be able to view this folder, and new {teamName} members won’t be able to access it automatically.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),teamName:G.em_snippet(a||"team",o.SNIPPET_SIZES.DISPLAY_NAME),br:T.default.createElement("br",null)}))(e,r,t):((e,t,a)=>e.formatMessage({id:"39gzeK",defaultMessage:"{memberName} will only be able to view this folder, and new members of <b>{parentFolderName}</b> won’t be able to access it automatically.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),parentFolderName:G.em_snippet(a,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e),br:T.default.createElement("br",null)}))(e,r,n):l?((e,t,a)=>e.formatMessage({id:"4qLIy8",defaultMessage:"{teamName} members won’t be able to see future changes to <b>{currentFolderName}</b> automatically.{br}{br}To give people access to this folder in the future, you’ll need to invite them directly."},{teamName:G.em_snippet(t||"Team",o.SNIPPET_SIZES.DISPLAY_NAME),currentFolderName:G.em_snippet(a,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e),br:T.default.createElement("br",null)}))(e,t,a):((e,t,a)=>e.formatMessage({id:"5HeI0Z",defaultMessage:"{memberName} and new members of the <b>{parentFolderName}</b> folder won’t be able to see future changes to this shared folder.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."},{memberName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME),parentFolderName:G.em_snippet(a,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.default.createElement("b",{style:{fontWeight:500}},e),br:T.default.createElement("br",null)}))(e,r,n),zi=(e,t,a,n,r,i,s,l)=>{const d=o.getIsFolder(t),c=o.getParentSharedFolderId(t),_=o.getParentFolderName(t),u=o.getIsSharedFolder(t)&&!o.getIsConfidentialFolder(t)&&c,m=Mo(e,{".tag":"leave_a_copy"})&&!s,g=l.formatMessage({id:"YRtFe9",defaultMessage:"Cancel"});let p=null,E=null,f=null,h=null,S=!1,v=null,A="";const b=()=>{A="https://help.dropbox.com/files-folders/share/remove-link",v=l.formatMessage({id:"SwVT41",defaultMessage:"More about links"}),S=!0};return"remove"===n&&(i?(f=(e=>e.formatMessage({id:"4xmHQa",defaultMessage:"Remove my access"}))(l),d?(p=(e=>e.formatMessage({id:"bsRTH6",defaultMessage:"Remove your access to this folder?"}))(l),E=u?(e=>e.formatMessage({id:"1aWCsg",defaultMessage:"You may still have access to this folder through a company group or parent folder."}))(l):(e=>e.formatMessage({id:"fchbsZ",defaultMessage:"If you continue, you won’t be able to access this folder anymore."}))(l),m&&(h=(e=>e.formatMessage({id:"lLVlO2",defaultMessage:"Keep a copy of this folder"}))(l))):(p=(e=>e.formatMessage({id:"FCMIIX",defaultMessage:"Remove your access to this file?"}))(l),E=(e=>e.formatMessage({id:"6NPSkt",defaultMessage:"If you continue, you won’t be able to access this file anymore."}))(l))):(f=(e=>e.formatMessage({id:"VVzPdA",defaultMessage:"Remove"}))(l),p=((e,t)=>e.formatMessage({id:"WJ0lPe",defaultMessage:"Remove {name}?"},{name:t}))(l,a),d?(u?_?(b(),E=((e,t,a)=>e.formatMessage({id:"pnMbuO",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access <strong>{parentname}</strong> will still be able to access this folder."},{strong:e=>T.default.createElement("strong",null,e),name:t,parentname:a}))(l,a,_)):(b(),E=((e,t)=>e.formatMessage({id:"eBf70w",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access the parent folder will still be able to access this folder."},{strong:e=>T.default.createElement("strong",null,e),name:t}))(l,a)):E=((e,t)=>e.formatMessage({id:"RL/0uv",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder."},{strong:e=>T.default.createElement("strong",null,e),name:t}))(l,a),m&&(h=((e,t)=>e.formatMessage({id:"82sluj",defaultMessage:"Let {name} keep a copy of this shared folder"},{name:t}))(l,a))):r?(b(),E=(e=>e.formatMessage({id:"oax1/b",defaultMessage:"Keep in mind, if group members have a shared link to this file, they might still be able to view or edit it."}))(l)):(b(),E=(e=>e.formatMessage({id:"WhoBZ9",defaultMessage:"Keep in mind, if they have a shared link to this file, they might still be able to view or edit it."}))(l)))),"owner"===n&&(p=((e,t)=>e.formatMessage({id:"hWdhIJ",defaultMessage:"Make {name} the owner of this folder?"},{name:t}))(l,a),E=((e,t)=>e.formatMessage({id:"6cevm4",defaultMessage:"{name} will become the owner of all items in this folder. Only they will be able to unshare or change folder settings."},{name:t}))(l,a),f=(e=>e.formatMessage({id:"3Do/LR",defaultMessage:"Make owner"}))(l)),{title:p,body:E,confirmText:f,cancelText:g,optionLabel:h,shouldShowLink:S,linkText:v,linkHref:A}},Wi=({store:e,member:a,selectedAccessLevel:r,isConfirmationModalOpen:s,setIsConfirmationModalOpen:l})=>{const d=n.useIntl(),c=ur(),_=Jt(),{user:u}=o.useActiveUser(),[m,g]=T.useState(!1),p=yi(e),E=Mi(e),f=Ii(e),h=i.useStore(e.$objectIdentifier),S=o.useSharingObjectMetadata(h),v=!S.isLoading&&!S.isError,A=Qr(a),b=(e=>"group"in e&&void 0!==e.group)(a),y=Jr(a,u),M=(e=>"user"in e&&void 0!==e.user&&e.user.disabled)(a),I=Gt()!==t.Platforms.DESKTOP,C=T.useRef(!1);if(T.useEffect((()=>{C.current||s&&(C.current=!0,c.select(nr).emit(null))}),[s,c]),!v)return null;const R=S.output,{title:w,body:N,confirmText:L,cancelText:k,optionLabel:O,shouldShowLink:x,linkHref:D,linkText:P}=zi(a,R,A,r,b,y,M,d);if(void 0===w)return null;const F=e=>Mo(e,{".tag":"leave_a_copy"});return T.createElement(o.Modal$1,{open:s,isCentered:!0,withCloseButton:I?wr(d):void 0,onRequestClose:()=>l(!1)},T.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,w)),T.createElement(o.Modal$1.Body,{hasVerticalSpacing:!1},N,O?T.createElement("p",{style:{display:"flex",marginTop:"8px"}},T.createElement(o.Checkbox,{"aria-label":Br(d),checked:m,onClick:()=>{g(!m)},style:{marginRight:"var(--spacing__base_unit)"}}),O):null),T.createElement(o.Modal$1.Footer,null,x&&T.createElement(o.Link,{onClick:e=>{e.preventDefault(),_(Zt(D))},href:D},P),T.createElement("div",{style:{flex:1}}),T.createElement(o.Button,{variant:"opacity",onClick:()=>l(!1)},k),T.createElement(o.Button,{variant:"primary",onClick:()=>{const e=Xr(a),t="dropbox_id"===e[".tag"]?e.dropbox_id:"";l(!1),"remove"===r&&(y?p(a,!1,F(a)&&m):E(a,!1,!1,F(a)&&m)),"owner"===r&&t&&f(t,a,A)}},L)))};Wi.displayName="ManageAccessModalConfirmationModal";const Zi=({member:e,store:t})=>{var a;const r=n.useIntl(),{user:s}=o.useActiveUser(),l=i.useStore(t.$objectIdentifier),{openLinkSettings:d}=i.useStore(t.$props),c=o.useSharingObjectMetadata(l),_=!c.isLoading&&!c.isError,u=Zn(l),m=u.isLoading||u.isError?void 0:u.output,[g,p]=T.useState(),[E,f]=T.useState(!1),[h,S]=T.useState(!1),v=bi(t),A=Mi(t),b=hi(t),y=zn(l),M=!y.isLoading&&!y.isError?y.output:void 0,I=Kn(m,M),C=io(I),w=new Set(Object.keys(C));if(T.useEffect((()=>{b(E)}),[E,b]),!_)return null;const N=c.output,L=Ki(e),k=e.access_type,O="user"in e&&(null===(a=e.user)||void 0===a?void 0:a.disabled)||!1,x=k[".tag"],D=L===(null==s?void 0:s.account_id),P=e.is_inherited,F=o.getCanDoAction(N,{".tag":"update_confidentiality"})&&P,$=F||!o.getIsNonSharedFolder(N)&&o.getCanDoAction(N,{".tag":"relinquish_membership"}),H=Yi(e,L,N,x,D&&$,w,r,O),B=(a,n)=>{const r={".tag":n},i=((e,t)=>{const a=Object.keys(R);return e!==t&&-1!==a.indexOf(e)&&-1!==a.indexOf(t)&&R[t]<R[e]})(x,n),s=n===o.MEMBER_ACTION.REMOVE,l=!s&&i;if(s||l){(e=>{t.$showSecurityBanner.set(!0),t.$securityBannerType.set(e)})(s?eo.RemoveAccess:eo.DowngradeAccess)}const c=o.getIsSharedFolder(N)?e.inherited_access_type:e.access_type,_=s||l&&c&&i,u=s&&P;var m;x!==n&&(p(n),F&&_?S(!0):u&&o.getIsFolder(N)&&!o.getIsInsideTeamFolderTree(N)?A(e,!1,!1,!1):"remove"===n||"owner"===n?f(!0):"manage_link_access"===n?(m="editor"===x?"edit_link_settings":"view_link_settings",a.preventDefault(),d({initialTab:m})):v(r,!1,e))};return 0===H.length?null:1===H.length&&H[0].apiId===x?T.createElement(o.Button,{size:"small",variant:"transparent",hasNoUnderline:!0,style:{cursor:"default"}},T.createElement(o.Text,{color:"faint",size:"small"},Tr(r,k))):T.createElement(T.Fragment,null,T.createElement(o.Menu.Wrapper,null,(({getContentProps:e,getTriggerProps:t})=>T.createElement(T.Fragment,null,T.createElement(o.Button,{...t(),size:"small",variant:"transparent",withDropdownIcon:!0,hasNoUnderline:!0,"data-uxa-log":"manage_access_dropdown_button"},T.createElement(o.Text,{size:"small"},Tr(r,k))),T.createElement(o.Menu.Content,{...e(),placement:"bottom-end",style:{width:300}},T.createElement(o.Menu.Segment,null,H.map((e=>T.createElement(o.Menu.SelectItem,{key:e.label,value:e.apiId,selected:x===e.apiId,disabled:e.disabled,onClick:t=>B(t,e.apiId)},T.createElement(o.Menu.Row,{withTitle:e.label,withSubtitle:e.tooltip,style:e.variant&&"red"===e.variant?{color:"var(--color__alert__text)"}:void 0}))))))))),T.createElement(Wi,{store:t,member:e,selectedAccessLevel:g,isConfirmationModalOpen:E,setIsConfirmationModalOpen:f}),T.createElement(ji,{store:t,isOpen:h,member:e,selectedAccessLevel:g,onClose:()=>S(!1)}))};Zi.displayName="ManageAccessMemberAccessDropdown";const Ki=e=>"user"in e&&null!=e.user?e.user.account_id:"group"in e&&null!=e.group?e.group.group_id:"invitee"in e&&null!=e.invitee&&"email"===e.invitee[".tag"]?e.invitee.email:"",Yi=(e,t,a,n,r,i,s,l)=>{const d=i.has(t),c=o.getIsFolder(a),_=function(e,t){return[["make_editor",{value:"editor",title:Oa(t),folder_description:Pa(t),file_description:Fa(t),collection_description:$a(t)}],["make_viewer",{value:"viewer",title:xa(t),folder_description:Ha(t),file_description:Ha(t),collection_description:Ba(t)}],["make_viewer_no_comment",{value:"viewer_no_comment",title:Da(t),folder_description:Ua(t),file_description:Ua(t),collection_description:Ba(t)}],["make_owner",{value:"owner",title:t.formatMessage({id:"UBvfnM",defaultMessage:"Make owner"}),file_description:"",folder_description:"",collection_description:""}],["remove",{value:"remove",title:e?t.formatMessage({id:"xv0D2w",defaultMessage:"Remove my access"}):t.formatMessage({id:"HRdOei",defaultMessage:"Remove"}),file_description:"",folder_description:"",collection_description:""}],["manage_link_access",{value:"manage_link_access",title:t.formatMessage({id:"EQzfeF",defaultMessage:"Manage access"}),file_description:"",folder_description:"",collection_description:""}]]}(r,s),u={};if(e.permissions)for(const t of e.permissions)u[t.action[".tag"]]=t.allow;let m=[];for(const[e,t]of _){const a=Qi(s,u,d,n,e,t,c,r,l);a&&m.push(a)}const g=m.find((e=>"manage_link_access"===e.apiId));return g&&(m=[g]),m},Qi=(e,t,a,n,r,o,i,s,l)=>{if("manage_link_access"===o.value&&a)return{apiId:o.value,label:o.title,tooltip:e.formatMessage({id:"qze8JT",defaultMessage:"Change or remove their access in link settings"}),disabled:!1};if(((e,t,a,n,r,o)=>t===a||o&&e in o&&o[e]&&(!r||"remove"===t)||"remove"===t&&n)(r,o.value,n,s,l,t)){const e=i?o.folder_description:o.file_description,t="remove"===o.value?"red":"default";return{apiId:o.value,label:o.title,tooltip:e||"",variant:t}}},Ji=({member:e,accountDataMap:t,store:a})=>{const r=n.useIntl(),{user:s}=o.useActiveUser(),l=i.useStore(a.$objectIdentifier),d=i.useStore(a.$memberActionsInProgress),c=Zn(l),_=!c.isLoading&&!c.isError,u="user"in e&&null!=e.user?t[e.user.account_id]:void 0,m=(e=>{const t={};if(!e)return t;for(const a of e.seen_state_info.seen_states)if(!Yn.isAnonymousSeenState(a)){const e=a.seen_state_user.sharing_access_type;if(e)switch(e[".tag"]){case"view_member_access":case"edit_member_access":const n=e.group_ids;for(const e of n)e in t||(t[e]=[]),t[e].push(a)}}return t})(_?c.output:void 0),g=es(e,u),p=ts(e,r),E=Qr(e),f=rs(r,e,u),h=ns(r,e,m),S=as(e,s),v=Xr(e),A=(e=>e.formatMessage({id:"nspb6l",defaultMessage:"External"}))(r),b=null==u?void 0:u.disabled,y=h.length>0,M=((null==f?void 0:f.length)||0)+(S?A.length:0);let I=!1;return d[gi(v)]&&(I=!0),T.createElement(T.Fragment,null,T.createElement(o.Box,{style:{display:"flex",alignItems:"center",height:"52px",padding:"0 8px"}},T.createElement(o.Avatar,{hasNoOutline:!0,size:"standard",src:g},p),T.createElement(o.Box,{style:{display:"flex",flexDirection:"column",marginLeft:"12px"}},T.createElement(o.Box,{style:{display:"flex",alignItems:"center"}},T.createElement(o.Text,{variant:"label",size:"small"},E.length>32?T.createElement(o.Truncate,{lines:1,maxWidth:200},E):E),b&&T.createElement(T.Fragment,null,T.createElement(o.Box,{style:{padding:"0 2px"}},"·"),T.createElement(o.Text,{variant:"label",color:"error",size:"small"},(e=>e.formatMessage({id:"6jx51W",defaultMessage:"Disabled"}))(r))),y&&T.createElement(Xi,{lastSeenTimestamp:h,member:e},T.createElement(o.Text,{color:"faint",size:"small",variant:"label",style:{display:"flex",alignItems:"center"}},T.createElement(o.UIIcon,{src:o.ShowLine,size:"small",style:{marginLeft:"4px"}})))),T.createElement(o.Box,{style:{display:"flex",alignItems:"center",flexGrow:1}},f&&T.createElement(o.Text,{variant:"label",color:"subtle",size:"small"},M>32?T.createElement(o.Truncate,{lines:1,maxWidth:145},f):f),S&&T.createElement(T.Fragment,null,f&&T.createElement(o.Box,{style:{padding:"0 2px"}},"·"),T.createElement(o.Text,{variant:"label",size:"small",style:{color:"var(--dig-color__warning__base)"}},A)))),T.createElement(o.Box,{style:{marginLeft:"auto"}},I?T.createElement(o.Spinner,{style:{marginRight:"8px"},"aria-valuetext":"Loading xsmall",size:"xsmall"}):T.createElement(Zi,{store:a,member:e}))),T.createElement($i,{store:a,member:e}),T.createElement(Di,{store:a,member:e}),T.createElement(Hi,{store:a,member:e}),T.createElement(Pi,{store:a,member:e}))};Ji.displayName="ManageAccessMemberListItem";const Xi=({member:e,lastSeenTimestamp:t,children:a})=>{const n="group"in e&&void 0!==e.group;return T.createElement(o.Tooltip,{title:T.createElement(o.Box,{display:"flex",flexDirection:"column",alignItems:"center"},t.map(((e,t)=>n?T.createElement(o.Tooltip.Text,{key:t,size:"small",color:"standard",withMargin:!1},e):T.createElement(o.Tooltip.Text,{key:t,size:"small",color:0!==t||n?"subtle":"standard",withMargin:!1},e))))},a)},es=(e,t)=>{if("user"in e&&null!=e.user)return null==t?void 0:t.profile_photo_url},ts=(e,t)=>"user"in e&&null!=e.user?wi(e.user.display_name,t.locale):"group"in e&&void 0!==e.group?Ri(e.group.group_name):"invitee"in e&&void 0!==e.invitee&&"email"===e.invitee[".tag"]?wi(e.invitee.email,t.locale):"",as=(e,t)=>{if("owner"===e.access_type[".tag"])return!1;const a=null==t?void 0:t.is_team;return"user"in e&&null!=e.user&&null!=e.user.email?!!a&&!e.user.same_team:"group"in e&&void 0!==e.group?!e.group.same_team:!("invitee"in e)||void 0===e.invitee||!!e.user&&!e.user.same_team},ns=(e,t,a)=>{const n=[];if("user"in t&&null!=t.user&&"time_last_seen"in t&&null!=t.time_last_seen){const a=t.time_last_seen;n.push(((e,t)=>{let a="";t&&(a=((e,t)=>e.formatMessage({id:"yobnDT",defaultMessage:"Viewed {time_str}"},{time_str:t}))(e,uo(e,t)));return a})(e,new Date(a))),n.push(((e,t)=>e.formatDate(t,{day:"numeric",month:"short",year:"numeric"})+" "+e.formatTime(t,{hour:"numeric",minute:"numeric"}))(e,new Date(a)))}if("group"in t&&void 0!==t.group&&a){const r=t.group.group_id;if(r in a){const t=((e,t)=>{const a=[];let n=0,r=0,o=0;const i=[];t.forEach((e=>{const t=e.seen_state_user.display_name,r=e.when_last_seen;r&&(a.push([t,new Date(1e3*r)]),n+=1)})),r=n<=10?n:9,o=n-r;for(let t=0;t<r;t++){const[n,r]=a[t];i.push(ao(e,n,r))}return o>0&&i.push(no(e,o)),i})(e,a[r]);n.push(...t)}}return n},rs=(e,t,a)=>{if("user"in t&&null!=t.user)return a?a.email_verified?t.user.email:null:t.user.email.endsWith("#")?null:t.user.email;if("group"in t&&null!=t.group){const a=t.group.member_count;return a?((e,t)=>t<=0?"":e.formatMessage({id:"XMHn5C",defaultMessage:"{count, plural, one{# member} other{# members}}"},{count:t}))(e,a):null}return"invitee"in t&&null!=t.invitee&&t.invitee[".tag"],null},os=({inheritedMembers:e,store:t,accountDataMap:a})=>{const r=n.useIntl(),[s,l]=T.useState(!1),[d,c]=T.useState(!1),[_,u]=T.useState(!1),m=i.useStore(t.$objectIdentifier),g=o.useSharingObjectMetadata(m);if(!(!g.isLoading&&!g.isError))return null;const E=g.output,f=o.getParentFolderName(E),h=o.getOwnerTeamName(E)||"",S=o.getCanDoAction(E,o.UPDATE_CONFIDENTIALITY_TAG),v=[...e.filter((e=>e.is_inherited&&"group"in e)),...e.filter((e=>e.is_inherited&&!("group"in e)))],A=d?v:v.slice(0,25);return 0===e.length?null:T.createElement(T.Fragment,null,T.createElement(o.Box,{style:{backgroundColor:"var(--dig-color__opacity__surface)",borderRadius:"6px"}},T.createElement(o.Box,{style:{height:"52px",display:"flex",alignItems:"center",padding:"0 8px"}},T.createElement(o.Box,{style:{display:"flex",alignItems:"center",height:"32px",width:"32px"}},T.createElement(p.FolderSharedDefaultSmall,null)),T.createElement(o.Box,{style:{marginRight:"auto",marginLeft:"8px"}},T.createElement(o.Text,{size:"small",isBold:!0,style:{lineHeight:"unset"}},T.createElement(o.Truncate,{maxWidth:255},((e,t,a)=>t?e.formatMessage({id:"IJUh05",defaultMessage:"People with access to “{folder_name}”"},{folder_name:t}):e.formatMessage({id:"6fi/fQ",defaultMessage:"Everyone at {team_name}"},{team_name:a}))(r,f,h)))),T.createElement(o.Box,null,e.length>0?T.createElement(o.Box,null,T.createElement(o.IconButton,{variant:"opacity",size:"small",onClick:()=>{l(!s)}},T.createElement(o.UIIcon,{src:s?o.ChevronDownLine:o.ChevronRightLine,size:"small"}))):null)),s&&T.createElement(o.Box,{style:{display:"flex",flexDirection:"column"}},A.map(((e,n)=>T.createElement(o.Box,{key:n},T.createElement(Ji,{member:e,store:t,accountDataMap:a})))),e.length>5&&!d&&T.createElement(o.Box,null,T.createElement(o.Button,{variant:"outline",size:"small",onClick:()=>{c(!d)},style:{margin:"8px 12px 16px 12px"}},((e,t)=>e.formatMessage({id:"GHErP8",defaultMessage:"Show all {num_members} members"},{num_members:t}))(r,e.length))),S&&T.createElement(o.Box,{style:{display:"flex",padding:"var(--dig-spacing__micro__medium)",justifyContent:"center",borderTop:"1px solid var(--dig-color__border__subtle)"}},T.createElement(o.Button,{variant:"transparent",size:"small",tone:"destructive",onClick:()=>u(!0)},(e=>e.formatMessage({id:"ntjDJF",defaultMessage:"Remove all"}))(r))))),T.createElement(Ci,{store:t,isOpen:_,onClose:()=>u(!1)}))};os.displayName="ManageAccessMemberInheritedList";const is=({store:e})=>{const{viewer:t}=o.useViewer(),a=i.useStore(e.$objectIdentifier),n=o.useSharingObjectMetadata(a),r=!n.isLoading&&!n.isError,s=Zn(a),l=s.isLoading||s.isError?void 0:s.output,d=o.useObjectMembers(a,!1),c=d.isFirstPageLoaded&&!d.isFirstPageOnly?d.allMembers:void 0,_=zn(a),u=!_.isLoading&&!_.isError?_.output:void 0,m=Kn(l,u),g=oo(m),p=c?[...c.groups,...c.invitees,...c.users,...g]:[],E=(c?[...c.users,...g]:[]).map((e=>e.user.account_id)),f=Gn(E),h=!f.isLoading&&!f.isError?f.output:{};if(!r)return null;const S=((e,t)=>{if(!t)return!1;const a=!!o.getParentSharedFolderId(e);return null!=t.team_id&&!!o.getOwnerTeam(e)&&o.getOwnerTeamId(e)===t.team_dbtid&&a})(n.output,t),v=S?p.filter((e=>e.is_inherited&&null!=e.access_type&&"traverse"!==e.access_type[".tag"])):[],A=S?p.filter((e=>!e.is_inherited&&null!=e.access_type)):p,b=to(v),y=to(A);return T.createElement(o.Box,{style:{height:"100%",overflowY:"auto",scrollbarWidth:"thin"}},T.createElement(os,{inheritedMembers:b,store:e,accountDataMap:h}),y.map(((t,a)=>T.createElement(Ji,{key:a,store:e,member:t,accountDataMap:h}))))};is.displayName="ManageAccessMemberListInner";const ss=({store:e})=>{const t=i.useStore(e.$objectIdentifier),a=o.useSharingObjectMetadata(t),n=!a.isLoading&&!a.isError,r=o.useObjectMembers(t).isFirstPageLoaded;return n&&r?T.createElement(is,{store:e}):T.createElement(o.Box,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},T.createElement(o.Spinner,null))};ss.displayName="ManageAccessMemberList";const ls=322,ds=({store:e})=>{const t=n.useIntl(),a=ur(),{user:r}=o.useActiveUser(),s=i.useStore(e.$objectIdentifier),l=o.useObjectMembers(s),d=l.isFirstPageLoaded&&l.isFirstPageOnly,c=T.useRef(!1);T.useEffect((()=>{d&&!c.current&&(c.current=!0,a.select(Xn).emit(null))}),[a,d]);const _=Zn(s),u=!_.isLoading&&!_.isError?_.output:void 0,m=zn(s),g=!m.isLoading&&!m.isError?m.output:void 0;if(d){const n={...l.firstPage},i=Kn(u,g),d=oo(i),_=n.users.filter((e=>e.user.account_id!==(null==r?void 0:r.account_id)));return n.groups.length>0||n.invitees.length>0||_.length>0||d.length>0?(c.current||(c.current=!0,a.select(Xn).emit(null)),T.createElement(o.Box,{style:{height:ls,display:"flex",flexDirection:"column"}},T.createElement(o.Box,{style:{marginBottom:"8px"}},T.createElement(Io,{store:e})),T.createElement(ss,{store:e}))):T.createElement(o.Box,{style:{height:ls},display:"flex",alignItems:"center",flexDirection:"column"},T.createElement(fo,{style:{width:"200px",height:"200px"}}),T.createElement(o.Text,{style:{width:"260px",textAlign:"center"}},((e,t)=>e.formatMessage({id:"PDTyQ+",defaultMessage:"When specific people are invited to this {isFile, select, true {file} other {folder}}, they’ll be listed here."},{isFile:t}))(t,"file"===s[".tag"])))}return T.createElement(o.Box,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:ls}},T.createElement(o.Spinner,null))};ds.displayName="ManageAccessScreenInner";const cs=e=>{const t=(e=>i.useInitStore(e,(t=>{const a=i.store(!1),n=i.store(eo.DowngradeAccess),r=i.store({}),o=i.store(null),s=i.store(null),l=i.store(null),d=i.store(null),c=i.store(null),_=i.store(null),u=i.store(null);return{$props:t,$showSecurityBanner:a,$securityBannerType:n,$objectIdentifier:i.store(e.objectIdentifier),$memberActionsInProgress:r,$removeFileMemberFailureData:o,$removeFileMemberWarningData:l,$changeFileMemberAccessFailureData:s,$changeFolderMemberAccessFailureData:d,$removeFolderMemberFailureData:c,$changeMemberAccessLevelData:_,$removeMemberAccessLevelData:u}})))(e),a=i.useStore(t.$objectIdentifier),n=o.useObjectMembers(a,!1),r=n.isFirstPageLoaded&&!n.isFirstPageOnly,s=o.useSharingObjectMetadata(a),l=!s.isLoading&&!s.isError;return T.useEffect((()=>{if(l){const e=s.output,n=e&&".tag"in e&&"shared_folder"===e[".tag"];"file_folder"===a[".tag"]&&n&&t.$objectIdentifier.set({".tag":"shared_folder",sharedFolderId:e.shared_folder_id})}}),[l,a,s,t.$objectIdentifier]),r&&l?T.createElement(ds,{store:t}):T.createElement(o.Box,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:ls}},T.createElement(o.Spinner,null))};var _s;cs.displayName="ManageAccessScreen",function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.FATAL="FATAL"}(_s||(_s={}));const us=e=>{(new Image).src=e},ms=e=>({user:{account_id:e.account_id,email:e.email,display_name:e.display_name,same_team:!0,disabled:!1}}),gs=(e,t)=>{const{user:a}=o.useActiveUser();"file_folder"===e[".tag"]&&t&&o.prefetchFolderSharingObjectMetadata(e.path);const n=o.useObjectMembers(e,!0,t);return T.useCallback((async()=>{o.prefetchListObjectMembersData(e),async function(e){const t=un(e);o.sharingListSharedLinksPackage.prefetchQuery(u.queryClient,{apiArg:{path:t,direct_only:!0}})}(e),"file"===e[".tag"]&&o.prefetchSeenStateInfoData(e.fileId);if(n.isFirstPageLoaded&&n.isFirstPageOnly){const{groups:e,users:t,invitees:r}={...n.firstPage};0===t.length&&0===e.length&&0===r.length&&a&&(n.firstPage.users=[ms(a)]);const i=n.firstPage.users.map((e=>e.user.account_id)),s=await async function(e){if(0===e.length)return{status:_s.SUCCESS,output:[]};const t=await o.getSharingApiv2ResponseWithErrors(o.getAccountBatchPackage.fetchQuery(u.queryClient,{apiArg:{account_ids:e}},{staleTime:3e5}));return"SUCCESS"===t.status?{status:_s.SUCCESS,output:{...t.output}}:"ERROR"===t.status?t:{status:_s.FATAL,error:{".tag":"api_error"}}}(i);if("SUCCESS"===s.status){const e=Object.values(s.output),t=e.find((e=>e.account_id===(null==a?void 0:a.account_id)));(null==t?void 0:t.profile_photo_url)&&us(t.profile_photo_url),e.slice(0,2).forEach((e=>{e.profile_photo_url&&us(e.profile_photo_url)}))}}}),[e,n,a])},ps=e=>{const t=jn(e),{variant:a,isLoading:n}=o.useExperimentVariant("sm24_obj_metadata_new_api"),r=!n,[s,l]=T.useState(null);T.useEffect((()=>{const n=(e=>null===e.sessionId?null:"file"===e.objectIdentifier[".tag"]?`file:${e.sessionId}:${un(e.objectIdentifier)}`:"file_folder"===e.objectIdentifier[".tag"]?`folder:${e.sessionId}:${un(e.objectIdentifier)}`:`shared_folder:${e.sessionId}:${un(e.objectIdentifier)}`)(e.$options.get());if(null===n)return null!==s&&l(null),void("unloaded"!==e.$state.get().status&&i.batch((()=>{e.$nonce.set(e.$nonce.get()+1),e.$state.set({status:"unloaded"})})));r&&(n===s&&"unloaded"!==e.$state.get().status||(i.batch((()=>{e.$nonce.set(e.$nonce.get()+1),e.$state.set({status:"loading"})})),l(n),e.$options.set({...e.$options.get(),objMetadataNewApiVariant:a}),o.logExposure({feature:"sm24_obj_metadata_new_api",variant:a}),t()))}))},Es=e=>{const t=Vn(e),a=jn(e),n=(e=>T.useCallback((t=>{const a=e.$state.get();"loaded"===a.status&&e.$state.set({...a,objectIdentifier:t})}),[e]))(e),r=i.useStore(e.$state);return T.useMemo((()=>({...r,refreshObjectMetadata:t,refreshModal:a,onObjectIdentifierChanged:n})),[r,t,a,n])},fs=e=>{const t=(e=>i.useInitStore(e,(()=>({$nonce:i.store(0),$options:i.store(e),$state:i.store({status:"unloaded"})}))))(e);return ps(t),(e=>{const{variant:t,isLoading:a}=o.useExperimentVariant("sm24_manage_access"),n=!a,r=e.$state.get(),i="loaded"===r.status&&!o.getIsLinkOnlyMode(r.objectMetadata)&&(o.getCanInvite(r.objectMetadata,cn)||o.getCanInvite(r.objectMetadata,_n)),s=n&&"ON"===t&&i,l=gs(e.$options.get().objectIdentifier,s);T.useEffect((()=>{s&&l()}),[s,l])})(t),(e=>{T.useEffect((()=>()=>{i.batch((()=>{e.$nonce.set(e.$nonce.get()+1),e.$state.set({status:"unloaded"})}))}),[])})(t),Es(t)},hs=({children:e,...t})=>{const a=fs(t);return T.createElement(u.QueryClientProvider,{client:u.queryClient},T.createElement(T.Fragment,null,e(a)))};hs.displayName="ShareModalDataLoader";const Ss=T.createContext({status:"unloaded"}),vs=({children:e,...t})=>T.createElement(hs,{...t},(t=>T.createElement(Ss.Provider,{value:t},e)));vs.displayName="Provider";const As=()=>T.useContext(Ss),bs="https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate",ys=e=>e.formatMessage({id:"RYuEPZ",defaultMessage:"Some of these emails aren’t on your Dropbox team."}),Ms=e=>e.formatMessage({id:"c7+ulZ",defaultMessage:"This email isn’t on your Dropbox team."}),Is=e=>e.formatMessage({id:"Vp93jb",defaultMessage:"One or more of these emails is no longer active."}),Ts=e=>e.formatMessage({id:"LKdcDm",defaultMessage:"Some of these emails aren’t on your Dropbox team."}),Cs=e=>e.formatMessage({id:"mvBmmQ",defaultMessage:"This email isn’t on your Dropbox team."}),Rs=e=>e.formatMessage({id:"0IC8VF",defaultMessage:"You don’t have permission to share with some of these people."}),ws=e=>e.formatMessage({id:"8tC+2X",defaultMessage:"Only groups can be added to team folders."}),Ns=e=>e.formatMessage({id:"UrkgWp",defaultMessage:"You don’t have permission to share with some of these people due to restrictions on their end."}),Ls=e=>e.formatMessage({id:"S+fqGv",defaultMessage:"One or more of the emails you entered are invalid."}),ks=e=>e.formatMessage({id:"KxgNgG",defaultMessage:"Add message (optional)"}),Os=e=>e.formatMessage({id:"30bVmM",defaultMessage:"Add a note"}),xs=e=>e.formatMessage({id:"Qd1iC2",defaultMessage:"Sharing..."}),Ds=(e,t)=>"editor"===t[".tag"]?(e=>e.formatMessage({id:"J3CMt1",defaultMessage:"can edit"}))(e):(e=>e.formatMessage({id:"xOIBKS",defaultMessage:"can view"}))(e),Ps=e=>e.formatMessage({id:"nf2M+i",defaultMessage:"There was a problem completing this request."}),Fs=e=>e.formatMessage({id:"PbG9/M",defaultMessage:"You don’t have access to this content."}),$s=e=>e.formatMessage({id:"ktVMZy",defaultMessage:"Your team settings don’t allow sharing outside your team."}),Hs=e=>e.formatMessage({id:"KWUYO4",defaultMessage:"You’ve hit the limit of invites for today. Try again later."}),Bs=e=>e.formatMessage({id:"CTRWVL",defaultMessage:"You don’t have permission to do this. Contact the owner."}),Us=e=>e.formatMessage({id:"xoQiJt",defaultMessage:"You haven’t verified your email. Check your email and try again."}),js=e=>e.formatMessage({id:"kJSilf",defaultMessage:"Couldn’t share, but it might work if you reload the page and try again."}),Vs=e=>e.formatMessage({id:"ebZyPl",defaultMessage:"You’re sharing with too many people."}),Gs=e=>e.formatMessage({id:"Bcojaq",defaultMessage:"Contact support"}),qs=(e,t)=>e.formatMessage({id:"0UrAT5",defaultMessage:"Couldn’t create shared folder. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t}),zs=e=>e.formatMessage({id:"/sRvdA",defaultMessage:"Folder updates in progress — please try again later."}),Ws=e=>e.formatMessage({id:"b0sjjf",defaultMessage:"Learn more"}),Zs=e=>e.formatMessage({id:"O1FxvA",defaultMessage:"This folder can only be shared as a link."}),Ks=e=>e.formatMessage({id:"QpEuIr",defaultMessage:"You can view this folder, but you’ll need to ask the folder owner to give you permission to share it."}),Ys=e=>e.formatMessage({id:"/8sefF",defaultMessage:"You can view this folder, but only the folder owner can share it."}),Qs=(e,t)=>t?e.formatMessage({id:"1HgFQB",defaultMessage:"Couldn’t remove members. Try again."}):e.formatMessage({id:"ypun4U",defaultMessage:"Couldn’t share folder. Try sharing again."}),Js="share-modal-evolution-access-level-dropdown",Xs=`${Js}__audience-text`,el=`${Js}__portaled-menu`,tl=({store:e})=>{const t=n.useIntl(),a=i.useStore(e.$canInviteEditor),r=i.useStore(e.$canInviteViewer),s=i.useStore(e.$sharingAccessLevel),l=i.useStore(e.$isInviteSending),d=(a?1:0)+(r?1:0),c=(e=>{const t=Pt();return T.useCallback((a=>{const n=e.$sharingAccessLevel.get();t("SHARE_MODAL_SHARE__LINK_ACCESS_LEVEL__CHANGE",{previous:n,next:{".tag":a}}),e.$sharingAccessLevel.set({".tag":a})}),[e,t])})(e);return T.createElement(o.Box,{className:o.cx([`${Js}`,d>1?`${Js}__with-menu`:void 0]),borderRadius:"Small",style:{minWidth:"auto",display:"flex",whiteSpace:"pre-wrap",flexWrap:"wrap",alignItems:"center"},"data-testid":"access-level-dropdown"},T.createElement(o.Text,{className:Xs,"data-testid":"invite-audience",color:l?"disabled":"standard",size:"small"},(e=>e.formatMessage({id:"OGm4kF",defaultMessage:"People added"}))(t)," "),1===d?T.createElement(o.Text,{className:Xs,isBold:!0,size:"small",color:l?"disabled":"standard"},Ds(t,s)):T.createElement(o.Menu.Wrapper,{onSelection:c,style:{verticalAlign:"bottom",whiteSpace:"nowrap"},className:el},(({getContentProps:e,getTriggerProps:n})=>T.createElement(T.Fragment,null,T.createElement(o.Button,{...n(),variant:"transparent",withDropdownIcon:!0,size:"small",style:{marginTop:"1px",position:"relative"},disabled:l},Ds(t,s)),T.createElement(o.Menu.Content,{"data-sharing-sdk":"1",...e(),placement:"bottom-end"},T.createElement(o.Menu.Segment,null,r?T.createElement(o.Menu.SelectItem,{key:"view",value:"viewer",selected:"editor"!==s[".tag"]},T.createElement(o.Text,null,Ds(t,cn))):null,a?T.createElement(o.Menu.SelectItem,{key:"edit",value:"editor",selected:"editor"===s[".tag"]},T.createElement(o.Text,null,Ds(t,_n))):null))))))};tl.displayName="AccessLevelDropdown";const al=e=>e.reduce(((e,t)=>({[gi(t.member)]:t,...e})),{}),nl=la({name:"sharing.validateTargets"},(e=>t=>sa(e.sharingTargetsValidate(t)))),rl=e=>{const t=(e=>{const t=va(nl),a=Pt();return T.useCallback((async()=>{const n=e.$inviteTargets.get();if(0===n.length)return void e.$inviteTargetValidations.set({});const r=e.$sharingAccessLevel.get(),i=e.$objectMetadata.get(),s=e.$inviteTargetsWithInvalidEmails.get().reduce(((e,t)=>({...e,[Y(t)]:{member:X(t),result:{".tag":"disallowed",disallowed:{".tag":"invalid_target"}},target_invite_eligibility:{".tag":"other"}}})),{});if(e.$inviteTargetValidations.set({...e.$inviteTargetValidations.get(),...s}),0===e.$inviteTargetsWithValidEmails.get().length)return;const l=Object.values(e.$inviteTargetValidations.get()).map((e=>e?gi(e.member):null)),d=e.$inviteTargetsWithValidEmails.get().filter((e=>{const t=gi(X(e));return!l.includes(t)}));if(0===d.length)return;const c=o.getIsFile(i)?"file":"folder",_=e.$objectIdentifierId.get();a("SHARE_MODAL_SHARE__PREVALIDATION__API_START",null);const u=await t({access_level:r,content_id:_,content_type:{".tag":c},members:d.map(X)});if("ERROR"===u.status)return void a("SHARE_MODAL_SHARE__PREVALIDATION__API_ERROR",{error:u.error});if("FATAL"===u.status)return void a("SHARE_MODAL_SHARE__PREVALIDATION__API_FATAL",{error:u.error});a("SHARE_MODAL_SHARE__PREVALIDATION__API_SUCCESS",null);const m=e.$inviteTargets.get(),g=e.$sharingAccessLevel.get(),p=e.$objectMetadata.get(),E=un(e.$objectIdentifier.get());n===m&&r===g&&_===E&&i===p&&e.$inviteTargetValidations.set({...e.$inviteTargetValidations.get(),...al(u.output.results)})}),[e,t,a])})(e);T.useEffect((()=>{const a=[e.$inviteTargets.obs(t),e.$sharingAccessLevel.obs((()=>{t()})),e.$objectIdentifierId.obs((()=>{e.$inviteTargetValidations.set({}),t()}))];return e.$props.get().inviteTargets.length>0&&t(),()=>a.forEach((e=>e()))}),[e,t])},ol=la({name:"sharing.addFileMember"},(e=>t=>sa(e.sharingAddFileMember(t)))),il=la({name:"sharing.addFolderMember"},(e=>t=>sa(e.sharingAddFolderMember(t))));function sl(e){return{class:"sharing_sender",action:"initiate",object:"post_share_action",properties:e}}const ll=Symbol("ON_SHOW_ADMIN_INVITE_AFTER_SHARING_MODAL"),dl=Symbol("ON_SHOW_MEMBER_INVITE_AFTER_SHARING_MODAL"),{useEmitter:cl,defaultEmitter:_l}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r),isSm24:"true"};e.key!==ll?e.key!==dl||o.UDCL.logEvent(sl({postShareAction:"member_invite_after_sharing_modal",numInviteEligibleUsers:e.payload.numInviteEligibleUsers}),{tags:i}):o.UDCL.logEvent(sl({postShareAction:"admin_invite_after_sharing_modal",numInviteEligibleUsers:e.payload.numInviteEligibleUsers}),{tags:i})})),ul=()=>{const t=o.useGetContextValue(),a=cl();return T.useCallback((async n=>{var r,i;pl(n.objectIdentifier,n.objectMetadata),n.user&&o.markMilestoneAsCompleted(n.user,E.ActivationTileMilestoneId.SHARE_CONTENT);const{inviteEligibleNotSeenContacts:s,inviteEligibleSeenContacts:l,inviteEligibleSeenResurfaceContacts:d}=gl(n.inviteTargets,n.targetsValidateResult),c=z(s,l,d),_=null===(r=n.sharingPrefs.invite_after_sharing_modal_variant)||void 0===r?void 0:r[".tag"],u="ON"===n.sharingPrefs.invite_after_sharing_resurface_variant;if(_&&Z(s,d,_,u)){const r=null===(i=t(Wa))||void 0===i?void 0:i.tiburonOrigin;if("admin_invite_expand_eligibility"===_)if(1===c.length){const e=Date.now();ml().then((t=>{a.select(ll).emit({numInviteEligibleUsers:c.length}),t({eligibleUsers:c,adminModalVariant:_,modalOrigin:r,modalLoadingStartTime:e})}))}else{const e=Date.now();ml().then((t=>{a.select(ll).emit({numInviteEligibleUsers:c.length}),t({eligibleUsers:c,adminModalVariant:_,modalOrigin:r,modalLoadingStartTime:e})}))}else if(W(_)){const t=Date.now(),o=n.sharingPrefs.num_available_licenses;(async function(){const{showMemberInviteAfterSharingModal:t}=await new Promise((function(t,a){e(["./c_modals_invite_after_sharing_member_invite_after_sharing_modal"],t,a)}));return t})().then((e=>{a.select(dl).emit({numInviteEligibleUsers:c.length}),e({eligibleUsers:c,memberModalVariant:_,sharingOrigin:r,modalLoadingStartTime:t,numAvailableLicenses:o})}))}}}),[t,a])};async function ml(){const{showAdminInviteAfterSharingModal:t}=await new Promise((function(t,a){e(["./c_modals_invite_after_sharing_admin_invite_after_sharing_modal"],t,a)}));return t}const gl=(e,t)=>{const a=Object.fromEntries(e.map((e=>[Y(e),e]))),n=[],r=[],o=[];for(const e of t.results){const t=gi(e.member);a.hasOwnProperty(t)&&("eligible_not_seen"===e.target_invite_eligibility[".tag"]?n.push(a[t]):"eligible_seen"===e.target_invite_eligibility[".tag"]?r.push(a[t]):"eligible_seen_resurface"===e.target_invite_eligibility[".tag"]&&o.push(a[t]))}return{inviteEligibleNotSeenContacts:n.map((e=>it(e))),inviteEligibleSeenContacts:r.map((e=>it(e))),inviteEligibleSeenResurfaceContacts:o.map((e=>it(e)))}},pl=(e,t)=>{if(o.getIsFile(t)){const t=[un(e)];f.getStoreForSharedWith().dispatch(f.sharedFileDataOutOfDate(t))}else f.getStoreForSharedWith().dispatch(f.sharedFolderDataOutOfDate())},El=["access_denied","path","not_found","email_not_verified","settings_error","not_authorized","undefined_error","banned_member","failed_copy_to_clipboard","invalid_logged_out_cookie","internal_error","other","contacts_error","rate_limit","bad_member","access_error","cant_share_outside_team","no_permission","too_many_invitees","invalid_csrf_token","invalid","user_not_logged_in","too_many_files","total_mounts_exceeded","home_mounts_exceeded","tree_size_exceeded","invalid_shared_folder","invalid_comment","team_policy_disallows_member_policy","disallowed_shared_link_policy","insufficient_plan","invalid_email","network","team_folder","too_many_members","too_many_pending_invites","already_shared"];function fl(e){return El.find((t=>t===(null==e?void 0:e.toLowerCase())))}function hl(e){return{class:"share",action:"initiate",object:"progressive_inband",properties:e}}function Sl(e){return{class:"sharing_sender",action:"hover",object:"flexible_sharing_entrypoint_action",properties:e}}function vl(e){return{class:"sharing_sender",action:"log",object:"flexible_sharing_entrypoint_action_dwell_time",properties:e}}function Al(e){return{class:"sharing_sender",action:"select",object:"flexible_sharing_entrypoint_action",properties:e}}const bl=Symbol("ON_CLICK_PROGRESSIVE"),yl=Symbol("ON_MOUSE_ENTER_PROGRESSIVE"),Ml=Symbol("ON_MOUSE_LEAVE_PROGRESSIVE"),Il=Symbol("ON_IMMEDIATE_TRANSITION"),Tl=Symbol("ON_INVITE__START"),Cl=Symbol("ON_ADD_FILE_MEMBER_API_ERROR"),Rl=Symbol("ON_ADD_FILE_MEMBER_API_FATAL"),wl=Symbol("ON_ADD_FILE_MEMBER_API_SUCCESS"),Nl=Symbol("ON_SHARE_FILE_FOLDER_FAILURE"),Ll=Symbol("ON_SHARE_FILE_FOLDER_FAILURE_CONTINUE"),kl=Symbol("ON_ADD_FOLDER_MEMBER_API_ERROR"),Ol=Symbol("ON_ADD_FOLDER_MEMBER_API_FATAL"),xl=Symbol("ON_ADD_FOLDER_MEMBER_API_SUCCESS"),{useEmitter:Dl,defaultEmitter:Pl}=o.defineLogger((async({event:e,getContextValue:t})=>{var a,n;const r=t(Wa),i=t(Ga),s=t(Mn),l=t(Ya),d=o.getShareModalTypeFromString("sm24"),c={...Za(r),...qa(i),...In(s)},_={...Ka(r),...za(i),...Tn(s)};if(e.key===bl)return o.UDCL.logEvent(Al({..._,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...c,action:"inband_progressive"}}),o.UDCL.logEvent(vl({..._,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...c,action:"inband_progressive"}}),void o.UDCL.logStart(hl({..._}),{tags:{...c,isSm24:"sm24"===_.shareModalType?"true":"false",screen:(null===(a=_.screen)||void 0===a?void 0:a.toString())||"unspecified"},key:l});if(e.key!==yl)if(e.key!==Ml)if(e.key!==Tl)if(e.key!==wl&&e.key!==xl)if(e.key!==Rl&&e.key!==Ol){if(e.key===Nl){const t=fl(v.inbandShareResponseToErrorEnum[e.payload.error])||"undefined_error";return o.UDCL.logEnd(v.PAP_Send_ShareInvite({numRecipients:e.payload.numRecipients,inbandAccessLevel:e.payload.accessLevel,isNewFolder:!1,shareInviteErrorReason:t,fromNotifyInherited:!1,eventState:"failed",shareModalType:d,actionElement:c.actionElement,actionSurface:c.actionSurface,isDir:"true"===c.isDir,screen:_.screen}),{tags:{...c,errorReason:t},eventState:"failed",key:e.payload.actionKey}),void o.UDCL.logEvent("ops.sm24.share_file_folder_failure",{tags:{...c,errorReason:e.payload.error}})}if(e.key!==Ll){if(e.key===kl){const t=fl(v.inbandShareResponseToErrorEnum[e.payload.error])||"undefined_error";return o.UDCL.logEnd(v.PAP_Send_ShareInvite({numRecipients:e.payload.numRecipients,inbandAccessLevel:e.payload.accessLevel,isNewFolder:!1,shareInviteErrorReason:t,fromNotifyInherited:!1,eventState:"failed",shareModalType:d,actionElement:c.actionElement,actionSurface:c.actionSurface,isDir:"true"===c.isDir,screen:_.screen}),{tags:{...c,errorReason:t},eventState:"failed",key:e.payload.actionKey}),void o.UDCL.logEvent("ops.sm24.add_folder_member_api_failure",{tags:{...c,errorReason:e.payload.error}})}if(e.key===Cl){const t=fl(v.inbandShareResponseToErrorEnum[e.payload.error])||"undefined_error";return o.UDCL.logEnd(v.PAP_Send_ShareInvite({numRecipients:e.payload.numRecipients,inbandAccessLevel:e.payload.accessLevel,isNewFolder:!1,shareInviteErrorReason:t,fromNotifyInherited:!1,eventState:"failed",shareModalType:d,actionElement:c.actionElement,actionSurface:c.actionSurface,isDir:"true"===c.isDir,screen:_.screen}),{tags:{...c,errorReason:t},eventState:"failed",key:e.payload.actionKey}),void o.UDCL.logEvent("ops.sm24.add_file_member_api_failure",{tags:{...c,errorReason:e.payload.error}})}return e.key===Il?(o.UDCL.logEvent(Al({..._,flexibleSharingEntryPointAction:"inband_immediate",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...c,action:"inband_immediate"}}),void o.UDCL.logEnd(hl({..._,eventState:"success"}),{tags:{...c,eventState:"success",isSm24:"sm24"===_.shareModalType?"true":"false",screen:(null===(n=_.screen)||void 0===n?void 0:n.toString())||"unspecified"},key:l})):o.exhausts(e,void 0)}o.UDCL.logEvent("ops.sm24.share_file_folder_failure",{tags:{...c,errorReason:e.payload.error}})}else o.UDCL.logEnd(v.PAP_Send_ShareInvite({numRecipients:e.payload.numRecipients,inbandAccessLevel:e.payload.accessLevel,isNewFolder:!1,shareInviteErrorReason:"network",fromNotifyInherited:!1,eventState:"failed",shareModalType:d,actionElement:c.actionElement,actionSurface:c.actionSurface,isDir:"true"===c.isDir,screen:_.screen}),{tags:{...c,errorReason:"network"},eventState:"failed",key:e.payload.actionKey});else o.UDCL.logEnd(v.PAP_Send_ShareInvite({validationTraceId:void 0,numRecipients:e.payload.numRecipients,inbandAccessLevel:e.payload.accessLevel,isNewFolder:!1,fromNotifyInherited:!1,sckeySha1:e.payload.sckeySha1,eventState:"success",shareModalType:d,actionElement:c.actionElement,actionSurface:c.actionSurface,isDir:"true"===c.isDir,screen:_.screen}),{tags:c,eventState:"success",key:e.payload.actionKey});else o.UDCL.logStart(v.PAP_Send_ShareInvite({numRecipients:e.payload.numRecipients,inbandAccessLevel:e.payload.accessLevel,isNewFolder:!1,fromNotifyInherited:!1,shareModalType:d,actionElement:c.actionElement,actionSurface:c.actionSurface,isDir:"true"===c.isDir,screen:_.screen}),{tags:c,key:e.payload.actionKey});else o.UDCL.logEvent(vl({..._,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...c,action:"inband_progressive"}});else o.UDCL.logEvent(Sl({..._,flexibleSharingEntryPointAction:"inband_progressive"}),{tags:{...c,action:"inband_progressive"}})})),Fl=e=>{const t=n.useIntl(),a=Jt(),r=Pt(),i=va(ol),s=va(il),l=va(nl),d=Oo(Xo),c=(()=>{const e=n.useIntl();return T.useCallback((t=>"access_error"===t.error[".tag"]?(di(Fs(e)),t.error[".tag"]):"user_error"===t.error[".tag"]&&"email_unverified"===t.error.user_error[".tag"]?(di(Us(e)),t.error.user_error[".tag"]):"invalid_comment"===t.error[".tag"]?(di(Ps(e)),t.error[".tag"]):"rate_limit"===t.error[".tag"]?(di(Hs(e)),t.error[".tag"]):(t.error[".tag"],di(Ps(e)),t.error[".tag"])),[e])})(),_=(()=>{const e=n.useIntl(),t=Jt();return T.useCallback((a=>"NetworkFailure"!==a.type&&"PollingNetworkFailure"!==a.type||429!==a.value.response.statusCode?"ApiError"===a.type&&"email_unverified"===a.value.response.error[".tag"]?(di(Us(e)),a.value.response.error[".tag"]):"ApiError"===a.type&&"no_permission"===a.value.response.error[".tag"]?(di(Bs(e)),a.value.response.error[".tag"]):"ApiError"!==a.type||"too_many_mounts"!==a.value.response.error[".tag"]||"tree_size_exceeded"!==a.value.response.error.too_many_mounts[".tag"]&&"home_mounts_exceeded"!==a.value.response.error.too_many_mounts[".tag"]&&"total_mounts_exceeded"!==a.value.response.error.too_many_mounts[".tag"]?"ApiError"===a.type&&"bad_path"===a.value.response.error[".tag"]&&"already_shared"===a.value.response.error.bad_path[".tag"]?a.value.response.error.bad_path[".tag"]:"PollingApiError"===a.type&&"internal_error"===a.value.response.error[".tag"]?(ci({intl:e,title:js(e),onHelpButtonClick:()=>t("/support"),helpButtonText:Gs(e)}),a.value.response.error[".tag"]):(di(Ps(e)),"PollingTimeout"===a.type?"network":"PollingFailed"===a.type?"failed":"ApiError"===a.type||"PollingApiError"===a.type?a.value.response.error[".tag"]:"undefined"):(ci({intl:e,title:qs(e,a.value.response.error.too_many_mounts.limit-a.value.response.error.too_many_mounts.current_count),onHelpButtonClick:()=>t(bs)}),a.value.response.error.too_many_mounts[".tag"]):(ci({intl:e,title:zs(e),onHelpButtonClick:()=>t("/help/9259")}),"network")),[e,t])})(),u=(()=>{const e=n.useIntl();return T.useCallback((t=>"access_error"===t.error[".tag"]?(di(Fs(e)),t.error[".tag"]):"email_unverified"===t.error[".tag"]?(di(Us(e)),t.error[".tag"]):"bad_member"===t.error[".tag"]?(di((e=>e.formatMessage({id:"ccjg/d",defaultMessage:"You entered an invalid name or email address."}))(e)),t.error[".tag"]):"cant_share_outside_team"===t.error[".tag"]?(di($s(e)),t.error[".tag"]):"too_many_members"===t.error[".tag"]||"too_many_pending_invites"===t.error[".tag"]?(di(Vs(e)),t.error[".tag"]):"insufficient_plan"===t.error[".tag"]?(di((e=>e.formatMessage({id:"A35Dw0",defaultMessage:"You need to upgrade your account to do this."}))(e)),t.error[".tag"]):"team_folder"===t.error[".tag"]?(di($s(e)),t.error[".tag"]):"no_permission"===t.error[".tag"]?(di(Bs(e)),t.error[".tag"]):"rate_limit"===t.error[".tag"]?(di(Hs(e)),t.error[".tag"]):(di(Ps(e)),t.error[".tag"])),[e])})(),m=Dl(),{user:g}=o.useActiveUser(),p=ul();return T.useCallback((async()=>{if(e.$isInviteSending.get())return;const n=e.$objectIdentifier.get(),E=e.$objectMetadata.get(),f=e.$inviteTargets.get(),h=e.$sharingAccessLevel.get()[".tag"],S={numRecipients:f.length,accessLevel:"viewer"===h?"view":"edit",actionKey:Math.random().toString()};if(r("SHARE_MODAL_SHARE__INVITE__START",null),m.select(Tl).emit(S),e.$props.get().onShareStart(null),e.$isInviteSending.set(!0),e.$inviteTargetsWithInvalidEmails.get().length>0)return;r("SHARE_MODAL_SHARE__INVITE__VALIDATION_API_START",null);const v=un(n),A=await l({members:e.$inviteTargetsWithValidEmails.get().map(X),content_type:{".tag":"file"===n[".tag"]?"file":"file_folder"===n[".tag"]?"folder":"shared_folder"},access_level:{".tag":h},content_id:v});"ERROR"===A.status&&r("SHARE_MODAL_SHARE__INVITE__VALIDATION_API_ERROR",{error:A.error}),"FATAL"===A.status&&r("SHARE_MODAL_SHARE__INVITE__VALIDATION_API_FATAL",{error:A.error}),"SUCCESS"===A.status&&(r("SHARE_MODAL_SHARE__INVITE__VALIDATION_API_SUCCESS",null),e.$inviteTargetValidations.set(al(A.output.results)));const b=e.$validationResult.get();if(b&&"error"===b.level)return r("SHARE_MODAL_SHARE__INVITE__CANCELLED",null),void e.$isInviteSending.set(!1);const y=e=>(r("SHARE_MODAL_SHARE__INVITE__NAVIGATE_ATTEMPT",null),e.preventDefault(),e.returnValue="",""),M=()=>{r("SHARE_MODAL_SHARE__INVITE__NAVIGATE_AWAY",null)};e.$props.get().onShareStart(null),window.addEventListener("beforeunload",y),window.addEventListener("unload",M);const I=()=>{e.$isInviteSending.set(!1),window.removeEventListener("beforeunload",y),window.removeEventListener("unload",M),e.$props.get().onShareFailure(null)},C=e.$props.get().inviteMessage,R=e.$shouldPostMessageAsComment.get();if("file"===n[".tag"]){r("SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_START",null);const e=await i({access_level:{".tag":h},file:v,members:f.map(X),custom_message:C,add_message_as_comment:R&&C.length>0});if("ERROR"===e.status){r("SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_ERROR",{response:e});const t=c(e);return m.select(Cl).emit({...S,error:t}),void I()}if("FATAL"===e.status)return r("SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_FATAL",{response:e}),m.select(Rl).emit(S),I(),void ci({intl:t,title:js(t),onHelpButtonClick:()=>a("/support"),helpButtonText:Gs(t)});r("SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_SUCCESS",{response:e});const n=e.output[0]&&e.output[0].sckey_sha1&&e.output[0].sckey_sha1;m.select(wl).emit({...S,sckeySha1:n})}if("file_folder"===n[".tag"]||"shared_folder"===n[".tag"]||"collection"===n[".tag"]){let a="file_folder"===n[".tag"]?"":"collection"===n[".tag"]?n.nsId:n.sharedFolderId;if("file_folder"===n[".tag"]){r("SHARE_MODAL_SHARE__INVITE__SHARE_FILE_FOLDER__START",null);const t=await d({path:n.path,timeout:12e4,interval:1e3});if(t.success)a=t.value.response.output.shared_folder_id;else{if("ApiError"!==t.type||"bad_path"!==t.value.response.error[".tag"]||"already_shared"!==t.value.response.error.bad_path[".tag"]){I(),r("SHARE_MODAL_SHARE__INVITE__SHARE_FILE_FOLDER__FAILURE",{output:t});const e=_(t);return void m.select(Nl).emit({...S,error:e})}{a=t.value.response.error.bad_path.shared_folder_id;const e=_(t);m.select(Ll).emit({...S,error:e})}}r("SHARE_MODAL_SHARE__INVITE__SHARE_FILE_FOLDER__SUCCESS",null),e.$props.get().onObjectIdentifierChanged({".tag":"shared_folder",sharedFolderId:a,fileId:n.fileId}),await o.invalidateSharingObjectMetadata(n),o.isNewApiMetadata(E)&&await o.invalidateNewApiObjectMetadata(n),await e.$props.get().onRefreshObjectMetadata()}r("SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_START",null);const i=await s({shared_folder_id:a,...{...C?{custom_message:C}:{}},members:f.map((e=>({access_level:{".tag":h},member:X(e)})))});if("ERROR"===i.status){r("SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_ERROR",{response:i});const e=u(i);return m.select(kl).emit({...S,error:e}),void I()}if("FATAL"===i.status)return r("SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_FATAL",{response:i}),m.select(Ol).emit(S),I(),void di(js(t));r("SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_SUCCESS",{response:i});const l={".tag":"shared_folder",sharedFolderId:a,fileId:n.fileId};await o.invalidateObjectMembers(l),await o.invalidateSharingObjectMetadata(l);const c=void 0;m.select(xl).emit({...S,sckeySha1:c})}e.$isInviteSending.set(!1),window.removeEventListener("beforeunload",y),window.removeEventListener("unload",M),si(((e,t)=>e.formatMessage({id:"lvjqTm",defaultMessage:"Shared <st>{name}</st>."},{st:e=>T.createElement("strong",{key:o.getName(t)},e),name:G.em_snippet(o.getName(t),o.SNIPPET_SIZES.FILENAME)}))(t,E)),e.$props.get().onInbandShareSuccess(null),"SUCCESS"===A.status&&p({objectMetadata:E,objectIdentifier:n,inviteTargets:f,targetsValidateResult:A.output,sharingPrefs:e.$sharingPrefs.get(),user:g})}),[e,i,l,s,d,t,r,c,_,u,m,p,a,g])},$l=e=>{const t=n.useIntl(),a=Pt(),r=e.$objectMetadata.get();return T.useCallback((async(n,i,s,l,d=!1)=>{d?await e.$props.get().onRefreshModal():await e.$props.get().onRefreshObjectMetadata();const c=((e,t,a)=>{const n=o.getName(a),r=o.getParentFolderName(a);return t?e.formatMessage({id:"7POTZF",defaultMessage:"Members removed from <strong>{folderName}</strong>."},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.createElement("strong",null,e)}):void 0===r||""===r?e.formatMessage({id:"nni9pE",defaultMessage:"<strong>{folderName}</strong> shared with everyone."},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.createElement("strong",null,e)}):e.formatMessage({id:"qvP8A+",defaultMessage:"<strong>{folderName}</strong> shared with members of <strong>{parentFolderName}</strong>."},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),parentFolderName:G.em_snippet(r,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.createElement("strong",null,e)})})(t,i,r);s?li({title:c,onUndoClick:()=>null==l?void 0:l(n)}):si(c),a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SET_CONFIDENTIALITY__FINISH",null)}),[t,a,r,e.$props])},Hl=e=>{const t=n.useIntl(),a=Pt(),r=Oo(Ko),i=Oo(Xo),s=$l(e),l=e.$objectMetadata.get();return T.useCallback((async(n,d,c,_)=>{if("shared_folder"!==n[".tag"]&&"file_folder"!==n[".tag"])return;a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SET_CONFIDENTIALITY__START",null),_i(((e,t,a)=>{const n=o.getName(a),r=o.getParentFolderName(a);return t?e.formatMessage({id:"5xCeTo",defaultMessage:"Removing members from <strong>{folderName}</strong>…"},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.createElement("strong",null,e)}):""===r?e.formatMessage({id:"90I244",defaultMessage:"Sharing <strong>{folderName}</strong> with everyone…"},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.createElement("strong",null,e)}):e.formatMessage({id:"16RnmU",defaultMessage:"Sharing <strong>{folderName}</strong> with members of <strong>{parentFolderName}</strong>…"},{folderName:G.em_snippet(n,o.SNIPPET_SIZES.FOLDER_NAME),parentFolderName:G.em_snippet(r,o.SNIPPET_SIZES.FOLDER_NAME),strong:e=>T.createElement("strong",null,e)})})(t,d,l));let u=n;if("file_folder"===u[".tag"]){a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SHARE_FILE_FOLDER__API_START",null);const r=await i({path:u.path,confidentiality:d?{".tag":"confidential"}:{".tag":"not_confidential"},timeout:12e4,interval:1e3});if(r.success)return a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SHARE_FILE_FOLDER__API_SUCCESS",null),u={".tag":"shared_folder",sharedFolderId:r.value.response.output.shared_folder_id,fileId:n.fileId},e.$props.get().onObjectIdentifierChanged(u),o.isNewApiMetadata(l)&&await o.invalidateNewApiObjectMetadata(n),s(u,d,c,_),void o.invalidateObjectMembers(u);if("ApiError"!==r.type||"bad_path"!==r.value.response.error[".tag"]||"already_shared"!==r.value.response.error.bad_path[".tag"])return a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SHARE_FILE_FOLDER__API_FAILURE",null),void di(Qs(t,d));a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SHARE_FILE_FOLDER__API_SUCCESS",null),u={".tag":"shared_folder",sharedFolderId:r.value.response.error.bad_path.shared_folder_id,fileId:n.fileId},e.$props.get().onObjectIdentifierChanged(u),o.isNewApiMetadata(l)&&await o.invalidateNewApiObjectMetadata(n),await e.$props.get().onRefreshObjectMetadata(),a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SHARE_FILE_FOLDER__API_SUCCESS",null)}a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SET_ACCESS_INHERITANCE__API_START",null);if(!(await r({setAccessInheritanceArg:{access_inheritance:d?{".tag":"no_inherit"}:{".tag":"inherit"},shared_folder_id:u.sharedFolderId},timeout:12e4,interval:1e3})).success)return a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SET_ACCESS_INHERITANCE__API_FAILURE",null),void di(Qs(t,d));a("SHARE_MODAL_SHARE__CHANGE_CONFIDENTIALITY__SET_ACCESS_INHERITANCE__API_SUCCESS",null),s(u,d,c,_,!0),o.invalidateObjectMembers(u)}),[t,a,l,s,r,i,e.$props])},Bl=(e,t,a)=>a?((e,t)=>e.formatMessage({id:"6jTcuT",defaultMessage:"Share with {teamName}"},{teamName:G.em_snippet(t,o.SNIPPET_SIZES.DISPLAY_NAME)}))(e,t):(e=>e.formatMessage({id:"P5jM9e",defaultMessage:"Share"}))(e),Ul=(e,t,a,n,r)=>r?((e,t,a)=>e.formatMessage({id:"ipUgQi",defaultMessage:"Share <b>{folderName}</b> with everyone at {teamName}?"},{folderName:G.em_snippet(t,o.SNIPPET_SIZES.FOLDER_NAME),teamName:G.em_snippet(a,o.SNIPPET_SIZES.DISPLAY_NAME),b:e=>T.createElement("b",{style:{fontWeight:"var(--type__title__standard--fontweight_strong)"}},e)}))(e,a,t):((e,t,a)=>e.formatMessage({id:"znRNbl",defaultMessage:"Share <b>{folderName}</b> with everyone who can access <b>{parentFolderName}</b>?"},{folderName:G.em_snippet(t,o.SNIPPET_SIZES.FOLDER_NAME),parentFolderName:G.em_snippet(a,o.SNIPPET_SIZES.FOLDER_NAME),b:e=>T.createElement("b",{style:{fontWeight:"var(--type__title__standard--fontweight_strong)"}},e)}))(e,a,n),jl=(e,t,a,n,r)=>r?((e,t,a)=>e.formatMessage({id:"R8xJiq",defaultMessage:"<b>{folderName}</b> won’t be shared privately any more. Everyone at {teamName} will have access to this folder."},{folderName:t,teamName:a,b:e=>T.createElement("b",{style:{fontWeight:"var(--type__body__standard--fontweight_strong)"}},e)}))(e,a,t):((e,t)=>e.formatMessage({id:"ioGEl6",defaultMessage:"Everyone who can access <b>{parentFolderName}</b> will be able to access this folder."},{parentFolderName:t,b:e=>T.createElement("b",{style:{fontWeight:"var(--type__body__standard--fontweight_strong)"}},e)}))(e,n),Vl=({store:e})=>{const t=n.useIntl(),a=i.useStore(e.$changeConfidentialityData),r=(e=>T.useCallback((()=>{e.$changeConfidentialityData.set(null)}),[e]))(e),s=(e=>{const t=Hl(e),a=e.$objectIdentifier.get();return T.useCallback((async e=>t(a,e,!0,(async a=>t(a,!e,!1)))),[a,t])})(e),l=i.useStore(e.$objectMetadata);if(!a)return null;const d=o.getName(l),c=o.getParentFolderName(l),_=""===c,u=Bl(t,a.teamName,_),m=Ul(t,a.teamName,d,c,_),g=jl(t,a.teamName,d,c,_);return T.createElement(T.Fragment,null,T.createElement(o.Modal$1,{open:!0,isCentered:!0,withCloseButton:"Close",onRequestClose:r},T.createElement(o.Modal$1.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},T.createElement(o.Modal$1.Title,null,m)),T.createElement(o.Modal$1.Body,{"data-sharing-sdk":"1"},g),T.createElement(o.Modal$1.Footer,{"data-sharing-sdk":"1"},T.createElement(o.Button,{variant:"opacity",onClick:r},(e=>e.formatMessage({id:"i3tRYX",defaultMessage:"Cancel"}))(t)),T.createElement(o.Button,{variant:"primary",onClick:()=>{s(!1),r()}},u))))};function Gl({message:e,variant:t}){if(!e)return null;const a="error"===t?"alert":"attention";return T.createElement(o.Banner,{type:a},T.createElement(o.Banner.Message,{className:"scl-sharing-modal-validation-warning__message"},e))}Vl.displayName="ChangeConfidentialityModal";o.injectInternalStyle("/static/metaserver/static/js/sharing/features/shareme24/inband/message-field.module.out-vflz4Lojh.css",(e=>"._message-field_18h2c_1{display:flex;flex-grow:1;margin-bottom:-3px;padding-top:0}._message-field_18h2c_1 textarea{background-color:var(--dig-color__background__base);border:1px solid var(--dig-color__border__subtle);flex-grow:1;height:auto}"));const ql="_message-field_18h2c_1",zl=({store:e})=>{const t=n.useIntl(),a=i.useStore(e.$inviteMessage),r=i.useStore(e.$isInviteSending),s=(e=>{const t=Pt();return T.useCallback((a=>{t("SHARE_MODAL_SHARE__MESSAGE_CHANGED",null),e.$inviteMessage.set(a.target.value),e.$props.get().onInviteMessageChange(a.target.value)}),[e,t])})(e);return T.createElement(o.Box,{className:ql,paddingTop:"Micro Large"},T.createElement(o.TextArea,{value:a,placeholder:ks(t),"aria-label":Os(t),onChange:s,disabled:r,"data-testid":"ib-message-field-textarea"}))};zl.displayName="MessageField";o.injectInternalStyle("/static/metaserver/static/js/sharing/features/shareme24/inband/share-modal-share.module.out-vflH0E76y.css",(e=>"._action-row_18xx2_1{display:flex;flex-direction:column;min-height:310px;row-gap:var(--dig-spacing__micro__medium);width:100%}._action-section_18xx2_12{border:1px solid var(--dig-color__border__subtle);border-radius:var(--dig-radius__medium);position:relative;transition:border var(--duration__micro-fast) var(--easing__transition);z-index:1}._action-section-top_18xx2_21{padding:var(--dig-spacing__micro__medium)}._action-section-active_18xx2_25{border-color:var(--dig-color__secondary__base);box-shadow:none}._action-section-active_18xx2_25,._action-section-active_18xx2_25:hover,._action-section_18xx2_12:focus-within{box-shadow:var(--dig-utilities__boxshadow__focus-ring);transition:box-shadow var(--duration__micro-fast) var(--easing__transition)}._accessory-section_18xx2_37{animation:_fade-in_18xx2_1 var(--duration__micro-fast) var(--easing__transition) forwards;display:flex;flex-direction:column;flex-grow:1;height:100%;row-gap:var(--dig-spacing__micro__medium);width:100%}@keyframes _fade-in_18xx2_1{0%{opacity:0}to{opacity:1}}._action-section-bottom_18xx2_57{align-items:center;display:flex;height:32px;justify-content:space-between}._add-icon-small_18xx2_65{height:var(--dig-spacing__dimension__24);margin-top:var(--dig-spacing__dimension__6);min-width:var(--dig-spacing__dimension__24);width:var(--dig-spacing__dimension__24)}._add-icon-small_18xx2_65 svg{height:var(--dig-spacing__dimension__16);width:var(--dig-spacing__dimension__16)}._add-icon_18xx2_65,._add-icon_18xx2_65>svg{transition:min-width var(--duration__surface) var(--easing__transition),width var(--duration__surface) var(--easing__transition),background-color var(--duration__surface) var(--easing__transition),color var(--duration__surface) var(--easing__transition),height var(--duration__surface) var(--easing__transition),margin-top var(--duration__surface) var(--easing__transition)}._add-icon-shrink_18xx2_90{animation:_shrink-icon_18xx2_1 var(--duration__micro-fast) var(--easing__transition) forwards}._add-icon-shrink_18xx2_90>svg{animation:_shrink-icon-svg_18xx2_1 var(--duration__micro-fast) var(--easing__transition) forwards}@keyframes _shrink-icon_18xx2_1{0%{height:var(--dig-spacing__dimension__36);margin-top:0;min-width:var(--dig-spacing__dimension__36);width:var(--dig-spacing__dimension__36)}to{height:var(--dig-spacing__dimension__24);margin-top:5px;min-width:var(--dig-spacing__dimension__24);width:var(--dig-spacing__dimension__24)}}@keyframes _shrink-icon-svg_18xx2_1{0%{height:var(--dig-spacing__dimension__24);width:var(--dig-spacing__dimension__24)}to{height:var(--dig-spacing__dimension__16);width:var(--dig-spacing__dimension__16)}}._add-members-directly-action-section_18xx2_139{border-color:var(--dig-color__border__subtle);border-radius:var(--dig-radius__small);border-style:solid;border-width:2px;position:relative;z-index:1}._add-members-directly-action-section_18xx2_139 ._add-icon_18xx2_65{margin-top:0}._add-members-directly-action-section-active_18xx2_152,._add-members-directly-action-section_18xx2_139:focus-within{border-color:var(--dig-color__utility__focus-ring)}._add-members-directly-action-section-active_18xx2_152 ._add-icon_18xx2_65,._add-members-directly-action-section_18xx2_139:focus-within ._add-icon_18xx2_65,._add-members-directly-action-section_18xx2_139:hover ._add-icon_18xx2_65{background:var(--dig-color__primary__base);color:var(--dig-color__background__base)}._add-members-directly-action-section-bottom_18xx2_164{padding:var(--dig-spacing__micro__medium);padding-top:var(--dig-spacing__micro__medium)}._add-members-directly-action-section-active_18xx2_152 ._add-icon-sending_18xx2_169,._add-members-directly-action-section_18xx2_139:focus-within ._add-icon-sending_18xx2_169,._add-members-directly-action-section_18xx2_139:hover ._add-icon-sending_18xx2_169{background:var(--dig-color__disabled__base)}._add-members-directly-action-section_18xx2_139 ._add-icon-sending_18xx2_169>svg,._add-members-directly-action-section-active_18xx2_152 ._add-icon-sending_18xx2_169>svg,._add-members-directly-action-section_18xx2_139:focus-within ._add-icon-sending_18xx2_169>svg,._add-members-directly-action-section_18xx2_139:hover ._add-icon-sending_18xx2_169>svg{color:var(--dig-color__disabled__on-surface)}"));const Wl="_action-row_18xx2_1",Zl="_action-section_18xx2_12",Kl="_action-section-top_18xx2_21",Yl="_action-section-active_18xx2_25",Ql="_accessory-section_18xx2_37",Jl="_action-section-bottom_18xx2_57",Xl="_add-icon-small_18xx2_65",ed="_add-icon_18xx2_65",td="_add-icon-shrink_18xx2_90",ad="_add-members-directly-action-section_18xx2_139",nd="_add-members-directly-action-section-active_18xx2_152",rd="_add-icon-sending_18xx2_169",od=/^['#&A-Za-z0-9._%+-]+@[A-Za-z0-9-][A-Za-z0-9.-]*\.[A-Za-z]{2,15}$/,id=e=>{const t=n.useIntl(),a=Pt(),r=T.useRef(null),s=T.useRef(null);return i.useInitStore(e,(e=>{const n=i.proxy((()=>e.get().accountMetadata)),l=i.proxy((()=>e.get().hasUpdatedAccountMetadata)),d=i.proxy((()=>e.get().objectIdentifier)),c=i.proxy((()=>e.get().objectMetadata)),_=i.proxy((()=>e.get().sharingPrefs)),u=i.proxy((()=>un(d.get()))),m=i.proxy((()=>e.get().inviteTargets),(t=>e.get().onInviteTargetsChange(t))),g=i.store(e.get().inviteMessage),p=i.proxy((()=>o.getIsFolder(c.get()))),E=i.proxy((()=>o.getIsConfidentialFolder(c.get()))),f=i.store({}),h=i.proxy((()=>o.getCanInvite(c.get(),cn))),S=i.proxy((()=>o.getCanInvite(c.get(),_n))),v=i.store(!1),A=i.proxy((()=>S.get()||h.get())),b=(e=>{const t=e.default_sharing_access_level_setting;if(!t)return o.EDITOR;switch(t[".tag"]){case o.SharingAccessLevel.VIEW:return o.VIEWER;case o.SharingAccessLevel.UNKNOWN:case o.SharingAccessLevel.EDIT:default:return o.EDITOR}})(_.get()),y=S.get()?b:cn,M=i.store(y),I=i.proxy((()=>o.getCanDoAction(c.get(),{".tag":"share_message_as_comment"}))),T=i.store(!1),C=i.proxy((()=>m.get().filter((e=>"group"===e[".tag"]||od.test(e.email))))),R=i.proxy((()=>m.get().filter((e=>"group"!==e[".tag"]&&!od.test(e.email))))),w=i.proxy((e=>{let n=null;const r=m.get(),i=f.get(),s=Object.values(i).reduce(((e,t)=>"allowed"===t.result[".tag"]&&"outside_of_team"===t.result.allowed[".tag"]||"disallowed"===t.result[".tag"]&&"outside_of_team"===t.result.disallowed[".tag"]?e+1:e),0);for(const e of r){const r=i[Y(e)];if(r)if("disallowed"===r.result[".tag"]){const i=r.result.disallowed[".tag"];if("invalid_target"===i){n={level:"error",message:Ls(t)};break}if("invalid_member"===i){n={level:"error",message:Is(t)};break}if("outside_of_team"===i)n={level:"error",message:s>1?Ts(t):Cs(t)};else if("no_permission"===i){const a=c.get();n=o.getIsCollection(a)&&"group"===e[".tag"]?{level:"error",message:t.formatMessage({id:"vLSoUY",defaultMessage:"Collection sharing for groups is currently not supported"})}:{level:"error",message:Rs(t)}}else"target_is_individual"===i?n={level:"error",message:ws(t)}:"target_not_same_team_restricted"===i?n={level:"error",message:Ns(t)}:(a("SHARE_MODAL_SHARE__PREVALIDATION__UNKNOWN_TAG",{value:i}),n={level:"error",message:Ls(t)})}else if(!n&&"allowed"===r.result[".tag"]){const e=r.result.allowed[".tag"];if("no_warning"===e)continue;"outside_of_team"===e?n=n||{level:"warn",message:s>1?ys(t):Ms(t)}:a("SHARE_MODAL_SHARE__PREVALIDATION__UNKNOWN_TAG",{value:e})}}return e&&n&&e.level===n.level&&e.message===n.message?e:n})),N=i.proxy((()=>o.getIsEditor(c.get()))),L=i.store(!1),k=i.store(null),O=i.store(!1),x=i.store(!1),D=i.store(0),P=i.store(0),F=i.proxy((()=>e.get().shouldStyleForSM21||!1));return{$accountMetadata:n,$canInviteEditor:S,$canInviteViewer:h,$canInvite:A,$canPostMessageAsComment:I,$hasAccessTypeEditor:N,$inviteTargets:m,$inviteTargetsWithInvalidEmails:R,$inviteTargetsWithValidEmails:C,$inviteTargetValidations:f,$inviteMessage:g,$isDataBeingUpdated:L,$isFolder:p,$isConfidentialFolder:E,$isInviteSending:T,$sharingAccessLevel:M,$objectIdentifier:d,$objectIdentifierId:u,$objectMetadata:c,$props:e,$shouldPostMessageAsComment:v,$sharingPrefs:_,$validationResult:w,$changeConfidentialityData:k,$hasUpdatedAccountMetadata:l,inbandInputAreaRef:r,inputRef:s,$isSuggestionsOpen:O,$isProgressiveButtonHovered:x,$progressiveButtonHoverStartTime:D,$componentViewTime:P,$shouldStyleForSM21:F}}))},sd=(e,t)=>{const a=e.linked_services.find((e=>e.service_type[".tag"]===t[".tag"]));return!!a&&"is_connected"===a.connection_state[".tag"]},ld=(e,t,a)=>{const n=e.linked_services.find((e=>e.service_type[".tag"]===t[".tag"]));return!!n&&n.granted_permissions.some((e=>e[".tag"]===a[".tag"]))},dd=la({name:"profileServices.listLinkedServices"},(e=>()=>sa(e.profileServicesListLinkedServices()))),cd=e=>e,_d=la({name:"sharing.targetsSearch"},(e=>async t=>{const a=await sa(e.sharingTargetsSearch(t));return"SUCCESS"===a.status?{status:ra.SUCCESS,output:a.output.entries.map(cd)}:a})),ud=Symbol("ON_SHOW_SUGGESTIONS"),md=Symbol("ON_SELECT_SUGGESTION"),{useEmitter:gd,defaultEmitter:pd}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r)};e.key!==ud?e.key!==md||o.UDCL.logEvent("ops.sm24.select_tokenizer_suggestion",{tags:{...i,method:e.payload.method,suggestionIndex:e.payload.index.toString()}}):o.UDCL.logEvent("ops.sm24.show_tokenizer_suggestions",{tags:{...i,numSuggestions:e.payload.numSuggestions.toString()}})}));o.injectInternalStyle("/static/metaserver/static/js/sharing/features/shareme24/tokenizer/tokenizer.module.out-vfluVFeYG.css",(e=>"._share-tokenizer_jmhe8_1{color-scheme:var(--dig-color-scheme);margin-top:var(--dig-spacing__dimension__4);max-height:80px;max-height:64px;max-width:100%;min-height:32px;min-width:auto;overflow-y:hidden;width:100%}._share-tokenizer-with-targets_jmhe8_16{overflow-y:scroll}._share-tokenizer-text-input-container_jmhe8_20{cursor:text;position:relative}._share-tokenizer-text-input-container_jmhe8_20,._share-tokenizer-text-input-container_jmhe8_20:focus-within,._share-tokenizer-text-input-container_jmhe8_20:has(input:focus){border:none;box-shadow:none;outline:none}._share-tokenizer-typeahead-container_jmhe8_33{border-radius:var(--dig-radius__small);transform:translate(-14px,20px);width:calc(100% + 28px)}._share-tokenizer-with-targets_jmhe8_16:not(._share-tokenizer_jmhe8_1) ._share-tokenizer-typeahead-container_jmhe8_33{transform:translate(-14px)}input._share-tokenizer-text-input_jmhe8_20[type=text]{font-family:var(--type__body__standard--fontfamily);font-size:var(--type__body__standard--fontsize);line-height:var(--type__body__standard--lineheight_label);min-height:var(--dig-spacing__dimension__24);min-width:2ch;width:0}._screen-reader-only_jmhe8_55{height:1px;left:-10000px;overflow:hidden;position:absolute;top:auto;width:1px}"));const Ed="_share-tokenizer_jmhe8_1",fd="_share-tokenizer-with-targets_jmhe8_16",hd="_share-tokenizer-text-input-container_jmhe8_20",Sd="_share-tokenizer-typeahead-container_jmhe8_33",vd="_share-tokenizer-text-input_jmhe8_20",Ad="_screen-reader-only_jmhe8_55",bd=/['&A-Za-z0-9\._%+-]+@[A-Za-z0-9-][A-Za-z0-9\.-]*\.[A-Za-z]{2,15}/gi,yd=/[,|;>\s]/,Md="Enter",Id="IMPORT_CONTACTS",Td=[Id],Cd="Google",Rd="/static/images/index/google-logo-color.svg",wd=e=>(e.match(bd)||[]).map(K),Nd=e=>T.useCallback((t=>{const a=t.currentTarget.value,n=(r=a,yd.test(r)?wd(r):[]);var r;i.batch((()=>{e.$isTypeaheadForcedOpen.set(!1),n.length>0?(e.$inviteTargets.set([...e.$inviteTargets.get(),...n]),e.$query.set("")):e.$query.set(a)}))}),[e]),Ld=e=>e.map((e=>{if("email"===e[".tag"]||"user"===e[".tag"]){const t=e.email.trim();return t.length===e.email.length?e:{...e,email:t}}return e})),kd=e=>{const t={};return e.filter((e=>{const a=Y(e);return!t[a]&&(t[a]=!0,!0)}))},Od=e=>{const t=va(_d),a=Pt(),r=n.useIntl();return T.useCallback((async()=>{const n=e.$query.get(),s=await t({query:n,force_refresh:!1,limit:10});if(e.$query.get()===n){if(a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_START",null),"SUCCESS"!==s.status)return"ERROR"===s.status?a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR",{response:s}):a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL",{response:s}),l=r.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}),ui(),o.Snackbar.generic(l,ii),void e.$searchSuggestionsRaw.set([]);var l;a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS",{response:s}),i.batch((()=>{e.$latestSuggestionsQuery.set(n),e.$searchSuggestionsRaw.set(s.output)}))}}),[e,t,a,r])},xd=e=>{const t=va(dd);return T.useCallback((async()=>{if(e.$isLinkedServicesUpdating.get())return;const a=await t(null);"SUCCESS"===a.status?i.batch((()=>{e.$linkedServices.set(a.output),e.$isLinkedServicesUpdating.set(!1)})):i.batch((()=>{e.$linkedServices.set(null),e.$isLinkedServicesUpdating.set(!1)}))}),[e,t])},Dd=e=>{const t=n.useIntl(),a=Pt(),r=xd(e),i=zt();return T.useCallback((async()=>{if(e.$isConnectingToGoogle.get()||null===i)return;e.$isConnectingToGoogle.set(!0);let n=null;const s=()=>{di(t.formatMessage({id:"sgP44K",defaultMessage:"Failed to connect your contacts from Google"})),null!==n&&clearInterval(n),window.removeEventListener("message",c),r().then((()=>{e.$isConnectingToGoogle.set(!1)}))},l=new URLSearchParams({service:"1",is_popup:"true",action:"link_contacts",prompt_select:"true",token:i,user_id:e.$user.get().id.toString(),is_desktop:"false"}),d=window.open(`/profile_services/start_auth_flow?${l.toString()}`,"Google","width=600,height=600,resizable=1,scrollbars=1");if(null===d)return s();n=setInterval((()=>{d.closed&&s()}),1e3);const c=i=>{let l;try{l=JSON.parse(i.data)}catch(e){return}if(o.isObjectOf({type:o.isExactly("db:profile_service:auth_complete"),payload:o.isObjectOf({success:o.isBoolean})})(l)){if(l.payload.success)return _=d,a("TEAMS_WEB",{name:o.TeamsWebEventName.ImportContactsComplete,extra:{provider:"google",path:window.location.pathname}}),si(t.formatMessage({id:"Au33+R",defaultMessage:"Successfully connected your contacts from Google"})),null!==n&&clearInterval(n),window.removeEventListener("message",c),r().then((()=>{e.$isConnectingToGoogle.set(!1)})),void(null==_||_.close());var _;s(),d.close()}};window.addEventListener("message",c)}),[e,t,a,r,i])},Pd=(e,t)=>"user"===e[".tag"]?wi(e.name,t.locale):"group"===e[".tag"]?Ri(e.name):"email"===e[".tag"]?"":o.exhausts(e,""),Fd=(e,t)=>"user"===e[".tag"]?t&&t!==e.dbx_team_id?e.email:e.name:"group"===e[".tag"]?e.name:"email"===e[".tag"]?e.email:"",$d=({store:e,target:t,isDisabled:a,maxChars:r})=>{const s=n.useIntl(),l=((e,t)=>T.useCallback((()=>{const a=e.$inviteTargets.get().filter((e=>e!==t));i.batch((()=>{e.$inviteTargets.set(a),e.$query.set("")}))}),[e,t]))(e,t),d=e.$user.get().team_dbtid,c=G.em_snippet(Fd(t,d),null!=r?r:o.SNIPPET_SIZES.EMAIL_SHORT,.6),_="user"===t[".tag"]&&d&&d!==t.dbx_team_id?"":Pd(t,s),u=Q(t),m=Y(t),g=i.useStore(e.$inviteTargetValidation)[m],p=g&&"allowed"===g.result[".tag"]&&"no_warning"!==g.result.allowed[".tag"]&&"not_dropbox_user"!==g.result.allowed[".tag"],E=g&&"disallowed"===g.result[".tag"],f=!!_||!!u,h=f&&T.createElement(o.Avatar,{src:u||"",size:"xsmall",hasNoOutline:!0,"aria-hidden":!0},_),S=s.formatMessage({id:"cVF7dM",defaultMessage:"Sharing with {label} - press backspace or delete to remove"},{label:c});return T.createElement(o.Chip,{size:"small",onDelete:l,variant:p?"attention":E?"alert":"standard",disabled:a,"aria-label":S},f&&T.createElement(o.Chip.AvatarAccessory,null,h),T.createElement(o.Chip.Content,null,c))};$d.displayName="EmailChip";const Hd=({target:e})=>{const t=n.useIntl(),a=Y(e),r=Pd(e,t),i=Fd(e),s=J(e,t),l=Q(e);return T.createElement(A.Typeahead.Row,{"data-testid":"typeahead-suggestion",className:"targets-tokenizer-suggestion",key:a,value:e,withTitle:i,withSubtitle:s,withLeftAccessory:T.createElement(o.Avatar,{src:l||void 0,hasNoOutline:!0,alt:i,"aria-hidden":"true"},r)})};Hd.displayName="Suggestion";const Bd=({results:e,suggestionMax:t})=>T.createElement("div",{className:Ad,"aria-live":"polite"},e.slice(0,t).map(((e,t)=>T.createElement("div",{key:t},e!==Id&&Fd(e)))));Bd.displayName="ScreenReaderLiveResults";const Ud=({store:e})=>{const t=n.useIntl(),a=i.useStore(e.$isConnectingToGoogle),r=i.useStore(e.$isConnectedToGoogle),s=i.useStore(e.$isLinkedServicesUpdating);return zt()?a?T.createElement(A.Typeahead.Row,{"data-testid":"typeahead-import-contacts",className:"typeahead-import-contacts",key:Id,withLeftAccessory:T.createElement(o.Avatar,{src:Rd}),value:Id,withTitle:Cd,withSubtitle:t.formatMessage({id:"JbMFlW",defaultMessage:"Importing contacts"})}):s?null:r?T.createElement(A.Typeahead.Row,{"data-testid":"typeahead-import-contacts",className:"typeahead-import-contacts",key:Id,withLeftAccessory:T.createElement(o.Avatar,{src:Rd}),value:Id,withTitle:Cd,withSubtitle:t.formatMessage({id:"2/+46g",defaultMessage:"Connected"})}):T.createElement(A.Typeahead.Row,{"data-testid":"typeahead-import-contacts",className:"typeahead-import-contacts",key:Id,withLeftAccessory:T.createElement(o.Avatar,{src:Rd}),value:Id,withTitle:Cd,withSubtitle:t.formatMessage({id:"CkYgqG",defaultMessage:"Sign in to import contacts"})}):null};Ud.displayName="ImportContacts";const jd=e=>{var t;const a=(e=>i.useInitStore(e,(e=>{var t;const a=i.store(!1),n=i.store(!1),r=i.store(!1),s=i.store(null!==(t=e.get().autoFocus)&&void 0!==t&&t),l=i.store(!1),d=i.store(null),c=i.store(""),_=i.store(""),u=i.proxy((()=>e.get().isActive)),m=i.proxy((()=>e.get().user)),g=i.proxy((()=>e.get().accessLevel)),p=i.proxy((()=>e.get().isEmailSectionActive)),E=i.proxy((()=>e.get().inviteTargets),(t=>e.get().onInviteTargetsChange(Ld(kd(t))))),f=i.proxy((()=>e.get().inviteTargetValidation)),h=i.proxy((()=>E.get().length>0)),S=i.proxy((()=>e.get().objectMetadata)),v=i.proxy((()=>o.getCanInvite(S.get(),g.get()))),A=i.proxy((()=>{const e=d.get();return e?sd(e,{".tag":"google"})&&ld(e,{".tag":"google"},{".tag":"contacts"}):null})),b=i.proxy((()=>m.get().is_team)),y=i.proxy((()=>o.getIsTeamSharedFolder(S.get()))),M=i.proxy((()=>e.get().autoFocus)),I=i.proxy((()=>r.get())),T=i.store([]),C=i.proxy((e=>{const t=y.get(),a=m.get().email,n=E.get().map(Y),r={},o=T.get().filter((e=>{const o=Y(e);return!(r[o]||(r[o]=!0,n.includes(o)||!V(t,m.get().is_tmr_member)&&"group"!==e[".tag"]||"email"===e[".tag"]||"user"===e[".tag"]&&e.email===a))}));return null!==e&&e.length===o.length&&e.every(((e,t)=>e===o[t]),!0)?e:o})),R=i.proxy((e=>{const t=y.get(),a=c.get(),n=t||""===a,r=[...C.get().slice(0,9),...n?[]:Td];return null!==e&&e.length===r.length&&e.reduce(((e,t,a)=>e&&t===r[a]),!0)?e:r}));return{$accessLevel:g,$user:m,$canInvite:v,$inviteTargets:E,$inviteTargetValidation:f,$hasInviteTargets:h,$isConnectedToGoogle:A,$isConnectingToGoogle:a,$isFocused:n,$isLinkedServicesUpdating:r,$isTeamAccount:b,$isTeamFolder:y,$isTypeaheadForcedOpen:s,$isTypeaheadOpen:l,$isUpdatingGoogleConnectionStatus:I,$linkedServices:d,$objectMetadata:S,$query:c,$latestSuggestionsQuery:_,$searchSuggestionsRaw:T,$searchSuggestions:C,$suggestions:R,$isEmailSectionActive:p,$autoFocus:M,$isActive:u,$props:e}})))(e),r=n.useIntl(),s=T.useRef(null),l=i.useStore(a.$query),d=i.useStore(a.$inviteTargets),c=i.useStore(a.$hasInviteTargets),_=T.useRef(d.length),u=i.useStore(a.$suggestions),m=i.useStore(a.$canInvite),g=i.useStore(a.$isTypeaheadForcedOpen)&&m,p=null!==(t=i.useStore(a.$autoFocus))&&void 0!==t&&t;(e=>{const t=Od(e);T.useEffect((()=>{const a=[e.$query.obs((e=>{t()}))];return()=>a.forEach((e=>e()))}),[e,t])})(a),(e=>{const t=va(_d),a=Pt();T.useEffect((()=>{(async()=>{a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_START",null);const n=await t({query:"",force_refresh:!0,limit:10});"SUCCESS"===n.status?a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS",{response:n}):"ERROR"===n.status?a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR",{response:n}):a("TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL",{response:n}),"SUCCESS"===n.status&&e.$searchSuggestionsRaw.set(n.output)})()}),[])})(a),(e=>{const t=xd(e);T.useEffect((()=>{t()}),[t])})(a),(e=>{const t=gd(),a=i.useStore(e.$searchSuggestions),n=i.useStore(e.$isTypeaheadOpen);T.useEffect((()=>{if(n){const e=a.slice(0,9).length;e>0&&n&&t.select(ud).emit({numSuggestions:e})}}),[a,t,n])})(a);const E=(e=>{const t=gd(),a=Dd(e),n=i.useStore(e.$searchSuggestions);return T.useCallback(((r,o)=>{i.batch((()=>{var i,s;if(r===Id){if(e.$isTypeaheadForcedOpen.set(!0),e.$isConnectingToGoogle.get())return;if(e.$isConnectedToGoogle.get())return;return e.$query.set(""),void a()}t.select(md).emit({index:n.findIndex((e=>e===r)),method:o.nativeEvent instanceof KeyboardEvent?"keyboard":"click"}),e.$query.set(""),e.$inviteTargets.set([...e.$inviteTargets.get(),r]),null===(s=null===(i=e.$props.get().inputRef)||void 0===i?void 0:i.current)||void 0===s||s.focus()}))}),[e,a,t,n])})(a),f=(e=>{const t=gd();return T.useCallback((a=>{const n=e.$query.get();if(a.key===Md&&a.shiftKey)return void a.preventDefault();"Backspace"!==a.key&&"Delete"!==a.key||""===n&&e.$inviteTargets.get().length>0&&e.$inviteTargets.set(e.$inviteTargets.get().slice(0,-1));const r=n===e.$latestSuggestionsQuery.get(),o=bd.test(n);if(a.key===Md){const a=document.getElementById("targets-tokenizer-input-search");if(a&&"scrollIntoView"in a&&a.scrollIntoView(),r&&!o&&e.$searchSuggestions.get().length>0)t.select(md).emit({index:0,method:"keyboard"}),i.batch((()=>{e.$inviteTargets.set([...e.$inviteTargets.get(),e.$searchSuggestions.get()[0]]),e.$query.set("")}));else if(""!==n){const t=wd(n);t.length>0?i.batch((()=>{e.$inviteTargets.set([...e.$inviteTargets.get(),...t]),e.$query.set("")})):i.batch((()=>{e.$inviteTargets.set([...e.$inviteTargets.get(),K(n)]),e.$query.set("")}))}}}),[e,t])})(a),h=Nd(a),{inputPlaceholder:S,truncatedInputPlaceholder:v}=(e=>{var t;const a=n.useIntl(),r=i.useStore(e.$hasInviteTargets),s=i.useStore(e.$isTeamFolder),l=i.useStore(e.$isTeamAccount),d=i.useStore(e.$user).is_tmr_member,c=null===(t=i.useStore(e.$props).shouldTruncatePlaceholder)||void 0===t||t;return T.useMemo((()=>{let e;return e=r?void 0:s&&!d?a.formatMessage({id:"VMGE6I",defaultMessage:"Group names"}):l?a.formatMessage({id:"+nKRfb",defaultMessage:"Add an email, name, or group"}):a.formatMessage({id:"bdV6O3",defaultMessage:"Add an email or name"}),{inputPlaceholder:e,truncatedInputPlaceholder:c&&e?G.em_snippet(e,o.SNIPPET_SIZES.TOKENIZER_PLACEHOLDER,1):e}}),[s,l,a,d,r,c])})(a),b=(e=>T.useCallback((({isOpen:t})=>{if(t)e.$isTypeaheadOpen.set(!0);else{const t=wd(e.$query.get());i.batch((()=>{t.length>0&&(e.$inviteTargets.set([...e.$inviteTargets.get(),...t]),e.$query.set("")),e.$isTypeaheadForcedOpen.set(!1),e.$isTypeaheadOpen.set(!1),e.$isFocused.set(!1)}))}}),[e]))(a),y=(e=>T.useCallback((()=>{var t,a;null===(a=(t=e.$props.get()).onUserInteraction)||void 0===a||a.call(t),e.$isTypeaheadForcedOpen.set(!1),e.$isFocused.set(!0)}),[e]))(a),M=(e=>T.useCallback((t=>t===Id?T.createElement(Ud,{store:e}):T.createElement(Hd,{target:t})),[e]))(a),I=T.useRef(!1),C=e.isInviteSending||!m,R=T.useCallback(((t,a)=>{var n;const r=a.includes(Id)?a.length-1:a.length,o=t&&r>0;I.current!==o&&(I.current=o,null===(n=e.onTargetsDropdownFocusChange)||void 0===n||n.call(e,o)),e.isSuggestionsOpen.set(t)}),[e.onTargetsDropdownFocusChange,e.isSuggestionsOpen]),w=T.useCallback((()=>{e.isSuggestionsOpen.get()||a.$isTypeaheadForcedOpen.set(!0)}),[a.$isTypeaheadForcedOpen,e.isSuggestionsOpen]),N=T.useCallback((()=>{var t,a;null===(a=null===(t=e.inputRef)||void 0===t?void 0:t.current)||void 0===a||a.focus()}),[e.inputRef]);return T.useEffect((()=>{m&&0===e.inviteTargets.length&&N()}),[m,N,e.inviteTargets]),T.useEffect((()=>{if(_.current<d.length){const e=document.getElementById("targets-tokenizer-input-search");e&&"scrollIntoView"in e&&e.scrollIntoView()}_.current=d.length}),[d.length]),T.createElement(o.DIGContext.Provider,{value:{featureLevel:"experimental"}},T.createElement(A.Typeahead.Wrapper,{className:o.cx(Ed,Ed,{[fd]:c}),onSelection:E,hasMaxHeight:!0,isPortaled:!1,onToggle:b},(({getTriggerProps:t,getContentProps:n})=>{const{open:i,...c}=n({}),_=(i||g)&&u.length>0;return R(_,u),T.createElement(T.Fragment,null,T.createElement(o.TextInput.Container,{className:o.cx(hd),ref:s,size:"small",onClick:N,"data-uxa-log":"sm24-tokenizer","data-uxa-interactions":"shown"},T.createElement(o.TextInput.ChipsContainer,null,d.map(((e,t)=>T.createElement($d,{store:a,key:t,target:e,isDisabled:C}))),T.createElement(o.TextInput.Input,{...t({onChange:h,onKeyDown:f,onFocus:y}),className:vd,ref:e.inputRef,disabled:C,value:l,"aria-label":S,placeholder:v,"data-testid":"targets-tokenizer-input",id:"targets-tokenizer-input-search",autoComplete:"off",autoFocus:p,onClick:w}))),T.createElement(A.Typeahead.Container,{...c,triggerRef:e.inbandInputAreaRef,open:_,"data-testid":"typeahead-container",className:Sd,auto:!1,placement:"bottom","aria-label":r.formatMessage({id:"6EE+ph",defaultMessage:"Suggested people list"})},T.createElement(Bd,{results:u,suggestionMax:3}),T.createElement(A.Typeahead.Results,{title:r.formatMessage({id:"ZusjWv",defaultMessage:"Suggested people"}),results:u,renderRow:M,initialResults:""===l?3:10,maxResults:10})))})))};jd.displayName="TargetsTokenizer";const Vd=e=>{const t=i.useStore(e.$accountMetadata);return T.useMemo((()=>{return{id:(e=t).user_id,email:e.email,is_team:vo(e),is_team_admin:e.is_team_admin,account_id:e.account_id,team_dbtid:e.team_id,is_tmr_member:e.is_tmr_member};var e}),[t])},Gd=({store:e,isActive:t})=>{const a=i.useStore(e.$sharingAccessLevel),n=i.useStore(e.$inviteTargets),r=i.useStore(e.$inviteTargetValidations),o=i.useStore(e.$objectMetadata),s=i.useStore(e.$isInviteSending),l=Vd(e),d=e.inbandInputAreaRef,c=e.inputRef,_=e.$isSuggestionsOpen,u=i.useStore(e.$shouldStyleForSM21),m=(e=>{const t=Pt();return T.useCallback((a=>{t("SHARE_MODAL_SHARE__INVITE_TARGETS__CHANGE",null),e.$props.get().onInviteTargetsChange(a)}),[e,t])})(e);return T.createElement(jd,{accessLevel:a,objectMetadata:o,inviteTargets:n,onInviteTargetsChange:m,onTargetsDropdownFocusChange:e.$props.get().onTargetsDropdownFocusChange,inviteTargetValidation:r,user:l,isInviteSending:s,inbandInputAreaRef:d,inputRef:c,isActive:t,isSuggestionsOpen:_,shouldTruncatePlaceholder:u})};Gd.displayName="TargetsTokenizer";const qd=({store:e})=>{var t;const a=n.useIntl();T.useState(null);const r=i.useStore(e.$isInviteSending),s=i.useStore(e.$isConfidentialFolder),l=i.useStore(e.$objectMetadata),d=i.useStore(e.$validationResult),c=i.useStore(e.$inviteTargets),_=Fl(e),u=(e=>T.useCallback((t=>{e.$changeConfidentialityData.set({teamName:t})}),[e.$changeConfidentialityData]))(e),m=null!==(t=o.getOwnerTeamName(l))&&void 0!==t?t:"",g=i.useStore(e.$isSuggestionsOpen),p=c.length>0,E=i.useStore(e.$shouldStyleForSM21),[f,h]=T.useState(!1);return T.createElement("div",{className:o.cx(Wl)},T.createElement("div",{id:"shareme24-ib-action-container",style:{width:"100%"},"data-testid":"ib-action-area",role:"region",onFocus:()=>h(!0),onBlur:()=>h(!1)},T.createElement(o.Box,{className:"banner-group",marginBottom:s?"Micro Small":"0"},s?T.createElement(Qa,{teamName:m,parentFolderName:o.getParentFolderName(l),isRestoreAccessEnabled:o.getCanDoAction(l,o.UPDATE_CONFIDENTIALITY_TAG),onRestoreAccessClick:u}):null,T.createElement(Vl,{store:e})),T.createElement(o.Box,{flexDirection:"column",className:E?o.cx(ad,{[nd]:f||g}):o.cx(Zl,{[Yl]:f||g}),backgroundColor:"Background Base",onClick:()=>{var t;!(null===(t=e.inputRef)||void 0===t?void 0:t.current)||p||g||e.inputRef.current.focus()}},T.createElement(o.Box,{className:Kl},T.createElement(o.Box,{ref:e.inbandInputAreaRef,display:"flex",flexDirection:"row",style:{minHeight:"var(--dig-spacing__dimension__36)"},alignItems:"center"},T.createElement(o.Box,{className:o.cx(ed,{[Xl]:E,[td]:!E,[rd]:r}),borderRadius:"Circular",display:"flex",alignItems:"center",justifyContent:"center"},T.createElement(o.UIIcon,{src:b.ShareLine,size:"medium"})),T.createElement(Gd,{store:e,isActive:f||g}))))),T.createElement("div",{className:Ql},d&&T.createElement(Gl,{message:d.message,variant:d.level}),T.createElement(zl,{store:e}),T.createElement(o.Box,{className:Jl},T.createElement(tl,{store:e}),r?(()=>{const e=xs(a);return T.createElement(o.Box,{display:"flex"},T.createElement(o.Box,{marginRight:"Micro XSmall"},T.createElement(o.Spinner,{size:"xsmall","aria-valuetext":null==e?void 0:e.toString(),monochromatic:!0,withTrack:!0})),T.createElement(o.Text,null,e))})():T.createElement(o.Button,{disabled:r||null!==d&&"error"===d.level||!p,style:{flexShrink:0,alignSelf:"center"},onClick:_,variant:"primary",size:"medium",fullWidth:!1,"data-uxa-log":"sharing-modal-footer-button-send-email","data-testid":"ib-share-send-email-button"},((e,t)=>t?xs(e):(e=>e.formatMessage({id:"lHCrsZ",defaultMessage:"Share"}))(e))(a,r)))))};qd.displayName="InbandShare";const zd=({store:e})=>{const t=T.useRef(!1),a=Dl();return T.useEffect((()=>{if(!t.current){t.current=!0;const n=Date.now()-e.$componentViewTime.get();e.$props.get().onStartInband(),a.select(Il).emit({timeSinceView:n})}}),[e,a]),T.createElement(qd,{store:e})};zd.displayName="ShareModalShareInner";const Wd=e=>{const t=As();return"loading"===t.status?T.createElement(nn,null,T.createElement(tn,{disabled:!0},T.createElement(o.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),T.createElement(o.Skeleton.Text,{size:"large",width:200}))):"loaded"===t.status?T.createElement(Zd,{...e,accountMetadata:t.accountMetadata,objectIdentifier:t.objectIdentifier,objectMetadata:t.objectMetadata,sharingPrefs:t.sharingPrefs,onObjectIdentifierChanged:e=>t.onObjectIdentifierChanged(e),onRefreshModal:()=>t.refreshObjectMetadata().then((()=>{})),onRefreshObjectMetadata:()=>t.refreshObjectMetadata().then((()=>{}))}):null};Wd.displayName="Inband";const Zd=e=>{const t=id(e);rl(t);const a=i.useStore(t.$inviteTargets),n=i.useStore(t.$sharingAccessLevel);return T.useEffect((()=>{t.$componentViewTime.set(Date.now())}),[t]),T.createElement(Ft,{sharingInviteTargets:a,sharingAccessLevel:n},T.createElement(zd,{store:t}))};Zd.displayName="InbandInner";const Kd=({accountMetadata:e})=>{const t=n.useIntl(),a=Jt(),r=Ao(e),i=r?(e=>e.formatMessage({id:"QV0fMP",defaultMessage:"To share this folder, manage access in the admin console."}))(t):(e=>e.formatMessage({id:"E/G/gP",defaultMessage:"Only admin and group managers can share this content.{br}Reach out and ask them to share it."},{br:T.createElement("br",null)}))(t),s=r?(e=>e.formatMessage({id:"S839MU",defaultMessage:"Go to admin console"}))(t):(e=>e.formatMessage({id:"0KHhX0",defaultMessage:"Find admin"}))(t);return T.createElement("div",{style:{textAlign:"center"}},T.createElement(o.Text,{size:"medium","data-testid":"tmr-team-folder-subtitle"},i),T.createElement("div",null,T.createElement(o.Button,{variant:"borderless",size:"small",style:{marginTop:"32px"},onClick:()=>{a(r?"/team/admin/content/home":"/team?_tk=left_nav_team")}},s)))};Kd.displayName="TmrTeamFolder";const Yd=({objectMetadata:e,accountMetadata:t,canInvite:a,handleButtonClick:r,componentViewTime:i})=>{const[s,l]=T.useState(!1),[d,c]=T.useState(0),[_,u]=T.useState(!1),m=T.useRef(null),g=Dl(),p=yo(t,e),E=T.useCallback((()=>{const e=s?Date.now()-d:void 0,t=Date.now()-i;g.select(bl).emit({dwellTime:e,timeSinceView:t}),r()}),[i,g,r,s,d]),f=T.useCallback((()=>{c(Date.now()),l(!0),g.select(yl).emit(null),u(!0)}),[g]),h=T.useCallback((()=>{const e=s?Date.now()-d:void 0;l(!1),g.select(Ml).emit({dwellTime:e}),u(!1)}),[g,s,d]),S=vo(t);return T.createElement(T.Fragment,null,T.createElement(nn,{ref:m,onMouseEnter:f,onMouseLeave:h},T.createElement(an,{onClick:E,disabled:!a,"data-testid":"inband-sharing-entry-button",autoFocus:!0},T.createElement(Xa,null,T.createElement(o.UIIcon,{src:b.ShareLine,size:"small"})),T.createElement(rn,null,T.createElement(o.Text,{color:"subtle",style:{marginLeft:-3,marginTop:4}},T.createElement(o.Truncate,{lines:2},S?n.intl.formatMessage({id:"I1N8uC",defaultMessage:"Add an email, name, or group"}):(e=>e.formatMessage({id:"RynZbM",defaultMessage:"Add an email or name"}))(n.intl)))))),(()=>{let r=null;if(p&&!a)r=T.createElement(Kd,{accountMetadata:t});else if(!a){const a=bo(t,e);r=T.createElement(o.Text,null,a?Ks(n.intl):Ys(n.intl))}return r?T.createElement(o.Tooltip.Control,{open:_,placement:"top",auto:!0,triggerRef:m,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},r):null})())};Yd.displayName="Inner";const Qd=({onTokenizerButtonClick:e,componentViewTime:t})=>{const a=As();if("loading"===a.status)return T.createElement(nn,null,T.createElement(tn,{disabled:!0},T.createElement(o.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),T.createElement(o.Skeleton.Text,{size:"large",width:200})));if("loaded"===a.status){const n=a.objectMetadata,r=o.getCanInvite(n,cn)||o.getCanInvite(n,_n);return T.createElement(Yd,{accountMetadata:a.accountMetadata,objectMetadata:a.objectMetadata,canInvite:r,handleButtonClick:e,componentViewTime:t})}return null};Qd.displayName="TokenizerButton";const Jd=e=>{var t;const{objectMetadata:a,accountMetadata:r,onInbandButtonClicked:i,componentViewTime:s}=e,l=o.isNewApiMetadata(a),[d,c]=T.useState(!1),[_,u]=T.useState(!1),[m,g]=T.useState(0),p=T.useRef(null),E=Dl(),f=o.getCanInvite(a,cn),h=o.getCanInvite(a,_n)||f,S=o.getIsLinkOnlyMode(a),v=o.getIsNSLinkOnlyMode(a),A=o.getIsFolder(a),y=bo(r,a),M=yo(r,a),I=!!o.getOwnerTeam(a),C=null!==(t=o.getOwnerTeamName(a))&&void 0!==t?t:"",R=o.getIsTeamSharedFolder(a),w=bs,N=Jt(),L=T.useCallback((e=>{N(e)}),[N]),k=()=>{switch(o.getInviteDeniedReason(a)){case"mount_exceeded":return T.createElement(o.Text,null,((e,t)=>{if(!t.metadata_response||!o.getIsFolder(t))return;const a=t.metadata_response;if(a.invite_viewer_folder_perm.invite_viewer_folder_denied_reason&&"mount_exceeded"===a.invite_viewer_folder_perm.invite_viewer_folder_denied_reason[".tag"]){const t=a.invite_viewer_folder_perm.invite_viewer_folder_denied_reason,n=t.limit,r=t.new_count-n;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:r})}})(n.intl,a),T.createElement(o.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>L(w),href:"",isBold:!0},Ws(n.intl)));case"contains_app_folder":case"inside_app_folder":case"is_app_folder":case"is_family_folder":return T.createElement(o.Text,null,Zs(n.intl));default:return T.createElement(o.Text,null,y?Ks(n.intl):Ys(n.intl))}},O=T.useCallback((()=>{const e=_?Date.now()-m:void 0,t=Date.now()-s;E.select(bl).emit({dwellTime:e,timeSinceView:t}),i()}),[s,E,_,i,m]),x=T.useCallback((()=>{g(Date.now()),u(!0),E.select(yl).emit(null),c(!0)}),[E]),D=T.useCallback((()=>{const e=_?Date.now()-m:void 0;u(!1),E.select(Ml).emit({dwellTime:e}),c(!1)}),[E,_,m]),P=l?!h:S||!h;return T.createElement(T.Fragment,null,T.createElement(nn,{ref:p,onMouseEnter:x,onMouseLeave:D,"data-uxa-log":"sm24-inband-button."+(P?"disabled":"loaded"),"data-uxa-interactions":"shown click"},T.createElement(tn,{onClick:O,disabled:P,"data-testid":"inband-sharing-entry-button"},T.createElement(Xa,null,T.createElement(o.UIIcon,{src:b.ShareLine,size:"medium"})),T.createElement(rn,null,T.createElement(ln,{content:(F=n.intl,F.formatMessage({id:"SC4EWs",defaultMessage:"Add people"}))})))),(()=>{let e=null;return l?M&&!h?e=T.createElement(Kd,{accountMetadata:r}):h||(e=k()):S?e=(()=>{switch(S?v?"isNSLinkOnlyMode":"isFamily":"isLimitedPermissions"){case"isNSLinkOnlyMode":return T.createElement(o.Text,null,((e,t)=>{if(t.tooManyMountsError&&("total_mounts_exceeded"===t.tooManyMountsError[".tag"]||"home_mounts_exceeded"===t.tooManyMountsError[".tag"]||"tree_size_exceeded"===t.tooManyMountsError[".tag"])){const a=t.tooManyMountsError.limits_info;if(a){const t=a.limit,n=a.new_count-t;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:n})}}})(n.intl,a),T.createElement(o.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>L(w),href:"",isBold:!0},Ws(n.intl)));case"isLimitedPermissions":return I&&!y?R?T.createElement(o.Text,null,(e=n.intl,void 0!==(t=C)?e.formatMessage({id:"ToMYBy",defaultMessage:"This folder can only be managed by the {ownerTeamName} team."},{ownerTeamName:t}):e.formatMessage({id:"ReqZ5Y",defaultMessage:"This folder can only be managed by the owner team."}))):A?T.createElement(o.Text,null,(e=>e.formatMessage({id:"5iJXBE",defaultMessage:"You don’t have permission to manage membership of this folder"}))(n.intl)):T.createElement(o.Text,null,(e=>e.formatMessage({id:"WVaUHn",defaultMessage:"You don’t have permission to manage membership of this file"}))(n.intl)):T.createElement(o.Text,null,(e=>e.formatMessage({id:"TnTBTY",defaultMessage:"This can only be shared with the link."}))(n.intl));case"isFamily":return T.createElement(o.Text,null,Zs(n.intl))}var e,t})():M&&!h?e=T.createElement(Kd,{accountMetadata:r}):h||(e=T.createElement(o.Text,null,y?Ks(n.intl):Ys(n.intl))),e?T.createElement(o.Tooltip.Control,{open:d,placement:"top",auto:!0,triggerRef:p,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e):null})());var F};Jd.displayName="InbandShareButtonInner";const Xd=e=>{const t=As(),{onInbandButtonClicked:a,componentViewTime:n}=e;return"loading"===t.status?T.createElement(nn,{"data-uxa-log":"sm24-inband-button.loading","data-uxa-interactions":"shown click"},T.createElement(tn,{disabled:!0},T.createElement(o.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),T.createElement(o.Skeleton.Text,{size:"large",width:200}))):"loaded"===t.status?T.createElement(Jd,{accountMetadata:t.accountMetadata,objectMetadata:t.objectMetadata,onInbandButtonClicked:a,componentViewTime:n}):null};Xd.displayName="InbandShareButton";o.injectInternalStyle("/static/metaserver/static/js/sharing/features/sharing_qr_code/get_qr_code_modal.module.out-vflNN1fVL.css",(e=>"._get-qr-code-modal_dbu8m_1>div{background-color:var(--dig-color__background__subtle);border:1px solid var(--dig-color__border__subtle)}._get-qr-code-modal-image_dbu8m_6{display:flex;width:100%}._get-qr-code-modal-spinner_dbu8m_11{align-items:center;aspect-ratio:1/1;display:flex;justify-content:center;width:100%}._get-qr-code-modal-body_dbu8m_19{padding-bottom:var(--spacing__unit--3);padding-top:calc(var(--spacing__unit--1)*6)}._get-qr-code-modal-filename_dbu8m_25{white-space:nowrap}@media (min-width:601px){._get-qr-code-modal-body_dbu8m_19{padding-top:var(--spacing__unit--3)}._get-qr-code-modal_dbu8m_1 button.dig-Modal-close-btn{display:none}}"));const ec=()=>T.default.createElement("div",{className:"_get-qr-code-modal-spinner_dbu8m_11"},T.default.createElement(o.Spinner,{size:"medium"})),tc=n.defineMessage({id:"UaJBfk",defaultMessage:"QR code for sharing"}),ac=n.defineMessage({id:"ZFsp0l",defaultMessage:"Download"}),nc=n.defineMessage({id:"E89n5D",defaultMessage:"Download QR code"}),rc=n.defineMessage({id:"EQKjGC",defaultMessage:"Anyone with the code can view."}),oc=n.defineMessage({id:"J8vTeR",defaultMessage:"Team members with the code can view."}),ic=n.defineMessage({id:"5TDAHV",defaultMessage:"Manage access"}),sc=n.defineMessage({id:"tllLrY",defaultMessage:"Only people invited can view."}),lc=n.defineMessage({id:"bWq9cz",defaultMessage:"Couldn’t create QR code. You don’t have permission to create a QR code to this content."}),dc=n.defineMessage({id:"tpMKHD",defaultMessage:"We can’t find this file anymore. Try checking activity or folder history to see what happened."}),cc=n.defineMessage({id:"zGqflr",defaultMessage:"You can’t share until you verify your email address."}),_c=n.defineMessage({id:"zM/n79",defaultMessage:"Couldn’t create QR code. Please try again later."}),uc=n.defineMessage({id:"s2Zxdl",defaultMessage:"Couldn’t create QR code."});var mc;!function(e){e.PATH_FORBIDDEN="path_forbidden",e.PATH_NOT_FOUND="path_not_found",e.EMAIL_NOT_VERIFIED="email_not_verified",e.SERVICE_UNAVAILABLE="service_unavailable",e.UNKNOWN="unknown"}(mc||(mc={}));const gc=e=>`data:image/png;base64,${e}`,pc=({base64QrCode:e})=>T.default.createElement("img",{"data-testid":"qr-code-modal-image",className:"_get-qr-code-modal-image_dbu8m_6",src:gc(e),alt:n.intl.formatMessage(tc)});pc.displayName="GetQrCodeModalImage";const Ec=({file:e,user:t,onSettingsClick:a,onGetQrCodeError:r})=>{var i;const[s,l]=T.default.useState(!1),[d,c]=T.default.useState(""),[u,m]=T.default.useState(void 0),g=e.file_id||e.fq_path,p=o.getFilename$1(e),E=T.default.useCallback(((a,n)=>{const r=o.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,i=_.get_browser_info();o.ShareTibEventLogger.log(t.id,a,r,{file_id:e.file_id,fq_path:e.fq_path,is_folder:e.is_dir,browser:i.browser,browser_version:i.version,...n})}),[t.id,e]),f=T.default.useCallback((()=>{l(!0);new o.FileShareApiClient({userApiProps:t}).getQrCode({fileIdOrPath:g}).then((e=>{var t;c(null!==(t=e.qrcode)&&void 0!==t?t:""),m(e.effective_audience);const a=e.link_url;if(a){const e=o.parseLink(a),t=e.doesContainShmodelLink?o.ShareTibEventLogger.get_shmodel_extra_for_logging(void 0,o.getCleanedSharingUrl(e)):o.ShareTibEventLogger.get_scl_extra_for_logging(void 0,o.getCleanedSharingUrl(e)),n={sender_trackey:e.searchParams.get("st"),...t};E(o.TiburonEventName.CreateQrCode,n)}})).catch((e=>{var t;o.Snackbar.warn(n.intl.formatMessage((e=>{switch(e){case mc.PATH_FORBIDDEN:return lc;case mc.PATH_NOT_FOUND:return dc;case mc.EMAIL_NOT_VERIFIED:return cc;case mc.SERVICE_UNAVAILABLE:return _c;default:return uc}})(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t[".tag"]))),r&&r()})).finally((()=>{l(!1)}))}),[g,t,l,E]);T.default.useEffect((()=>{f()}),[f]);const h="dark"===(null===(i=o.useTheme())||void 0===i?void 0:i.mode),S=(e=>{switch(e){case"public":return rc;case"team":return oc;case"no_one":return sc;default:return""}})(u);return T.default.createElement(T.default.Fragment,null,T.default.createElement(o.Box,{padding:"Micro XLarge",marginTop:"Micro Small",borderWidth:"1",borderColor:"Border Subtle",borderStyle:"Solid",backgroundColor:h?"Secondary Surface - State 1":"Background Base",borderRadius:"XLarge"},!s&&d?T.default.createElement(pc,{base64QrCode:d}):T.default.createElement(ec,null)),T.default.createElement(o.Box,{marginTop:"Micro Large"},T.default.createElement(o.Button,{size:"large",variant:"primary",onClick:e=>{e.preventDefault(),((e,t)=>{const a=document.createElement("a");a.href=gc(e),a.download=`${t}_QR.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a)})(d,p)},fullWidth:!0,"data-uxa-log":"download_qr_code_modal_button","aria-label":n.intl.formatMessage(nc),disabled:s,autoFocus:!0},n.intl.formatMessage(ac)),T.default.createElement(o.Box,{marginTop:"Micro Large"},s&&T.default.createElement(T.default.Fragment,null,T.default.createElement(o.Skeleton.Text,null)," ",T.default.createElement(o.Skeleton.Text,null)),!s&&S?T.default.createElement(o.Text,null,n.intl.formatMessage(S)):null,!s&&a?T.default.createElement(T.default.Fragment,null," ",T.default.createElement(o.Link,{hasNoUnderline:!0,href:"#",onClick:e=>{e.preventDefault(),a()},"data-uxa-log":"settings_qr_code_modal_button"},n.intl.formatMessage(ic))):null)))};Ec.displayName="GetQrCodeInner";const fc=e=>{const{user:t,isLoading:a}=o.useActiveUser();return!a&&t?T.default.createElement(Ec,{...e,user:t}):null};fc.displayName="GetQrCode";const hc="SHARING_BANNED_MODAL",Sc=e=>{const[t,r]=a.useState(!0),i=n.intl.formatMessage({id:"sHjsEB",defaultMessage:"Couldn’t complete share"}),s=n.intl.formatMessage({id:"3Ob1gB",defaultMessage:"We’ve interrupted your sharing activity. For details or to contact support, read our <link>help center article.</link>"},{link:e=>T.default.createElement(o.Button,{variant:"transparent",href:o.ABUSE_HELP_ARTICLE_LINK,target:"_blank",hasNoUnderline:!0},e)});return T.default.createElement(o.Modal$1,{open:t,isCentered:!0,withCloseButton:"Close",onRequestClose:()=>r(!1),onAfterClose:e.onAfterClose,"aria-labelledby":"sharing-banned-modal-title"},T.default.createElement(o.Modal$1.Header,{hasBottomSpacing:"title-standard"},T.default.createElement(o.Modal$1.Title,{id:"sharing-banned-modal-title"},i)),T.default.createElement(o.Modal$1.Body,null,s),T.default.createElement(o.Modal$1.Footer,null))};Sc.displayName="SharingBannedModal";o.injectInternalStyle("/static/metaserver/static/js/sharing/features/shareme24/common/components/layout.module.out-vfl5IKDpG.css",(e=>"._overlay_55ya2_1{background:var(--dig-color__background__subtle);border:.5px solid var(--dig-color__border__subtle);border-radius:var(--dig-radius__xlarge)}._click-outside_55ya2_7{background-color:var(--dig-color__utility__overlay)}._outer-wrapper_55ya2_11{background:var(--dig-color__background__subtle);border-radius:var(--dig-radius__xlarge)}._modal-inner-wrapper_55ya2_16{padding:var(--dig-spacing__micro__medium)}._modal-inner-wrapper-main-exit_55ya2_20{animation:_shrink-main-overlay_55ya2_1 var(--duration__surface) var(--easing__transition) forwards;visibility:hidden}._inner-wrapper_55ya2_25{padding:var(--dig-spacing__micro__small)}._button-row_55ya2_29{display:flex;gap:var(--dig-spacing__micro__medium);padding:var(--dig-spacing__dimension__6)}._button-row-bmus-qr_55ya2_35._button-row_55ya2_29{gap:var(--dig-spacing__micro__small)}._button-row-bmus-qr_55ya2_35._button-row_55ya2_29 button{min-width:32px}._button-row-button-wrapper_55ya2_44{max-width:50%;width:50%}._utility-button-row_55ya2_49{align-items:center;justify-content:flex-end}._footerFileOrFolderInfoContainer_55ya2_54{padding:12px}._footerFileOrFolderInfoContainer_55ya2_54,._redesignedFooterFileOrFolderInfoContainer_55ya2_63{align-items:flex-start;display:flex;flex:1 0 0;flex-direction:column;justify-content:center}._redesignedFooterFileOrFolderInfoContainer_55ya2_63{padding-left:var(--dig-spacing__micro__medium)}._footerFilerOrFolderInfo_55ya2_72{line-height:18px;max-width:272px;width:100%}._footerFilerOrFolderInfoBmusQrCode_55ya2_78{max-width:calc(224px - var(--dig-spacing__micro__medium))}._header-section_55ya2_83{align-items:center;display:flex;margin-bottom:-6px;padding:18px 12px 0 18px}._header-section-text-container_55ya2_90{line-height:18px;max-width:272px;width:100%}._header-section-back-button_55ya2_96{margin-right:16px}._header-section-primary-text_55ya2_100{font-family:var(--dig-type__family__title)}._header-section-button-container_55ya2_104{align-items:center;display:flex;margin-left:auto}._overlay-main-exit_55ya2_113 ._outer-wrapper_55ya2_11{animation:_shrink-main-overlay_55ya2_1 var(--duration__surface) var(--easing__transition) forwards;visibility:hidden}._inband-screen-expand_55ya2_119{animation:_expand-outer-wrapper-inband_55ya2_1 var(--duration__micro-fast) var(--easing__transition)}._qr-screen-expand_55ya2_124{animation:_expand-qr-screen_55ya2_1 var(--duration__surface) var(--easing__transition) 0s forwards,_fade-in-qr-screen_55ya2_1 var(--duration__surface) var(--easing__enter) var(--duration__surface) forwards;opacity:0}@keyframes _expand-outer-wrapper-inband_55ya2_1{0%{max-height:250px}to{max-height:320px}}@keyframes _shrink-main-overlay_55ya2_1{0%{max-height:274px}to{max-height:72px}}@keyframes _expand-qr-screen_55ya2_1{0%{max-height:70px}to{max-height:475px}}@keyframes _fade-in-qr-screen_55ya2_1{0%{opacity:0}to{opacity:1}}"));const vc="_outer-wrapper_55ya2_11",Ac="_modal-inner-wrapper_55ya2_16",bc="_modal-inner-wrapper-main-exit_55ya2_20",yc="_header-section_55ya2_83",Mc="_button-row-bmus-qr_55ya2_35",Ic="_utility-button-row_55ya2_49",Tc="_header-section-text-container_55ya2_90",Cc="_header-section-back-button_55ya2_96",Rc="_header-section-primary-text_55ya2_100",wc="_header-section-button-container_55ya2_104",Nc="_inband-screen-expand_55ya2_119",Lc="_expand-outer-wrapper-inband_55ya2_1",kc="_qr-screen-expand_55ya2_124",Oc="_fade-in-qr-screen_55ya2_1";var xc;!function(e){e.MAIN="main",e.QRCODE="qrcode",e.INBAND="inband",e.MANAGE_ACCESS="manage_access"}(xc||(xc={}));const Dc=e=>{const t=T.useRef(null),[a,n]=T.useState(-1);T.useEffect((()=>{e.isOpen&&t.current&&"inband"!==e.currentScreen&&t.current.focus()}),[e.isOpen,e.currentScreen]);const r=e.onEscape,i=T.useCallback((e=>{var o,i,s,l;if(!t.current)return;if("Shift"===e.key)return;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)&&(e.preventDefault(),e.nativeEvent.stopImmediatePropagation()),"Escape"===e.key)return r(e),e.preventDefault(),void e.nativeEvent.stopImmediatePropagation();if("Tab"===e.key){if(e.preventDefault(),(null===(o=document.activeElement)||void 0===o?void 0:o.classList.contains("targets-tokenizer-suggestion"))||(null===(i=document.activeElement)||void 0===i?void 0:i.classList.contains("typeahead-import-contacts")))return void(null===(s=document.getElementById("targets-tokenizer-input-search"))||void 0===s||s.focus());if((null===(l=document.activeElement)||void 0===l?void 0:l.matches("#targets-tokenizer-input-search"))&&null==t.current.querySelector("textarea"))return;const r=t.current.querySelectorAll('button:not([disabled]), [href]:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled])');let d,c=a;for(let e=0;e<r.length;e++){if(r[e]===document.activeElement){c=e;break}}return d=e.shiftKey?(c-1+r.length)%r.length:(c+1)%r.length,r[d].focus(),void n(d)}}),[r,a]),s=T.useRef(null),l=T.useRef(null);return T.useEffect((()=>(l.current||(l.current=new ResizeObserver((()=>{if(t.current&&s.current){window.innerHeight<t.current.getBoundingClientRect().bottom&&s.current.update()}}))),t.current&&t.current instanceof HTMLElement&&l.current.observe(t.current),()=>{l.current&&l.current.disconnect()})),[]),"centered_v1"===e.displayMode?T.createElement(o.Modal$1,{open:e.isOpen,width:380,onRequestClose:e.onClickOutside,ref:t,isCentered:!0},T.createElement("div",{"data-test-id":"shareme24-modal","data-uxa-log":"sm24-modal","data-uxa-interactions":"shown",className:o.cx(vc)},T.createElement(o.Modal$1.Header,{className:yc},e.header),T.createElement(o.Modal$1.Body,{className:o.cx(Ac,{[bc]:e.isExitingMainToQr}),onAnimationEnd:e.onOverlayOrModalAnimationEnd},e.children))):T.createElement(o.DIGProvider,{featureProviderProps:{featureLevel:"EXPERIMENTAL"}},T.createElement(o.ClickOutside,{className:"_click-outside_55ya2_7",isActive:e.isOpen,onClickOutside:e.onClickOutside,shouldClickOutsideWhenDefaultPrevented:!1,"data-uxa-log":"sm24-clickaway","data-uxa-interactions":"click"},T.createElement(o.Overlay,{className:o.cx("_overlay_55ya2_1",{"_overlay-main-exit_55ya2_113":e.isExitingMainToQr}),offsetDistance:e.offsetDistance,anchorRef:e.anchorRef,placement:e.placement,auto:!0,ref:s,onAnimationEnd:e.onOverlayOrModalAnimationEnd},T.createElement(o.DIGProvider,{featureProviderProps:{featureLevel:"OFF"}},T.createElement("div",{"data-test-id":"shareme24-modal",className:o.cx(vc),style:{width:380},onKeyDown:i,ref:t,"data-uxa-log":"sm24-modal","data-uxa-interactions":"shown",tabIndex:0},T.createElement(o.Modal$1.Header,{className:yc},e.header),T.createElement(o.Modal$1.Body,{className:o.cx(Ac,{[bc]:e.isExitingMainToQr}),onAnimationEnd:e.onOverlayOrModalAnimationEnd},e.children))))))};Dc.displayName="Wrapper";const Pc=({styleName:e,...t})=>T.createElement("div",{className:`_button-row_55ya2_29 ${e}`,"aria-hidden":t.hidden,...t},t.children);Pc.displayName="ButtonRow";const Fc=({styleName:e,...t})=>T.createElement("div",{className:`_button-row-button-wrapper_55ya2_44 ${e}`,"aria-hidden":t.hidden,...t},t.children);Fc.displayName="ButtonRowButtonWrapper";const $c=Symbol("ON_CLICK"),Hc=Symbol("ON_MOUSE_ENTER"),Bc=Symbol("ON_MOUSE_LEAVE"),{useEmitter:Uc,defaultEmitter:jc}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r)},s={...Ka(a),...za(n),...Tn(r)};if(e.key===$c)return o.UDCL.logEvent(Al({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...i,action:"copy_link"}}),void o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...i,action:"copy_link"}});e.key!==Hc?e.key!==Bc||o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...i,action:"copy_link"}}):o.UDCL.logEvent(Sl({...s,flexibleSharingEntryPointAction:"copy_link"}),{tags:{...i,action:"copy_link"}})})),Vc=({store:e})=>{const t=Uc(),a=T.useCallback((()=>{const a=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,n=Date.now()-e.$componentViewTime.get();t.select($c).emit({dwellTime:a,timeSinceView:n}),e.$isHovered.set(!1),e.$props.get().onClickCopyLinkButton()}),[t,e]),r=T.useCallback((()=>{t.select(Hc).emit(null),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[t,e]),i=T.useCallback((()=>{const a=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;t.select(Bc).emit({dwellTime:a}),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[t,e]);T.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]);return T.createElement(T.Fragment,null,T.createElement(nn,{onMouseEnter:r,onMouseLeave:i,"data-uxa-log":"sm24-copy_link-button.loaded","data-uxa-interactions":"shown click"},T.createElement(en,{onClick:a,disabled:!1,"data-testid":"copy-link-button"},T.createElement(Xa,null,T.createElement(o.UIIcon,{src:o.LinkLine,size:"medium","data-testid":"copy-link-icon"})),T.createElement(dn,null),T.createElement(rn,null,T.createElement(ln,{content:(s=n.intl,s.formatMessage({id:"1xxmJZ",defaultMessage:"Copy link"}))})))));var s};Vc.displayName="LoadedButton";const Gc=()=>T.createElement(nn,{"data-uxa-log":"sm24-copy-link-button.loading","data-uxa-interactions":"shown click"},T.createElement(en,{disabled:!0},T.createElement(Xa,null,T.createElement(o.UIIcon,{src:o.LinkLine,size:"medium"})),T.createElement(dn,null),T.createElement(rn,null,T.createElement(o.Skeleton.Text,{size:"small",style:{marginTop:22}}))));Gc.displayName="LoadingButton";const qc=({store:e})=>{const t=As();return"ON"===i.useStore(e.$copyLinkLoadingStateVariant)&&"loading"===t.status?T.createElement(Gc,null):T.createElement(Vc,{store:e})};qc.displayName="Inner";const zc=e=>{const t=(e=>i.useInitStore(e,(e=>{const t=i.store(!1),a=i.store(0),n=i.store(0),r=i.proxy((()=>e.get().copyLinkLoadingStateVariant));return{$props:e,$isHovered:t,$hoverStartTime:a,$componentViewTime:n,$copyLinkLoadingStateVariant:r}})))(e);return T.createElement(qc,{store:t})};zc.displayName="CopyLinkButton";const Wc=({store:e})=>{const t=i.useStore(e.$objectIdentifier),a=i.useStore(e.$copyLinkLoadingStateVariant),n=T.useCallback((()=>{e.$props.get().copyLinkHandler(),e.$props.get().onActionClicked()}),[e]);return T.createElement(zc,{onClickCopyLinkButton:n,objectIdentifier:t,copyLinkLoadingStateVariant:a})};var Zc;Wc.displayName="CopyLinkButton",function(e){e.MAIN="main",e.QRCODE="qrcode",e.INBAND="inband",e.MANAGE_ACCESS="manage_access"}(Zc||(Zc={}));const Kc=({store:e})=>{const t=i.useStore(e.$componentViewTime),a=T.useCallback((()=>{i.batch((()=>{e.$isEnteringInband.set(!0),e.$currentScreen.set(Zc.INBAND),e.$isInbandStarted.set(!0)}))}),[e]);return T.createElement(Xd,{onInbandButtonClicked:a,componentViewTime:t})};Kc.displayName="InbandInviteButton";const Yc=e=>e.formatMessage({id:"O6jjXZ",defaultMessage:"Create a view-only QR code"}),Qc=Symbol("ON_CLICK"),Jc=Symbol("ON_MOUSE_ENTER"),Xc=Symbol("ON_MOUSE_LEAVE"),{useEmitter:e_,defaultEmitter:t_}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r)},s={...Ka(a),...za(n),...Tn(r)};if(e.key===Qc)return o.UDCL.logEvent(Al({...s,flexibleSharingEntryPointAction:"qr_code",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...i,action:"qr_code"}}),void o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"qr_code",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...i,action:"qr_code"}});e.key!==Jc?e.key!==Xc||o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"qr_code",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...i,action:"qr_code"}}):o.UDCL.logEvent(Sl({...s,flexibleSharingEntryPointAction:"qr_code"}),{tags:{...i,action:"qr_code"}})})),a_=({store:e})=>{const[t,a]=T.useState(!1),r=T.useRef(null),i=e_(),s=T.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,a=Date.now()-e.$componentViewTime.get();i.select(Qc).emit({dwellTime:t,timeSinceView:a}),e.$isHovered.set(!1),e.$props.get().onClickQrCodeButton()}),[e,i]),l=T.useCallback((()=>{i.select(Jc).emit(null),a(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,i]),d=T.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;i.select(Xc).emit({dwellTime:t}),a(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,i]);return T.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]),T.createElement(T.Fragment,null,T.createElement(on,{"data-testid":"qr-code-button",onClick:s,onMouseEnter:l,onMouseLeave:d,ref:r,variant:e.$props.get().buttonVariant,"data-uxa-log":"sm24-qrcode-button.loaded","data-uxa-interactions":"shown click"},T.createElement(o.UIIcon,{src:y.QrCodeLine,"aria-label":Yc(n.intl)})),T.createElement(o.Tooltip.Control,{open:t,placement:"top",auto:!0,triggerRef:r,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},T.createElement(o.Text,null,Yc(n.intl))))};a_.displayName="LoadedButton";const n_=({store:e})=>T.createElement(a_,{store:e});n_.displayName="Inner";const r_=e=>{const t=(e=>{const t=As(),a=i.useInitStore(t,(e=>e));return i.useInitStore(e,(e=>{const t=i.store(!1),n=i.store(0),r=i.store(0);return{$props:e,$data:a,$isHovered:t,$hoverStartTime:n,$componentViewTime:r}}))})(e);return T.createElement(n_,{store:t})};r_.displayName="QrCodeButton";const o_=({store:e,buttonVariant:t})=>{const a=T.useCallback((()=>{i.batch((()=>{e.$isExitingMainToQr.set(!0),e.$isEnteringQr.set(!0)}))}),[e.$isExitingMainToQr,e.$isEnteringQr]);return T.createElement(r_,{onClickQrCodeButton:a,buttonVariant:t})};o_.displayName="QrCodeButton";const i_=e=>e.formatMessage({id:"8sEPDx",defaultMessage:"Settings"}),s_=Symbol("ON_CLICK"),l_=Symbol("ON_MOUSE_ENTER"),d_=Symbol("ON_MOUSE_LEAVE"),{useEmitter:c_,defaultEmitter:__}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r)},s={...Ka(a),...za(n),...Tn(r)};if(e.key===s_)return o.UDCL.logEvent(Al({...s,flexibleSharingEntryPointAction:"settings",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...i,action:"settings"}}),void o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"settings",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...i,action:"settings"}});e.key!==l_?e.key!==d_||o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"settings",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...i,action:"settings"}}):o.UDCL.logEvent(Sl({...s,flexibleSharingEntryPointAction:"settings"}),{tags:{...i,action:"settings"}})})),u_=({store:e})=>{const[t,a]=T.useState(!1),r=T.useRef(null),i=c_(),s=T.useCallback((()=>{const t=e.$data.get(),a=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,n=Date.now()-e.$componentViewTime.get();i.select(s_).emit({dwellTime:a,timeSinceView:n}),e.$isHovered.set(!1);let r=!1;"loaded"!==t.status||o.isNewApiMetadata(t.objectMetadata)?"loaded"===t.status&&o.isNewApiMetadata(t.objectMetadata)&&(r=!o.getCanInvite(t.objectMetadata,cn)&&!o.getCanInvite(t.objectMetadata,_n)):r=o.getIsLinkOnlyMode(t.objectMetadata),e.$props.get().onClickSettingsButton({shouldOpenLinkSettings:r})}),[e,i]),l=T.useCallback((()=>{i.select(l_).emit(null),a(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,i]),d=T.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;i.select(d_).emit({dwellTime:t}),a(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,i]);return T.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]),T.createElement(T.Fragment,null,T.createElement(on,{"data-testid":"settings-button",onClick:s,onMouseEnter:l,onMouseLeave:d,ref:r,variant:e.$props.get().buttonVariant,"data-uxa-log":"sm24-settings-button.loaded","data-uxa-interactions":"shown click","data-campaign-element-id":"share-modal-settings-button"},T.createElement(o.UIIcon,{src:y.SettingsLine,"aria-label":i_(n.intl)})),T.createElement(o.Tooltip.Control,{open:t,placement:"top",auto:!0,triggerRef:r,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},T.createElement(o.Text,null,i_(n.intl))))};u_.displayName="LoadedButton";const m_=({store:e})=>T.createElement(u_,{store:e});m_.displayName="Inner";const g_=e=>{const t=(e=>{const t=As(),a=i.useInitStore(t,(e=>e));return i.useInitStore(e,(e=>{const t=i.store(!1),n=i.store(0),r=i.store(0);return{$props:e,$data:a,$isHovered:t,$hoverStartTime:n,$componentViewTime:r}}))})(e);return T.createElement(m_,{store:t})};g_.displayName="SettingsButton";const p_=({store:e,buttonVariant:t})=>{const a=i.useStore(e.$objectIdentifier),n=T.useCallback((t=>{e.$props.get().settingsHandler(t),e.$props.get().onActionClicked()}),[e]);return T.createElement(g_,{onClickSettingsButton:n,objectIdentifier:a,buttonVariant:t})};p_.displayName="SettingsButton";const E_=e=>e.formatMessage({id:"FuFURj",defaultMessage:"Transfer a copy"}),f_=Symbol("ON_CLICK"),h_=Symbol("ON_CLICK_ENABLE_TRANSFER"),S_=Symbol("ON_MOUSE_ENTER"),v_=Symbol("ON_MOUSE_LEAVE"),{useEmitter:A_,defaultEmitter:b_}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r)},s={...Ka(a),...za(n),...Tn(r)};if(e.key===f_)return o.UDCL.logEvent(Al({...s,flexibleSharingEntryPointAction:"transfer",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...i,action:"transfer"}}),void o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"transfer",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...i,action:"transfer"}});e.key!==S_?e.key!==v_?e.key!==h_||o.UDCL.logEvent(Al({...s,flexibleSharingEntryPointAction:"enable_transfer_tooltip"}),{tags:{...i,action:"transfer"}}):o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"transfer",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...i,action:"transfer"}}):o.UDCL.logEvent(Sl({...s,flexibleSharingEntryPointAction:"transfer"}),{tags:{...i,action:"transfer"}})})),y_=({store:e})=>{const t=A_(),a=T.useCallback((()=>{const a=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,n=Date.now()-e.$componentViewTime.get();t.select(f_).emit({dwellTime:a,timeSinceView:n}),e.$isHovered.set(!1),e.$props.get().onClickTransferButton()}),[e,t]),r=T.useCallback((()=>{t.select(S_).emit(null),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,t]),i=T.useCallback((()=>{const a=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;t.select(v_).emit({dwellTime:a}),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,t]);return T.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]),T.createElement(T.Fragment,null,T.createElement(nn,{onMouseEnter:r,onMouseLeave:i,"data-uxa-log":"sm24-transfer-button.loaded","data-uxa-interactions":"shown click"},T.createElement(en,{"data-testid":"transfer-button",onClick:a},T.createElement(Xa,null,T.createElement(o.UIIcon,{src:M.DropboxTransferLine,size:"medium"})),T.createElement(dn,null),T.createElement(rn,null,T.createElement(ln,{content:E_(n.intl)})))))};y_.displayName="ChonkyBoiiLoadedButton";const M_=({store:e})=>{const t=A_(),a=Jt(),[r,s]=T.useState(!1),l=T.useRef(null),{canUserUseTransfer:d,canContentUseTransfer:c,canUserEnableTransfer:_}=i.useStore(e.$props),u=T.useCallback((()=>{t.select(h_).emit(null),a("/team/admin/settings/sharing")}),[t,a]),m=T.useCallback((()=>{t.select(S_).emit(null),s(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,t]),g=T.useCallback((()=>{const a=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;t.select(v_).emit({dwellTime:a}),s(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,t]);let p="";var E,f;return d?c||(p=(e=>e.formatMessage({id:"LvDT7L",defaultMessage:"This is not a file type that can be copied."}))(n.intl)):_?(E=n.intl,f=()=>{u()},p=E.formatMessage({id:"eGWSHS",defaultMessage:"Your team has transfer turned off. <button>Turn on</button>"},{button:e=>T.createElement(o.Button,{variant:"transparent",onClick:f},e)})):p=(e=>e.formatMessage({id:"l+F4Tm",defaultMessage:"Ask an admin to allow Transfer a copy."}))(n.intl),T.createElement(T.Fragment,null,T.createElement(nn,{"data-uxa-log":"sm24-transfer-button.disabled","data-uxa-interactions":"shown click",ref:l,onMouseEnter:m,onMouseLeave:g},T.createElement(en,{disabled:!0},T.createElement(Xa,null,T.createElement(o.UIIcon,{src:M.DropboxTransferLine,size:"medium"})),T.createElement(dn,null),T.createElement(rn,null,T.createElement(ln,{content:E_(n.intl)})))),T.createElement(o.Tooltip.Control,{open:r,placement:"top",auto:!0,triggerRef:l,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},T.createElement(o.Text,null,p)))};M_.displayName="ChonkyBoiiDisabledButton";const I_=()=>T.createElement(nn,{"data-uxa-log":"sm24-transfer-button.loading","data-uxa-interactions":"shown click"},T.createElement(en,{disabled:!0},T.createElement(Xa,null,T.createElement(o.UIIcon,{src:M.DropboxTransferLine,size:"medium"})),T.createElement(dn,null),T.createElement(rn,null,T.createElement(o.Skeleton.Text,{size:"small",style:{marginTop:22}}))));I_.displayName="LoadingButton";const T_=({store:e})=>{const{canUserUseTransfer:t,canContentUseTransfer:a,isTransferEligibilityLoading:n}=i.useStore(e.$props);return n?T.createElement(I_,null):t&&a?T.createElement(y_,{store:e}):T.createElement(M_,{store:e})};T_.displayName="Inner";const C_=e=>{const t=(e=>{const t=As(),a=i.useInitStore(t,(e=>e));return i.useInitStore(e,(e=>{const t=i.store(!1),n=i.store(0),r=i.store(0);return{$props:e,$data:a,$isHovered:t,$hoverStartTime:n,$componentViewTime:r}}))})(e);return T.createElement(T_,{store:t})};C_.displayName="TransferButton";const R_=({store:e})=>{const t=i.useStore(e.$objectIdentifier),a=T.useCallback((()=>{e.$props.get().transferHandler(),e.$props.get().onActionClicked()}),[e]),n=i.useStore(e.$canContentUseTransfer),r=i.useStore(e.$canUserUseTransfer),o=i.useStore(e.$canUserEnableTransfer),s=i.useStore(e.$isTransferEligibilityLoading);return T.createElement(C_,{canContentUseTransfer:n,canUserUseTransfer:r,canUserEnableTransfer:o,isTransferEligibilityLoading:s,onClickTransferButton:a,objectIdentifier:t})};R_.displayName="TransferButton";const w_=e=>e.formatMessage({id:"yBYjtJ",defaultMessage:"Close"}),N_=Symbol("ON_CLICK"),L_=Symbol("ON_MOUSE_ENTER"),k_=Symbol("ON_MOUSE_LEAVE"),{useEmitter:O_,defaultEmitter:x_}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r)},s={...Ka(a),...za(n),...Tn(r)};if(e.key===N_)return o.UDCL.logEvent(Al({...s,flexibleSharingEntryPointAction:"close",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...i,action:"close"}}),void o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"close",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...i,action:"close"}});e.key!==L_?e.key!==k_||o.UDCL.logEvent(vl({...s,flexibleSharingEntryPointAction:"close",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...i,action:"close"}}):o.UDCL.logEvent(Sl({...s,flexibleSharingEntryPointAction:"close"}),{tags:{...i,action:"close"}})})),D_=({store:e})=>{const[t,a]=T.useState(!1),r=T.useRef(null),s=O_(),l=T.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,a=Date.now()-e.$componentViewTime.get();s.select(N_).emit({dwellTime:t,timeSinceView:a}),e.$isHovered.set(!1),e.$props.get().onClickCloseButton()}),[e,s]),d=T.useCallback((()=>{s.select(L_).emit(null),a(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,s]),c=T.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;s.select(k_).emit({dwellTime:t}),a(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,s]);T.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]);const _=i.useStore(e.$disabled);return T.createElement(T.Fragment,null,T.createElement(sn,{"data-testid":"close-button",onClick:l,onMouseEnter:d,onMouseLeave:c,ref:r,variant:e.$props.get().buttonVariant,disabled:_,"data-uxa-log":"sm24-close-button","data-uxa-interactions":"click"},T.createElement(o.UIIcon,{src:o.CloseLine,"aria-label":w_(n.intl)})),T.createElement(o.Tooltip.Control,{open:!_&&t,placement:"top",auto:!0,triggerRef:r,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},T.createElement(o.Text,null,w_(n.intl))))};D_.displayName="LoadedButton";const P_=({store:e})=>T.createElement(D_,{store:e});P_.displayName="Inner";const F_=e=>{const t=(e=>{const t=As(),a=i.useInitStore(t,(e=>e));return i.useInitStore(e,(e=>{const t=i.store(!1),n=i.store(0),r=i.store(0),o=i.proxy((()=>{var t;return null!==(t=e.get().disabled)&&void 0!==t&&t}));return{$props:e,$data:a,$isHovered:t,$hoverStartTime:n,$componentViewTime:r,$disabled:o}}))})(e);return T.createElement(P_,{store:t})};F_.displayName="CloseButton";const $_=({store:e,buttonVariant:t})=>{const a=i.useStore(e.$isClickawayLocked),n=T.useCallback((()=>{e.$props.get().onRequestClose()}),[e]);return T.createElement(F_,{onClickCloseButton:n,buttonVariant:t,disabled:a})};$_.displayName="CloseButton";const H_=({store:e})=>{const t=e.$props.get().objectIdentifier,a=As(),n="loaded"===a.status?a.objectIdentifier:t,r=T.useCallback((()=>{i.batch((()=>{e.$currentScreen.set(Zc.MANAGE_ACCESS),e.$isSuggestionsOpen.set(!1)}))}),[e]);return n?T.createElement("div",null,T.createElement(go,{objectIdentifier:n,onClick:r})):null};H_.displayName="ManageAccessButton";const B_=e=>e.formatMessage({id:"4mDOPx",defaultMessage:"Folder"}),U_=(e,t)=>e.formatMessage({id:"Y8cvK0",defaultMessage:"Share {contentName}"},{contentName:G.em_snippet(t,o.SNIPPET_SIZES.FILENAME)}),j_=e=>e.formatMessage({id:"EbXgYu",defaultMessage:"Create QR code"}),V_=e=>e.formatMessage({id:"Qn7mSN",defaultMessage:"People with access to"}),G_=({store:e})=>{const t=i.useStore(e.$currentScreen),a=i.useStore(e.$props),{variant:r,isLoading:s}=o.useExperimentVariant("sm24_manage_access"),l=!s,d=l&&t===Zc.INBAND,c=d&&r===o.Variant.ON,_=d&&(r===o.Variant.ON||r===o.Variant.CONTROL),u=l&&"ON"===r&&t===Zc.MANAGE_ACCESS,{firstLine:m,secondLine:g}=T.useMemo((()=>{const e=o.getFilename(a.fileOrFolder);switch(t){case Zc.INBAND:return{firstLine:(r=n.intl,r.formatMessage({id:"DOMI0b",defaultMessage:"Add people to"})),secondLine:e};case Zc.QRCODE:return{firstLine:j_(n.intl),secondLine:e};case Zc.MANAGE_ACCESS:return{firstLine:V_(n.intl),secondLine:e};case Zc.MAIN:default:return{firstLine:U_(n.intl,e),secondLine:a.fileOrFolder.is_dir?B_(n.intl):o.formatBytes(n.intl,a.fileOrFolder.bytes,2,!1)}}var r}),[t,a.fileOrFolder]);T.useEffect((()=>{_&&o.logExposure({feature:"sm24_manage_access",variant:r})}),[r,_]);const p=T.useCallback((()=>{e.$currentScreen.set(Zc.INBAND)}),[e]),E=c?220:void 0;return T.createElement(T.Fragment,null,u&&T.createElement("div",{className:Cc},T.createElement(o.IconButton,{onClick:p,variant:"borderless",shape:"standard",size:"medium",tone:"neutral","data-uxa-log":"sm24_back_button"},T.createElement(o.UIIcon,{src:o.ArrowLeftLine}))),T.createElement("div",{className:Tc},T.createElement(o.Text,{size:"medium",isBold:!0,className:Rc},T.createElement(o.Truncate,{location:.5},m)),T.createElement(o.Text,{size:"small",color:"subtle"},T.createElement(o.Truncate,{maxWidth:E,location:.5},g))),c&&T.createElement(H_,{store:e}),T.createElement("div",{className:wc},T.createElement($_,{store:e,buttonVariant:"borderless"})))};G_.displayName="HeaderSection";const q_=({store:e})=>{const t=i.useStore(e.$props),{objectIdentifier:a}=t,[n,r]=T.useState([]),[s,l]=T.useState(""),d=T.useCallback((()=>{e.$isClickawayLocked.set(!0)}),[e]),c=T.useCallback((()=>{e.$isClickawayLocked.set(!1)}),[e]),_=T.useCallback((()=>{e.$isClickawayLocked.set(!1),e.$props.get().onInbandShareCompleted(),o.invalidateObjectMembers(a),o.invalidateSharingObjectMetadata(a)}),[e,a]),u=T.useCallback((()=>{e.$isInbandStarted.set(!0)}),[e]),m=T.useCallback((t=>{e.$isSuggestionsOpen.set(t)}),[e]);return T.createElement(Wd,{objectIdentifier:t.objectIdentifier,inviteMessage:s,inviteTargets:n,hasUpdatedAccountMetadata:!1,onCloseClick:()=>t.onRequestClose(),onTargetsDropdownFocusChange:m,onInviteMessageChange:l,onInviteTargetsChange:r,onShareStart:d,onShareFailure:c,onInbandShareSuccess:_,onStartInband:u})};q_.displayName="InbandShareScreen";const z_=Symbol("ON_CLICK_OUTSIDE"),W_=Symbol("ON_RESIZE"),Z_=Symbol("ON_OPEN"),{useEmitter:K_,defaultEmitter:Y_}=o.defineLogger((async({event:e,getContextValue:t})=>{const a=t(Wa),n=t(Ga),r=t(Mn),i={...Za(a),...qa(n),...In(r)},s={...Ka(a),...za(n),...Tn(r)};e.key!==Z_?e.key!==z_&&e.key!==W_||o.UDCL.logEvent(Al({...s,flexibleSharingEntryPointAction:e.payload.action,flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView||void 0}),{tags:{...i,action:e.payload.action}}):o.UDCL.logEvent(function(e){return{class:"sharing_sender",action:"view",object:"flexible_sharing_entrypoint",properties:e}}({...s}),{tags:i})})),Q_=({children:e})=>{const t=As();return T.createElement(o.ContextProvider,{context:Mn,value:"loaded"===t.status?t.objectMetadata:null},T.createElement(Ft,{sharingObjectMetadata:"loaded"===t.status?t.objectMetadata:void 0,sharingPrefs:"loaded"===t.status?t.sharingPrefs:void 0,sharingObjectIdentifier:"loaded"===t.status?t.objectIdentifier:void 0,shareMe24Metadata:{isShareMe24:!0}},e))};Q_.displayName="LoggingMetadataProvider";const J_=({store:e})=>{const{objectIdentifier:t,settingsHandler:a,onRequestClose:n}=i.useStore(e.$props),r=As(),s=T.useCallback((e=>{"loaded"===r.status&&r.onObjectIdentifierChanged(e)}),[r]),l=T.useCallback((()=>{n()}),[n]),d=T.useCallback((()=>{e.$currentScreen.set(Zc.INBAND)}),[e]),c=T.useCallback((()=>{e.$currentScreen.set(Zc.INBAND),o.invalidateSharingObjectMetadata(t),async function(e){const t=un(e);o.sharingListSharedLinksPackage.invalidateQueries(u.queryClient,{path:t,direct_only:!0})}(t),o.invalidateObjectMembers(t)}),[t,e.$currentScreen]),_="loaded"===r.status?r.objectIdentifier:t;return _?T.createElement(cs,{objectIdentifier:_,openLinkSettings:a,onRequestClose:l,onChangeConfidentiality:d,onTransferFolderOwnership:c,onObjectIdentifierChanged:s,onConfirmationModalShownChange:()=>{}}):null};J_.displayName="ManageAccessScreen";const X_=({store:e})=>{const t=i.useStore(e.$props),a=i.useStore(e.$currentScreen),n=i.useStore(e.$isExitingMainToQr),r=i.useStore(e.$isEnteringQr),s=i.useStore(e.$isEnteringInband),l=i.useStore(e.$isInbandStarted),d=i.useStore(e.$isClickawayLocked),c=i.useStore(e.$isSuggestionsOpen),_=i.useStore(e.$componentViewTime),u=t.isOpen,m=t.displayMode,g=t.fileOrFolder,p=t.onRequestClose,E=t.settingsHandler,f=t.onActionClicked,h=K_(),S=As();T.useEffect((()=>{u&&(h.select(Z_).emit(null),e.$componentViewTime.set(Date.now()),o.publishEvent(o.CampaignEvents.SHARE_MODAL_OPENED))}),[u,h,e.$componentViewTime]);const v="loaded"===S.status&&S.accountMetadata.is_sharing_banned;T.useEffect((()=>{if(v){p();const a=t.referrerLoggingMetadata;e={actionSurface:null==a?void 0:a.actionSurface,actionElement:null==a?void 0:a.actionElement},o.UDCL.logEvent({class:"share",action:"shown",object:"sharing_banned_modal",properties:{actionSurface:e.actionSurface,actionElement:e.actionElement}}),o.mountModal(T.default.createElement(Sc,{onAfterClose:()=>{o.UDCL.logEvent({class:"share",action:"dismiss",object:"sharing_banned_modal",properties:{actionSurface:e.actionSurface,actionElement:e.actionElement}}),o.unmountModal(void 0,hc)}}),void 0,hc)}var e}),[v]),T.useEffect((()=>{if("centered_v1"===m)return;const e=()=>{if(d)return;const e=Date.now()-_,t=l?"cancel_from_inband":"cancel";h.select(W_).emit({timeSinceView:e,action:t}),p()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[e,h,l,d,_,p,m]);const A=T.useCallback((()=>{if(d||c)return;const e=Date.now()-_,t=l?"clickaway_from_inband":"clickaway";h.select(z_).emit({timeSinceView:e,action:t}),p()}),[d,c,_,l,h,p]),b=T.useCallback((()=>{E({shouldOpenLinkSettings:!0}),f()}),[f,E]),y=T.useCallback((()=>{n&&r&&(e.$isExitingMainToQr.set(!1),e.$currentScreen.set(Zc.QRCODE))}),[r,n,e.$currentScreen,e.$isExitingMainToQr]),M=T.useCallback((t=>{r&&t.animationName===Oc&&e.$isEnteringQr.set(!1)}),[e.$isEnteringQr,r]),I=T.useCallback((t=>{s&&t.animationName===Lc&&e.$isEnteringInband.set(!1)}),[s,e.$isEnteringInband]),C=T.useMemo((()=>"anchored_v1"===m?{displayMode:"anchored_v1",anchorRef:t.displayModeRef,offsetDistance:5,placement:t.displayModePositioning}:{displayMode:m,onClickOutside:A}),[m]);return T.createElement(Dc,{onEscape:A,onClickOutside:A,isOpen:u,currentScreen:a,isExitingMainToQr:n,onOverlayOrModalAnimationEnd:y,header:T.createElement(G_,{store:e}),...C},T.createElement("div",{className:o.cx("oa-pulsar-effect-SHARE_MODAL_TOKENIZER")},a===Zc.INBAND&&T.createElement("div",{onAnimationEnd:I,className:o.cx({[Nc]:s}),style:{padding:"6px"}},T.createElement(q_,{store:e})),a===Zc.MAIN&&T.createElement(T.Fragment,null,T.createElement(Pc,null,T.createElement(Kc,{store:e})),T.createElement(Pc,null,T.createElement(Fc,null,T.createElement(Wc,{store:e})),T.createElement(Fc,null,T.createElement(R_,{store:e}))),T.createElement(Pc,{styleName:o.cx(Ic,Mc)},T.createElement(o_,{store:e,buttonVariant:"filled"}),T.createElement(p_,{store:e,buttonVariant:"filled"}))),a===Zc.QRCODE&&T.createElement("div",{className:o.cx({[kc]:!n&&r}),onAnimationEnd:M},T.createElement(fc,{file:g,onSettingsClick:b,onGetQrCodeError:()=>{p()}})),a===Zc.MANAGE_ACCESS&&T.createElement(J_,{store:e})))};X_.displayName="Inner";t.Context=Ya,t.Context$1=Wa,t.Context$2=Ga,t.Emstring=G,t.Inband=Wd,t.Main=e=>{const t=(e=>i.useInitStore(e,(e=>{const t=i.proxy((()=>e.get().objectIdentifier)),a=i.proxy((()=>e.get().progressiveInbandVariant)),n=i.proxy((()=>e.get().canUserUseTransfer)),r=i.proxy((()=>e.get().canContentUseTransfer)),o=i.proxy((()=>e.get().canUserEnableTransfer)),s=i.proxy((()=>e.get().isTransferEligibilityLoading)),l=i.proxy((()=>e.get().copyLinkLoadingStateVariant)),d=i.store(0),c=i.store(!1),_=i.store(!1),u=i.store(Zc.MAIN),m=i.store(!1),g=i.store(!1),p=i.store(!1),E=i.store(!1);return{$props:e,$objectIdentifier:t,$progressiveInbandVariant:a,$copyLinkLoadingStateVariant:l,$canUserUseTransfer:n,$canContentUseTransfer:r,$canUserEnableTransfer:o,$isTransferEligibilityLoading:s,$componentViewTime:d,$isClickawayLocked:c,$isInbandStarted:_,$currentScreen:u,$isExitingMainToQr:m,$isEnteringInband:p,$isEnteringQr:g,$isSuggestionsOpen:E}})))(e),{isOpen:a,onRequestClose:n}=e;return a?T.createElement(c.ShareBlockingWrapper,{action:"share_modal",onStatusChange:e=>{"user_aborted_action"===e&&n()}},T.createElement(Q_,null,T.createElement(X_,{store:t}))):null},t.MetadataProvider=Ft,t.Provider=vs,t.SharingSdkProvider=e=>T.default.createElement(o.SafeQueryClientProviderWrapper,null,T.default.createElement(ka,{...e})),t.SharingSettingsUtil=e=>({getLinkPolicy:e=>({link_password:x(e.link_permissions)?void 0:"",expires:e.expires,allow_download:e.link_permissions.allow_download,audience:P(e.link_permissions),require_password:e.link_permissions.require_password}),getModifiedSettings:(t,a,n)=>{if(a===n)return;const r={},o=null!=t.expires&&null==a.expires;if(a.audience!==n.audience&&(r.audience=a.audience),a.allow_download!==n.allow_download&&(r.allow_download=a.allow_download),a.expires&&t.link_permissions.can_set_expiry&&(r.expires=a.expires.toISOString().split(".")[0]+"Z"),a.require_password!==n.require_password&&(r.require_password=a.require_password),"password"===a.audience||a.require_password)if(a.link_password)r.require_password=!0,r.link_password=a.link_password;else if(""===a.link_password)return{error:e.formatMessage({id:"wFrAfD",defaultMessage:"Password can’t be empty"})};return Object.keys(r).length<=0&&!o?void 0:{url:t.url,settings:r,remove_expiration:o}}}),t.TokenizerButton=Qd,t.canCreateLink=function(e,t,a,n,r,o,i,s,l,d,c,_){switch(e){case"editor":return a?o&&V(n,_)&&!r:V(n,_)&&l;case"viewer":return!("writer"===d&&!c)&&(t?s:V(n,_)&&s||i);default:return!1}},t.canCreateLinksForFolder=V,t.canModifyExpire=function(e){const t=e.link_permissions;return Boolean(t.can_set_expiry)},t.canModifyPassword=function(e){return Boolean(e&&e.can_set_password)||D(e)},t.canToggleExpire=function(e){const t=e.link_permissions;return Boolean(null!=e.expires?t.can_remove_expiry:t.can_set_expiry)},t.canTogglePassword=function(e){return Boolean(e&&e.require_password?e.can_remove_password:e.can_set_password)||D(e)},t.convertContactToInviteTarget=e=>e.type===o.ContactTypes.EMAIL?e.name&&e.name.length?{".tag":"user",dbx_team_id:e.dbx_team_id||"",...void 0!==e.photo_url?{photo_url:e.photo_url}:{},name:e.name,sort_key:e.name,dbx_account_id:e.dbx_account_id||"",email:e.email||""}:K(e.email||""):e.type===o.ContactTypes.NEW_STYLE_GROUP?{".tag":"group",dbx_team_id:e.dbx_team_id||"",members:e.members||"",name:e.name,sort_key:e.name,group_id:e.group_id||"",group_size:e.group_size||0}:e.type===o.ContactTypes.DBX_ID?{".tag":"user",dbx_team_id:e.dbx_team_id||"",...void 0!==e.photo_url?{photo_url:e.photo_url}:{},name:e.name,sort_key:e.name,dbx_account_id:e.dbx_account_id||"",email:e.email||""}:K(""),t.convertContentInfoToObjectIdentifier=e=>{var t,a,n,r;return e.isSharedFolder()?{".tag":"shared_folder",sharedFolderId:String(e.sharedFolderId()),fileId:null!==(t=e.fileId())&&void 0!==t?t:""}:e.isFileFolder()?{".tag":"file_folder",name:e.name(),path:null!==(a=e.displayPath())&&void 0!==a?a:"",fileId:null!==(n=e.fileId())&&void 0!==n?n:""}:{".tag":"file",fileId:null!==(r=e.fileId())&&void 0!==r?r:""}},t.convertInviteTargetToContact=it,t.convertLinkAccessLevelToSdkLinkAccessLevel=dt,t.convertLinksMetadataToSdkLinksMetadata=e=>{if(void 0===e)throw new Error("Adapt error");const t=[];for(const s of e)t.push((n=void 0,r=void 0,i=void 0,{".tag":(a=s).file_type,url:a.url,id:a.id,name:a.name,expires:o.convertExpirationDateToString(a.expires),path_lower:a.path_lower,link_permissions:(r=a.link_permissions,{resolved_visibility:r.resolved_visibility?(i=r.resolved_visibility,"public"===i?ee:"team_only"===i?te:"password"===i?ae:"team_and_password"===i?ne:"shared_folder_only"===i?re:"no_one"===i?oe:"only_you"===i?ie:o.exhausts(i,se)):void 0,requested_visibility:r.requested_visibility?ct(r.requested_visibility):void 0,can_revoke:r.can_revoke,visibility_policies:[],can_set_expiry:r.can_set_expiry,can_remove_expiry:r.can_remove_expiry,allow_download:r.allow_download,can_allow_download:r.can_allow_download,can_disallow_download:r.can_disallow_download,restricting_shared_folder_path:r.restricting_shared_folder_path,allow_comments:r.allow_comments,team_restricts_comments:r.team_restricts_comments,effective_audience:r.effective_audience?_t(r.effective_audience):void 0,audience_options:It(r.audience_options),link_access_level:dt(r.link_access_level),can_set_password:r.can_set_password,can_remove_password:r.can_remove_password,require_password:r.require_password,can_use_extended_sharing_controls:r.can_use_extended_sharing_controls,days_to_expire_policy:Tt(r.days_to_expire_policy),change_shared_link_expiration_policy:Ct(r.change_shared_link_expiration_policy),enforce_shared_link_password_policy:Rt(r.enforce_shared_link_password_policy)}),team_member_info:a.team_member_info?(n=a.team_member_info,{team_info:wt(n.team_info),display_name:n.display_name,member_id:n.member_id}):void 0,content_owner_team_info:a.content_owner_team_info?wt(a.content_owner_team_info):void 0,preview_type:a.preview_type}));var a,n,r,i;return{links:t,has_more:!1}},t.convertSharingInfoToSdkAccountMetadata=e=>{const t=e.user();return{user_id:t.id,email:t.email,account_id:t.account_id,root_info:{".tag":"user",root_namespace_id:"ns_id",home_namespace_id:"ns_id"},is_paid:!!t.paid,role:t.role,is_family_user:!0===e.isFamilyUser(),is_team_member:!!t.is_team,team_policies:pt(e.teamPolicy()),team_id:t.team_dbtid,is_team_admin:t.is_team_admin,team_name:t.team_name,can_use_extended_sharing_controls:!0===e.canUseExtendedSharingControls(),is_tmr_member:t.is_tmr_member,is_paired:!0===e.isPaired()}},t.convertSharingInfoToSdkInviteTargetValidation=(e,t)=>{const a=t.recipientAccess(),n=t.recipientValidation()[a]||{},r=e.map(it).map((e=>e.getKey())),o=e.map(Y),i=o.reduce(((e,t,a)=>({[t]:n[r[a]],...e})),{});return o.reduce(((e,t)=>{const a=i[t];if(!a)return e;const n={member:{".tag":"other"},result:st(a),target_invite_eligibility:{".tag":"other"}};return{...e,[t]:n}}),{})},t.convertSharingInfoToSdkObjectMetadata=e=>gt(e.metadata(),!0===e.contentInfo().isFolderInsideTeamFolderTree(),!0===e.contentInfo().isTeamSharedFolder()),t.convertSharingInfoToSdkSharingPrefs=e=>{const t=e.sharingPrefs();if(void 0===t)throw new Error("Adapt error");return{invite_after_sharing_modal_variant:Nt(t.invite_after_sharing_modal_variant),has_seen_esign_post_sharing:t.has_seen_esign_post_sharing,is_in_esign_post_sharing_exclusion_period:t.is_in_esign_post_sharing_exclusion_period,bsx_organize_around_people:t.bsx_organize_around_people,is_showing_file_upload_toolkit_campaign:t.is_showing_file_upload_toolkit_campaign,default_sharing_access_level_setting:t.default_sharing_access_level_setting,default_sharing_link_audience_setting:t.default_sharing_link_audience_setting,last_seen_team_policy_audience:t.last_seen_team_policy_audience,capture_sdk_integration_voice_overs_variant:t.capture_sdk_integration_voice_overs_variant,core_act_docsend_advanced_sharing:t.core_act_docsend_advanced_sharing,create_view_file_link_enabled:t.create_view_file_link_enabled,create_view_folder_link_enabled:t.create_view_folder_link_enabled,invite_after_sharing_resurface_variant:t.invite_after_sharing_resurface_variant,num_available_licenses:t.num_available_licenses}},t.convertSharingInfoToSdkUser=e=>{const t=e.user();return{id:t.id,email:t.email,is_team:!!t.is_team,is_team_admin:t.is_team_admin,account_id:t.account_id,team_dbtid:t.team_dbtid,is_tmr_member:t.is_tmr_member}},t.createFromEmail=K,t.createSdkObjectMetadata=gt,t.daysAfterToday=e=>{const t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),((e,t,a,n,r,o)=>(null==t&&(t=0),null==a&&(a=0),null==n&&(n=0),null==r&&(r=0),null==o&&(o=0),e.setFullYear(e.getFullYear()+t),e.setMonth(e.getMonth()+a),e.setDate(e.getDate()+n),e.setHours(e.getHours()+r),e.setMinutes(e.getMinutes()+o),e))(t,0,0,e)},t.daysExpirationPolicyToNumber=F,t.formatSubTitle=J,t.formatSubtitleNoPermissions=e=>e.formatMessage({id:"ji4c03",defaultMessage:"This folder contains subfolders that you don’t own."}),t.formatSubtitleWithPermissionsFile=e=>e.formatMessage({id:"7453qx",defaultMessage:"When specific people are invited to this file, they’ll be listed here."}),t.formatSubtitleWithPermissionsFolder=e=>e.formatMessage({id:"rgZZgG",defaultMessage:"When specific people are invited to this folder, they’ll be listed here."}),t.formatTitleNoPermissions=e=>e.formatMessage({id:"66T/EA",defaultMessage:"Can’t manage people with access"}),t.formatTitleWithPermissions=e=>e.formatMessage({id:"f7F1sF",defaultMessage:"Keep track of people and permissions"}),t.getAudienceForLink=P,t.getAvatarUrl=Q,t.getDoesServiceHavePermissionGranted=ld,t.getGroupInitials=Ri,t.getInviteAfterSharingUsers=z,t.getIsServiceConnected=sd,t.getLinkControlPolicyWarningText=function(e,t,a,n){let r="";if(j(e,a)){const e=U(a),t=B(a);r=n.formatMessage({id:"GoACO+",defaultMessage:"Your admin requires {requirements, select, 0 {an expiration and a password} 1 {a password} 2 {an expiration} other{}} for links shared outside the team. To change the link setting, delete the link and create it again."},{requirements:e&&t?0:t?1:2})}else t.display_expiration_warning?r=n.formatMessage({id:"ySRXj8",defaultMessage:"Your admin {show_password_text, select, true {requires a password and } other {}}has set an expiration for all links shared outside the team. This link will expire in {days_to_expire, plural, =365 {1 year} one {# day} other {# days}}.{expiration_enforced, select, true { You can change or remove this expiration.} other {}}"},{days_to_expire:F[a.days_to_expire_policy],expiration_enforced:"allowed"===a.change_shared_link_expiration_policy,show_password_text:!!t.display_password_warning}):t.display_password_warning&&(r=n.formatMessage({id:"lcVbzE",defaultMessage:"Your admin requires to set a password for links shared outside the team."}));return r},t.getUniqueId=Y,t.getUserInitials=wi,t.hasLinkPassword=x,t.isExpirationPolicyEnforcedByAdmin=U,t.isExpirationPolicySetByAdmin=H,t.isExternalAudience=$,t.isMemberInviteModal=W,t.isPasswordPolicyEnforcedByAdmin=B,t.isReadOnlyPolicy=j,t.listLinkedServices=dd,t.shouldShowModalVariant=Z,t.targetsSearch=_d,t.useData=As,t.useEndpoint=va,t.useLogger=Pt,t.usePlatform=Gt,t.useRedirectWindowToken=zt,t.useShowGenericRequestFailureMessage=()=>{const e=n.useIntl(),t=(()=>{const e=n.useIntl(),t=ta();return T.useCallback((a=>t((t=>T.createElement(o.Snackbar$1,{...t},T.createElement(o.Snackbar$1.Message,null,a),T.createElement(o.Snackbar$1.Actions,null,T.createElement(o.Button,{variant:"transparent",inverse:!0},Xt(e))))))),[e,t])})();return T.useCallback((()=>t(e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}))),[e,t])},t.useSnackbar=()=>{const e=n.useIntl(),a=ta(),r=Jt(),i=Gt()===t.Platforms.DESKTOP,s=i?{style:{position:"absolute",bottom:-13,left:0,right:0,borderRadius:0,minHeight:"unset"}}:{};return{showCompleted:t=>a((a=>T.createElement(o.Snackbar$1,{...a,...s,timeout:i?0:void 0,className:"sharingSdkSnackbar"},T.createElement(o.UIIcon,{src:o.CheckmarkLine}),T.createElement(o.Snackbar$1.Message,null,t.message),t.actionMessage&&t.actionOnClick&&T.createElement(o.Snackbar$1.Actions,null,T.createElement(o.Button,{variant:"transparent",onClick:t.actionOnClick},t.actionMessage)),T.createElement(o.Snackbar$1.Actions,null,T.createElement(o.Button,{variant:"transparent",onClick:a.onRequestClose},Xt(e)))))),showInProgress:e=>a((t=>T.createElement(o.Snackbar$1,{...t,...s,timeout:0,className:"sharingSdkSnackbar"},T.createElement(o.Spinner,{size:"small"}),T.createElement(o.Snackbar$1.Message,null,e.message)))),showFailure:t=>a((a=>{const n=Zt(t.helpUrl||""),l=T.useCallback((()=>{r(n)}),[n]);return T.createElement(o.Snackbar$1,{...a,...s,timeout:i?0:void 0,className:"sharingSdkSnackbar"},T.createElement(o.UIIcon,{src:o.FailLine}),T.createElement(o.Snackbar$1.Message,null,t.message),T.createElement(o.Snackbar$1.Actions,null,t.helpMessage&&t.helpUrl?T.createElement(o.Button,{variant:"transparent",onClick:l},t.helpMessage):null,T.createElement(o.Button,{variant:"transparent",onClick:a.onRequestClose},Xt(e))))}))}}}));
//# sourceMappingURL=c_shareme24_main.js-vflg72uk_.map

//# debugId=599b8acf-f0b6-35ec-9c74-3ae6da308b7f