!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c5953671-b774-356f-a8c2-37f2a01af40f")}catch(e){}}();
define(["require","exports","react","./e_file_viewer_static_scl_page_file","./e_core_exception","./c_upload_kit_lib_types","./c_base64","./c_init_data_debug_panel","./c_memoize-one","./c_core_i18n","./e_data_modules_stormcrow","./c_api_v2_client_base","./c_api_v2_routes_password_confirmation_provider","./c_browser_browser_detection","./c_src_sink_index","./c_lodash-es_lodash"],(function(e,t,_,o,a,i,r,n,s,l,u,E,d,c,R,O){"use strict";function p(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(_){if("default"!==_){var o=Object.getOwnPropertyDescriptor(e,_);Object.defineProperty(t,_,o.get?o:{enumerable:!0,get:function(){return e[_]}})}})),t.default=e,Object.freeze(t)}var I=p(_);const S=({children:t,action:_,onStatusChange:i})=>{const r=(t=>{const[_,i]=I.default.useState("init"),{viewer:r,isLoading:n}=o.useViewer();return I.default.useEffect((()=>{i("loading")}),[]),I.default.useEffect((()=>{if("loading"!==_)return;if(n)return;if(void 0===r.active_user)return void i("user_not_eligible_for_locked_state_modal");if(void 0===r.team_id||!r.team_is_locked)return void i("user_not_eligible_for_locked_state_modal");const o={action:t,isAdmin:r.active_user.is_team_admin||!1,teamName:r.team_name||"",continueCallback:()=>{i("user_continued_action")},abortCallback:()=>{i("user_aborted_action")}};new Promise((function(t,_){e(["./c_ui_locked-state-modal_open_locked_state_modal"],t,_)})).then((e=>{e.openLockedStateModal(o)})).catch((e=>{i("failure"),a.reportException({err:e,tags:["trials","locked_state_modal"]})})),i("open")}),[t,_,r,n]),_})(_),n=I.default.useRef(null);return I.default.useEffect((()=>{r!==n.current&&(i(r),n.current=r,"loading"===r?o.UDCL.logStart("ops.trials.locked_state_modal_loading",{tags:{action:_}}):"open"===r?o.UDCL.logEnd("ops.trials.locked_state_modal_loading",{eventState:"success",tags:{action:_}}):"user_not_eligible_for_locked_state_modal"===r?o.UDCL.logEnd("ops.trials.locked_state_modal_loading",{eventState:"canceled",tags:{action:_}}):"failure"===r?o.UDCL.logEnd("ops.trials.locked_state_modal_loading",{eventState:"failed",tags:{action:_}}):"user_continued_action"!==r&&"user_aborted_action"!==r||o.UDCL.logEvent("ops.trials.locked_state_modal_end_state",{tags:{status:r,action:_}}))}),[r,i,_]),"loading"===r||"open"===r||"user_aborted_action"===r?null:I.default.createElement(I.default.Fragment,null,t)};S.displayName="LockedStateModalWrapper";class A{constructor(e){this.teamAccessLevelsDefinition=e||[]}hasDefinitions(){return!!this.teamAccessLevelsDefinition.length}addTeamAccessLevel(e,t){const _=this.teamAccessLevelsDefinition.filter((t=>t.path!==e));return new A([..._,{path:e,accessLevel:t}])}getTeamAccessLevel(e){if(!this.teamAccessLevelsDefinition.length)return null;const t=this.teamAccessLevelsDefinition.reduce(((t,_)=>{const a=o.inSubDirectory(_.path,e)||o.paths_are_equal(_.path,e);if(!t)return a?_:null;const i=o.normalize(t.path),r=o.normalize(_.path),n=i.length<r.length;return a&&n?_:t}),null);return t?t.accessLevel:null}}var L,m,T,g,D,f,N,P;!function(e){e.FILE="file",e.FOLDER="folder",e.FILE_FOLDER="file_folder",e.UNKNOWN="unknown"}(L||(L={})),function(e){e.ALL_UPLOADS_COMPLETE="ALL_UPLOADS_COMPLETE",e.SET_PATH="UPLOADER_SET_PATH",e.SET_FOLDER_NS_ID="UPLOADER_SET_FOLDER_NS_ID",e.SET_USER="UPLOADER_SET_USER",e.SET_NUM_DRAGGING_FILES="SET_NUM_DRAGGING_FILES",e.READY_UPLOADS="READY_UPLOADS",e.QUEUE_UPLOADS="QUEUE_UPLOADS",e.START_UPLOAD="START_UPLOAD",e.COMPLETE_UPLOAD="COMPLETE_UPLOAD",e.CANCEL_UPLOADS="CANCEL_UPLOADS",e.SET_CURRENT_UPLOAD_PROGRESS="SET_CURRENT_UPLOAD_PROGRESS",e.UPLOAD_ERROR="UPLOAD_ERROR",e.SET_IS_UPLOAD_MODAL_OPEN="SET_IS_UPLOAD_MODAL_OPEN",e.SET_INLINE_STATUS_SHOULD_BE_DISMISSED="SET_INLINE_STATUS_SHOULD_BE_DISMISSED",e.ADD_NEW_FAILED_FILE="ADD_NEW_FAILED_FILE",e.CONFIRM_FSW="CONFIRM_FSW",e.ADD_FILES_TO_PLU="ADD_FILES_TO_PLU",e.ADD_DIRECTORIES_TO_PLU="ADD_DIRECTORIES_TO_PLU",e.REMOVE_FILES="REMOVE_FILES",e.SET_HAS_OVERQUOTA_ERROR="SET_HAS_OVERQUOTA_ERROR",e.SET_IS_PERMISSIONS_AT_UPLOAD_MODAL_OPEN="SET_IS_PERMISSIONS_AT_UPLOAD_MODAL_OPEN",e.ADD_TEAM_ACCESS_LEVEL="ADD_TEAM_ACCESS_LEVEL",e.RESET_TEAM_ACCESS_LEVELS="RESET_TEAM_ACCESS_LEVELS",e.SET_UPLOAD_PROGRESS="SET_UPLOAD_PROGRESS",e.SET_FILE_UPLOAD_TIME_LEFT="SET_FILE_UPLOAD_TIME_LEFT",e.SET_DROPZONE_ACTIVE="SET_DROPZONE_ACTIVE"}(m||(m={})),function(e){e.SET_PERMISSIONS="SET_PERMISSIONS",e.PENDING="PENDING",e.UPLOADING="UPLOADING",e.COMPLETE="COMPLETE",e.CANCELLING="CANCELLING",e.CANCELLED="CANCELLED",e.FAILED="FAILED",e.PAUSED="PAUSED",e.SKIPPED="SKIPPED"}(T||(T={})),function(e){e.WRITER="WRITER",e.READER="READER",e.NO_ACCESS="NO_ACCESS",e.INHERIT="INHERIT"}(g||(g={})),function(e){e.FILE_SIZE_ERROR="FILE_SIZE_ERROR",e.HTTP_ERROR="HTTP_ERROR",e.CONNECTION_ERROR="CONNECTION_ERROR",e.OVER_QUOTA_ERROR="OVER_QUOTA_ERROR",e.LOCKED_TEAM_ERROR="LOCKED_TEAM_ERROR",e.IGNORED="IGNORED",e.INVALID_EXTENSION="INVALID_EXTENSION",e.INVALID_FILE_NAME="INVALID_FILE_NAME",e.EMPTY_OR_FOLDER="EMPTY_OR_FOLDER",e.FOLDER_SAFARI="FOLDER_SAFARI",e.PACKAGE_FILE="PACKAGE_FILE",e.GENERIC="GENERIC",e.NOT_A_FILE="NOT_A_FILE",e.BLOCKS_MISSING_ERROR="BLOCKS_MISSING_ERROR",e.UPLOAD_BLOCK_ERROR="UPLOAD_BLOCK_ERROR",e.CHUNKS_NOT_ENABLED_ERROR="CHUNKS_NOT_ENABLED_ERROR",e.SERVER_RESPONSE_ERROR="SERVER_RESPONSE_ERROR",e.SERVER_TOKEN_EMPTY_ERROR="SERVER_TOKEN_EMPTY_ERROR",e.SERVER_TOKENS_MISSING_ERROR="SERVER_TOKENS_MISSING_ERROR",e.SERVER_HASH_RESPONSE_ERROR="SERVER_HASH_RESPONSE_ERROR",e.BLOCK_RUNTIME_ID_MISSING_ERROR="BLOCK_RUNTIME_ID_MISSING",e.CLIENT_HASH_EMPTY_ERROR="CLIENT_HASH_EMPTY_ERROR",e.SERVER_HASH_EMPTY_ERROR="SERVER_HASH_EMPTY_ERROR",e.HASHES_NOT_EQUAL_ERROR="HASHES_NOT_EQUAL_ERROR",e.BLOCK_INDEX_ERROR="BLOCK_INDEX_ERROR",e.BLOCK_EMPTY_ERROR="BLOCK_EMPTY_ERROR",e.BLOB_EMPTY_ERROR="BLOB_EMPTY_ERROR",e.BLOB_MISSING_ERROR="BLOB_MISSING_ERROR",e.CLIENT_HASH_DIGEST_ERROR="CLIENT_HASH_DIGEST_ERROR",e.FILE_READER_NULL_RESULT_ERROR="FILE_READER_NULL_RESULT_ERROR",e.UPLOAD_PRECHECK_ERROR="UPLOAD_PRECHECK_ERROR",e.UPLOAD_PRECHECK_INVALID_CHAR_ERROR="UPLOAD_PRECHECK_INVALID_CHAR_ERROR",e.PERMISSIONS_AT_UPLOAD_ERROR="PERMISSIONS_AT_UPLOAD_ERROR",e.START_UPLOAD_SESSION_ERROR="START_UPLOAD_SESSION_ERROR",e.PAYLOAD_TOO_LARGE="PAYLOAD_TOO_LARGE",e.APPEND_BLOCK_ERROR="APPEND_BLOCK_ERROR",e.APPEND_BLOCK_MISSING_PARAMS="APPEND_BLOCK_MISSING_PARAMS",e.APPEND_INCORRECT_OFFSET="APPEND_INCORRECT_OFFSET",e.APPEND_INVALID_DATA_SIZE="APPEND_INVALID_DATA_SIZE",e.APPEND_INVALID_OFFSET="APPEND_INVALID_OFFSET",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.FILE_ALREADY_UPLOADING="FILE_ALREADY_UPLOADING",e.IOS_MALFORMED_IMAGE_ERROR="IOS_MALFORMED_IMAGE_ERROR",e.ENCRYPTED_FOLDER_KEY_VERIFICATION_REQUIRED="ENCRYPTED_FOLDER_KEY_VERIFICATION_REQUIRED",e.ENCRYPTED_FOLDER_CLIENT_NOT_ENROLLED_ERROR="ENCRYPTED_FOLDER_CLIENT_NOT_ENROLLED_ERROR",e.ENCRYPTED_FOLDER_NOT_SUPPORTED_FOR_CONTENT_MANAGER="ENCRYPTED_FOLDER_NOT_SUPPORTED_FOR_CONTENT_MANAGER",e.COMMIT_FILE_ENCRYPTION_INFO_MISSING="COMMIT_FILE_ENCRYPTION_INFO_MISSING",e.COMMIT_FILE_KEY_EXPIRED="COMMIT_FILE_KEY_EXPIRED",e.COMMIT_CONCURRENT_SESSION_DATA_NOT_ALLOWED="COMMIT_CONCURRENT_SESSION_DATA_NOT_ALLOWED",e.COMMIT_CONFLICT_ERROR="COMMIT_CONFLICT_ERROR",e.COMMIT_DISALLOWED_NAME="COMMIT_DISALLOWED_NAME",e.COMMIT_DOES_NOT_FIT_TEMPLATE="COMMIT_DOES_NOT_FIT_TEMPLATE",e.COMMIT_DUPLICATE_PROPERTY_GROUPS="COMMIT_DUPLICATE_PROPERTY_GROUPS",e.COMMIT_HTTP_ERROR="COMMIT_HTTP_ERROR",e.COMMIT_INVALID_ARGS="COMMIT_INVALID_ARGS",e.COMMIT_MALFORMED_PATH="COMMIT_MALFORMED_PATH",e.COMMIT_PERMISSIONS_ERROR="COMMIT_PERMISSIONS_ERROR",e.COMMIT_PROPERTY_FIELD_TOO_LARGE="COMMIT_PROPERTY_FIELD_TOO_LARGE",e.COMMIT_READINESS_ERROR="COMMIT_READINESS_ERROR",e.COMMIT_TEMPLATE_NOT_FOUND="COMMIT_TEMPLATE_NOT_FOUND",e.COMMIT_TOO_MANY_WRITES_ERROR="COMMIT_TOO_MANY_WRITES_ERROR",e.COMMIT_UNSUPPORTED_FOLDER="COMMIT_UNSUPPORTED_FOLDER",e.COMMIT_UPLOAD_SESSION_GENERIC_ERROR="COMMIT_UPLOAD_SESSION_GENERIC_ERROR",e.COMMIT_UPLOAD_SESSION_NOT_FOUND="COMMIT_UPLOAD_SESSION_NOT_FOUND",e.COMMIT_INVALID_PATH_ROOT_NS_ID="INVALID_PATH_ROOT_NS_ID"}(D||(D={})),function(e){e.IGNORED="IGNORED",e.REJECTED="REJECTED",e.ERROR="ERROR"}(f||(f={})),function(e){e.NONE="NONE",e.BASIC_OVER_QUOTA="BASIC_OVER_QUOTA",e.BASIC_NEAR_QUOTA="BASIC_NEAR_QUOTA",e.LIMITED_TEAM_USER_OVER_QUOTA="LIMITED_TEAM_USER_OVER_QUOTA",e.LIMITED_TEAM_TSD_OVER_QUOTA="LIMITED_TEAM_TSD_OVER_QUOTA",e.LOCKED_TEAM_USER_OVER_QUOTA="LOCKED_TEAM_USER_OVER_QUOTA",e.FSS_SUSPENDED_OVER_QUOTA="FSS_SUSPENDED_OVER_QUOTA"}(N||(N={})),function(e){e.ALL="ALL",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.SKIPPED="SKIPPED"}(P||(P={})),T.SET_PERMISSIONS,D.GENERIC;const C={[i.UploadStatus.Staged]:T.PENDING,[i.UploadStatus.Queued]:T.PENDING,[i.UploadStatus.Uploading]:T.UPLOADING,[i.UploadStatus.Success]:T.COMPLETE,[i.UploadStatus.Error]:T.FAILED,[i.UploadStatus.Cancelling]:T.CANCELLING,[i.UploadStatus.Canceled]:T.CANCELLED},U=e=>({path:"/",hasPermissionToUploadToFolder:!0,folderNsId:null,user:e,fileList:o.immutableExports.OrderedMap(),uploadIdToFileIdMap:o.immutableExports.Map(),sortedUploadIds:[],numDraggingFiles:0,isDropzoneActive:!1,isEncrypted:!1,currentlyActiveDropzone:"",currentlyActivePersistentDropzone:"",isInternalTransfer:!1,isMovingIntoVault:!1,isNetworkOffline:!1,isPermissionsAtUploadModalOpen:!1,numSecondsLeft:0,currentFileNumSecondsLeft:0,confirmedFSWs:[],confirmedFSWBatchIds:[],hasOverquotaError:!1,allUploadsComplete:!1,teamAccessLevelsDefinition:new A,targetSurface:"none",overQuotaStatus:N.NONE,uploadModalType:null,lastFileUploadMethod:"upm",uiExpanded:!1,uiDismissed:!1,isFileUploaderInitialized:!1,isFolder:!1,takeoverStatus:"not_shown"});var M;!function(e){e.COMPLETE="COMPLETE",e.PENDING="PENDING",e.ERROR="ERROR",e.UPLOADING="UPLOADING",e.FINALIZING="FINALIZING",e.PAUSED="PAUSED",e.CANCELED="CANCELED",e.PARTIAL_FAILURE="PARTIAL_FAILURE"}(M||(M={}));const v=(e,t)=>o.getStateAtNamespace(e,o.UPLOAD_NAMESPACE_KEY)||U(t),h=e=>t=>v(t,e.active_user).user,F=e=>t=>{const _=(e=>t=>v(t,e.active_user).path)(e),o=h(e),a=_(t),i=o(t);if(!i)return!1;const r=i.cdm_tmf_path;return!(!r||!a.startsWith(r))};o.injectInternalStyle("/static/metaserver/static/js/file_uploader/clean/upload.module.out-vflYgHefd.css",(e=>'._outlineOuter_15uu5_1{height:100%;position:relative}._outlineOuterPersistent_15uu5_6{min-height:240px}._outlineOuterPersistent_15uu5_6,._outlineOuterPersistentEmpty_15uu5_15{align-items:center;display:flex;position:relative;width:100%;z-index:0}._outlineOuterPersistentEmpty_15uu5_15{height:calc(80vh - 350px);left:-28px}.browse-view ._outlineOuterPersistent_15uu5_6{left:0}.browse-view ._outlineOuterPersistentEmpty_15uu5_15{left:0}._outlinePersistentResponsive_15uu5_36{left:0}._displayContents_15uu5_40{display:contents}._outlineContainer_15uu5_44{bottom:1px;left:1px;pointer-events:none;position:absolute;right:1px;top:1px;z-index:1100}@media (max-width:735px){._outlineContainer_15uu5_44{left:var(--spacing__unit--2)}}._modalSubtitle_15uu5_61{display:inline-block;margin-bottom:var(--spacing__unit--1);margin-left:var(--spacing__unit--3)}._dropzoneOutline_15uu5_67{border:2px dashed var(--dig-color__primary__base);box-sizing:border-box}._dropzonePersistentOutline_15uu5_72{border:2px dashed var(--dig-color__border__base);box-sizing:border-box}._dropzonePersistentOutlineActive_15uu5_77{background-color:var(--dig-color__primary__surface);border:2px dashed var(--dig-color__primary__base);box-sizing:border-box}._fileExplorerExtraStyles_15uu5_83{margin-right:5px;top:35px}._dropzoneContainer_15uu5_88{background-color:var(--dig-color__background__base);border-radius:3px;color:var(--dig-color__text__base);font-size:20px;font-weight:700;left:0;position:absolute;text-align:center;top:0;vertical-align:middle;z-index:1001}._modalDropzone_15uu5_102{animation:_dropzone-opacity-off_15uu5_1 .5s normal forwards;display:none;height:100%;position:absolute;width:100%}._dropzoneVisible_15uu5_110{align-items:center;animation:_dropzone-opacity-on_15uu5_1 .5s normal forwards;background-color:var(--dig-color__background__base);display:flex;justify-content:center;z-index:1001}._drawerRowButton_15uu5_119{flex-shrink:0;height:auto;max-width:100px;min-height:32px;white-space:pre-wrap}._drawerRowFileActionsButtonContainer_15uu5_127{display:flex;gap:8px}._drawerRowFileActionsIcon_15uu5_132{margin-left:-4px;margin-right:-4px}._drawerRowButtonRedesign_15uu5_137{max-width:124px;min-height:24px}._drawerCloseButton_15uu5_142{margin-left:var(--spacing__unit--0_5)}._drawerFooterButton_15uu5_146{margin-right:var(--spacing__unit--2)!important}._drawerBannerContainer_15uu5_150{background-color:var(--dig-color__background__base);position:sticky;top:0;width:100%}._organizeRecommendation_15uu5_157{align-items:center;display:flex}._organizeRecommendationDestinationWrapper_15uu5_162{display:flex;margin-left:calc(var(--spacing__unit--1)*10)}._organizeRecommendationDestination_15uu5_162{color:var(--dig-color__text__subtle);text-decoration:underline}._organizeRecommendationAction_15uu5_173,._organizeRecommendationActionHidden_15uu5_174,._organizeRecommendationDestination_15uu5_162{margin-left:var(--spacing__unit--0_5)}._organizeRecommendationActionHidden_15uu5_174{visibility:hidden}._organizeRecommendationAcceptButton_15uu5_182{margin-right:var(--spacing__unit--0_5)}._organizeRecommendationAcceptButton_15uu5_182,._organizeRecommendationDismissButton_15uu5_187{margin-bottom:calc(var(--spacing__unit--0_5)/2);margin-top:calc(var(--spacing__unit--0_5)/2)}@media (max-width:735px){._drawer_15uu5_119{margin-bottom:0!important;margin-right:0!important;width:100%!important}}@keyframes _dropzone-opacity-on_15uu5_1{0%{opacity:0}to{opacity:1}}@keyframes _dropzone-opacity-off_15uu5_1{0%{opacity:1}to{display:none;opacity:0}}._folderModalTitle_15uu5_224{align-items:center;display:flex;gap:var(--spacing__unit--1)}._buttonText_15uu5_230{line-height:12px}._emptyStateViewContainer_15uu5_235{align-items:center;color:var(--dig-color__text__subtle);display:flex;flex:auto;flex-direction:column;justify-content:center}._emptyStateViewIcon_15uu5_244{margin-bottom:var(--spacing__unit--1)}._emptyStateViewLabel_15uu5_248{margin-bottom:var(--spacing__unit--3)}._drawerHeaderRightElementButtonGroup_15uu5_252{align-items:center;display:flex;flex-direction:row}._shareBanner_15uu5_258{display:flex;justify-content:flex-start;margin:0 var(--spacing__unit--1) 0 var(--spacing__unit--1);padding:var(--spacing__unit--1) var(--spacing__unit--1)}._shareBannerTextContainer_15uu5_265{display:flex;flex-direction:column;padding-right:60px}._shareBannerText_15uu5_265{margin-bottom:var(--dig-spacing__micro__medium)}._shareBannerLink_15uu5_275{color:var(--dig-color__text__subtle);text-underline-offset:var(--dig-spacing__micro__xsmall)}._downloadDesktopBannerIconContainer_15uu5_280{margin-right:var(--dig-spacing__micro__large)}._downloadDesktopBannerContent_15uu5_284,._downloadDesktopBannerTitle_15uu5_288{display:block}._downloadDesktopBannerSubtext_15uu5_292{color:var(--dig-color__text__subtle)}._takeover_15uu5_297{align-items:center;background-color:transparent;display:flex;flex-direction:column;height:calc(100% - 60px);justify-content:center;left:0;overflow:hidden;position:absolute;right:0;top:60px;transition:opacity .5s ease-in-out,transform .5s ease-in-out;z-index:100}._takeover_15uu5_297._reversed_15uu5_315{opacity:0;transform:translateY(100%)}._takeover_15uu5_297:before{animation:_fill-up_15uu5_1 .5s forwards;background-color:var(--dig-color__success__base);bottom:0;content:"";height:0;left:0;position:absolute;width:100%}._takeover-button_15uu5_333,._takeover-button-icon_15uu5_334,._takeover-dismiss-button_15uu5_335,._takeover-dismiss-suggestion-button_15uu5_336,._takeover-header_15uu5_331,._takeover-subtext_15uu5_332{animation:_fade-in_15uu5_1 .5s ease-out .5s forwards;opacity:0;z-index:1}._takeover-button-icon_15uu5_334,._takeover-button-text_15uu5_345,._takeover-dismiss-suggestion-text_15uu5_347,._takeover-dismiss-text_15uu5_346,._takeover-header_15uu5_331,._takeover-subtext_15uu5_332{color:var(--dig-color__success__on-base)}._takeover-button-text_15uu5_345,._takeover-dismiss-suggestion-text_15uu5_347,._takeover-dismiss-text_15uu5_346{font-family:var(--type__title__standard--fontfamily);font-size:12pt;font-weight:var(--type__title__small--fontweight_strong)}._takeover-dismiss-suggestion-text_15uu5_347{font-size:11pt}._takeover-subtext_15uu5_332{margin-top:var(--dig-spacing__micro__xsmall)}._takeover-button_15uu5_333,._takeover-dismiss-button_15uu5_335,._takeover-dismiss-suggestion-button_15uu5_336{border-color:var(--dig-color__success__on-base)}._takeover-button_15uu5_333{margin-top:14px}._takeover-dismiss-button_15uu5_335{margin-top:var(--dig-spacing__micro__medium)}._takeover-dismiss-suggestion-button_15uu5_336{bottom:var(--dig-spacing__micro__large);position:absolute}@keyframes _fill-up_15uu5_1{to{height:100%}}@keyframes _fade-in_15uu5_1{0%{opacity:0}to{opacity:1}}@keyframes _slide-up_15uu5_1{0%{height:0;padding:0 var(--dig-spacing__micro__large);transform:translateY(100%)}to{height:auto;padding:var(--dig-spacing__micro__large) var(--dig-spacing__micro__large);transform:translateY(0)}}._downloadDesktopBannerBottomPrompt_15uu5_418{animation:_slide-up_15uu5_1 .8s ease-out forwards;background-color:var(--dig-color__background__base);margin:0;padding:var(--dig-spacing__micro__large);transform-origin:bottom;will-change:transform,height,padding}._downloadDesktopBannerBottomPrompt_15uu5_418>span{align-items:center;display:flex;flex-direction:row}._downloadDesktopBannerBottomPromptButton_15uu5_434{margin:var(--dig-spacing__micro__small)}._downloadDesktopBanner2Content_15uu5_438{align-items:center;display:flex;flex-direction:row;gap:var(--dig-spacing__micro__medium);width:100%}._downloadDesktopBanner2IconContainer_15uu5_446{flex-shrink:0;margin-right:var(--dig-spacing__micro__small)}._downloadDesktopBanner2Title_15uu5_451{color:var(--dig-color__text__base);font-weight:var(--type__title__small--fontweight_strong);margin-bottom:0}._downloadDesktopBanner2Subtext_15uu5_457{color:var(--dig-color__text__subtle);font-size:var(--type__body__small--fontsize);margin-bottom:0}._downloadDesktopBanner2Button_15uu5_463{background-color:var(--dig-color__background__base);border-color:var(--dig-color__border__subtle);color:var(--dig-color__text__base);margin:0 0 0 auto;padding:var(--dig-spacing__micro__small) var(--dig-spacing__micro__medium)}'));var b;!function(e){e[e.CURRENT_ONLY=0]="CURRENT_ONLY",e[e.LOCKED_WITH_CURRENT_FALLBACK=1]="LOCKED_WITH_CURRENT_FALLBACK"}(b||(b={}));class y{constructor(e){this._context=e}async fetch(e=!0){try{const _=await(t=new o.DefaultUserApiV2Client(o.mustGetActiveUserApiV2Properties()),t.ns("storefront_self_serve")).rpc("team_subscription_info",{use_edgestore:e},{});_.current_team_subscription_info&&(this._current_licenses=_.current_team_subscription_info.licenses,this._quota_info=_.current_team_subscription_info.quota),_.locked_team_subscription_info&&(this._locked_licenses=_.locked_team_subscription_info.licenses,this._quota_info=_.locked_team_subscription_info.quota)}catch(e){a.reportException({err:e,severity:a.SEVERITY.NONCRITICAL,tags:["storefront_self_serve"]})}var t;return this}get licenses(){return this._context===b.LOCKED_WITH_CURRENT_FALLBACK&&this._locked_licenses?this._locked_licenses:this._current_licenses}get quota(){return this._quota_info}}function w(){return function(){let e="";for(let t=0;t<16;++t)e+=String.fromCharCode(Math.floor(256*Math.random()));let t=r.encode(e);return t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t=t.replace(/\=*$/,""),t}()}I.default.createElement("div",{className:"_folderModalTitle_15uu5_224"},I.default.createElement("span",null,l.intl.formatMessage({id:"2sJoAc",defaultMessage:"Upload file in..."})),I.default.createElement(o.Toggletip,{"aria-label":"More information",iconButtonSize:"standard",title:l.intl.formatMessage({id:"Grmp0v",defaultMessage:"Choose a folder you have access to"})}));var x;!function(e){e.UploadsGroupingHeaderRow="uploads_grouping_header_row",e.UploadFileRow="upload_file_row"}(x||(x={}));const k=e=>e.status===T.CANCELLING||e.status===T.CANCELLED||e.statusBeforeRetry===T.CANCELLED,B=e=>e.status===i.UploadStatus.Cancelling||e.status===i.UploadStatus.Canceled,G=e=>e.status===T.FAILED||e.statusBeforeRetry===T.FAILED,V=e=>e.status===i.UploadStatus.Error,z=e=>{const t=[],_=[],o=[],a=[];return e.forEach((e=>{G(e)?_.push(e.uploadId):(e=>e.status===T.SKIPPED)(e)?o.push(e.uploadId):k(e)?a.push(e.uploadId):t.push(e.uploadId)})),[...t,..._,...o,...a]},H=O.once((e=>o.createSlice({name:"UPLOAD",initialState:U(e),reducers:{setUiDismissed(e,{payload:t}){e.uiDismissed=t},setUiExpanded(e,{payload:t}){e.uiExpanded=t},setUser(e,{payload:t}){t&&(e.user=t)},setPath(e,{payload:t}){const{path:_,hasPermissionToUploadToFolder:o=!0,isMovingIntoVault:a=!1,targetSurface:i="none",isEncrypted:r=!1}=t;e.path=_,e.hasPermissionToUploadToFolder=o,e.isMovingIntoVault=a,e.targetSurface=i,e.isEncrypted=r},setFolderNsId(e,{payload:t}){e.folderNsId=t},setHasOverquotaError(e,{payload:t}){e.hasOverquotaError=t},setUploadIdToFileIdMap(e,{payload:t}){e.uploadIdToFileIdMap=e.uploadIdToFileIdMap.withMutations((e=>{t.forEach((t=>{e.set(t[0],t[1])}))}))},addTeamLevelAccess(e,{payload:t}){e.teamAccessLevelsDefinition=e.teamAccessLevelsDefinition.addTeamAccessLevel(t.path,t.accessLevel)},resetTeamAccessLevel(e){e.teamAccessLevelsDefinition=new A},queueUploads(e,{payload:t}){const _={};for(const e of t)_[e.uploadId]=e;e.fileList=o.immutableExports.OrderedMap(_).merge(e.fileList),e.sortedUploadIds=[...t.map((e=>e.uploadId)),...e.sortedUploadIds]},removeUploads(e,{payload:t}){const _=new Set(t.map((e=>e.uploadId)));e.fileList=e.fileList.filterNot(((e,t)=>_.has(t))),e.sortedUploadIds=e.sortedUploadIds.filter((e=>!_.has(e)))},readyUploads(e,{payload:t}){for(const _ of t)e.fileList=e.fileList.update(_.uploadId,(e=>e.set("status",T.PENDING)))},resetUploadProgress(e,{payload:t}){t.forEach((t=>{e.fileList=e.fileList.update(t.uploadId,(e=>e.set("percentUploaded",0).set("progressBarPercent",0).set("numSecondsLeft",0).set("statusBeforeRetry",e.status)))}))},setUploadsProgressBar(e,{payload:t}){e.fileList=e.fileList.withMutations((e=>{t.forEach((t=>{const _=Math.max(t.percentUploaded-t.progressBarPercent,0),o=t.progressBarPercent+_/20,a=t.set("progressBarPercent",o);e.set(a.uploadId,a)}))}))},setUploadsHanging(e,{payload:t}){e.fileList=e.fileList.withMutations((e=>{t.forEach((t=>{let _=t.set("isHangingUpload",!0);_=_.set("lastLogTime",performance.now()),e.set(_.uploadId,_)}))}))},handleUploadError(e,{payload:t}){const{uploadId:_,errorType:o,errorMessage:a}=t,i=e.fileList.get(_);i&&(e.fileList=e.fileList.update(i.uploadId,(e=>e.set("errorType",o).set("errorMessage",a)))),e.sortedUploadIds=z(e.fileList)},updateFileStatuses(e,{payload:t}){let _=!1;e.fileList=e.fileList.withMutations((e=>{_=!1,t.uploadKitFiles.forEach((t=>{var o,a;e.has(t.id)&&(!_&&(o=t,a=e.get(t.id),V(o)&&!G(a)||!V(o)&&G(a)||B(o)&&!k(a)||!B(o)&&k(a))&&(_=!0),e.update(t.id,(e=>e.set("status",C[t.status]))))}))})),_&&(e.sortedUploadIds=z(e.fileList))},setNumDraggingFiles(e,{payload:t}){const{numDraggingFiles:_,isInternalTransfer:o=!1}=t;e.numDraggingFiles=_,e.isInternalTransfer=o},setIsPermissionsAtUploadModalOpen(e,{payload:t}){e.isPermissionsAtUploadModalOpen=t},setDropzoneActive(e,{payload:t}){const{isDropzoneActive:_}=t;e.isDropzoneActive=_},setDraggedPersistentDropzone(e,{payload:t}){const{activeDropzone:_}=t;e.currentlyActivePersistentDropzone=_},clearDraggedPersistentDropzone(e){e.currentlyActivePersistentDropzone=""},clearDraggedOuterDropzone(e){e.currentlyActiveDropzone=""},setCurrentlyDraggedOuterDropzone(e,{payload:t}){const{activeDropzone:_}=t;e.currentlyActiveDropzone=_},addNewFailedFile(e,{payload:t}){const{file:_,errorType:o,errorMessage:a}=t;let i=_;null==i.uploadId&&(i=i.set("uploadId",w())),i=i.set("status",T.FAILED).set("errorType",o).set("errorMessage",a).set("lastProgressTime",performance.now()),e.fileList=e.fileList.set(i.uploadId,i),e.sortedUploadIds=z(e.fileList)},addNewSkippedFiles(e,{payload:t}){for(const _ of t){const{file:t,errorType:o,errorMessage:a}=_;let i=t;null==i.uploadId&&(i=i.set("uploadId",w())),i=i.set("status",T.SKIPPED).set("errorType",o).set("errorMessage",a).set("lastProgressTime",performance.now()),e.fileList=e.fileList.set(i.uploadId,i)}e.sortedUploadIds=z(e.fileList)},confirmFSW(e,{payload:t}){const{fswIds:_,batchId:o}=t;_.forEach((t=>{e.confirmedFSWs.includes(t)||e.confirmedFSWs.push(t)})),o&&!e.confirmedFSWBatchIds.includes(o)&&e.confirmedFSWBatchIds.push(o)},setUploadProgress(e,{payload:t}){e.fileList=e.fileList.withMutations((_=>{t.forEach((t=>{const{uploadId:o,percentComplete:a,numSecondsLeft:i,secondsLeftForFile:r,lastProgressTime:n,isHangingUpload:s}=t;o&&(_.update(o,(e=>e.set("percentUploaded",a))),void 0!==i&&(e.numSecondsLeft=i),r&&_.update(o,(e=>e.set("numSecondsLeft",r))),n&&_.update(o,(e=>e.set("lastProgressTime",n))),s&&_.update(o,(e=>e.set("isHangingUpload",s))))}))}))},setUploadModalType(e,{payload:t}){e.uploadModalType=t},setLastFileUploadMethod(e,{payload:t}){e.lastFileUploadMethod=t},setIsFileUploaderInitialized(e,{payload:t}){e.isFileUploaderInitialized=t},setIsNetworkOffline(e,{payload:t}){e.isNetworkOffline=t},setOverQuotaDetails(e,{payload:t}){e.overQuotaDetails=t},setOverQuotaStatus(e,{payload:t}){e.overQuotaStatus=t},setIsFolder(e,{payload:t}){e.isFolder=t},setTakeoverStatus(e,{payload:t}){e.takeoverStatus=t}}})));function Q(e){return H(e).reducer}function K(e){var t,_,a;const i=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/get_info_for_quota_upsell",r=null!==(_=null==e?void 0:e.routeParams)&&void 0!==_?_:{},n=null!==(a=null==e?void 0:e.base)&&void 0!==a?a:window.location.origin;return new o.AjaxURL(o.replacePattern(i,r),n)}const Y=["UploadOverQuotaFetch"],W=18e4,q=6e5,j=e=>{const t=o.useSelector(h(e)),a=function(e){return H(e).actions}(t),i=o.useSelector(F(e)),r=o.useDispatch(),{data:s,error:l}=u.useQuery(Y,(async()=>await o.SilentBackgroundRequest({url:K(),data:{_subject_uid:t.id}})),{refetchOnReconnect:!1,refetchOnWindowFocus:!0,refetchInterval:t&&t.is_team?6e5:18e5,staleTime:t&&t.is_team?W:q,cacheTime:t&&t.is_team?W:q,retry:1});_.useEffect((()=>{}),[l]);const E=_.useMemo((async()=>{if(!s||!t)return;let _;try{_=JSON.parse(s)}catch(e){return}const a={userQuotaUsageRatio:_.user_quota_usage_ratio,tsdQuotaUsageRatio:_.tsd_quota_usage_ratio,inExcludedNses:_.in_excluded_nses,promptAdminToUpgradeEmailTemplateUrl:_.prompt_admin_to_upgrade_email_template_url,numTeamMembers:_.num_team_members,numTeamAdmins:_.num_team_admins,teamAdminEmail:_.team_admin_email,teamAdminFname:_.team_admin_fname},r=await(async({pathStartsWithCdmTmfPath:e,user:t,tsdQuotaUsageRatio:_,inExcludedNses:a,userQuotaUsageRatio:i,viewer:r})=>{if(n.assert(null!=t,"user is null"),t.paid||a)return N.NONE;if(t.role===o.ROLE_PERSONAL){if(i>1)return N.BASIC_OVER_QUOTA;if(i>.9)return N.BASIC_NEAR_QUOTA}if(t.is_team&&r.team_is_limited)if(t.is_cdm_member&&!e){if(_>1)return N.LIMITED_TEAM_TSD_OVER_QUOTA}else if(i>1)return N.LIMITED_TEAM_USER_OVER_QUOTA;if(t.is_team&&r.team_is_locked)return N.LOCKED_TEAM_USER_OVER_QUOTA;if(t.is_team&&i>1){const e=new y(b.CURRENT_ONLY),t=(await e.fetch()).quota;if(t&&1024===t.total)return N.FSS_SUSPENDED_OVER_QUOTA}return N.NONE})({...a,user:t,pathStartsWithCdmTmfPath:i,viewer:e});return{overQuotaDetails:a,overQuotaStatus:r}}),[s,t,i,e]);return _.useEffect((()=>{E&&E.then((e=>{e&&(r(a.setOverQuotaDetails(e.overQuotaDetails)),r(a.setOverQuotaStatus(e.overQuotaStatus)))}))}),[E]),E};var Z;!function(e){e.LOADING="loading",e.OPEN="open",e.FAILURE="failure",e.USER_NOT_ELIGIBLE_FOR_OVER_QUOTA_SWEEP_MODAL="user_not_eligible_for_over_quota_sweep_modal",e.USER_CONTINUED_ACTION="user_continued_action",e.USER_ABORTED_ACTION="user_aborted_action"}(Z||(Z={}));let X;const J=({children:t,action:i,onStatusChange:r})=>{const n=(t=>{const[i,r]=I.default.useState(Z.LOADING),{viewer:n,isLoading:s}=o.useViewer(),l=o.useExperimentVariant("sweep_m1_oq_painted_door");(l.error||!l.variant||l.isLoading)&&(l.variant=o.Variant.OFF);const u=(null==l?void 0:l.variant)?l.variant:o.Variant.OFF,E=j(n),[d,c]=_.useState(void 0);return I.default.useEffect((()=>{if(E&&E.then((e=>{e&&c(e.overQuotaStatus)})),i!==Z.LOADING||s||l.isLoading||!d)return;if(void 0===n.active_user||n.active_user.is_team||n.is_paired||d!==N.BASIC_OVER_QUOTA)return void r(Z.USER_NOT_ELIGIBLE_FOR_OVER_QUOTA_SWEEP_MODAL);if(o.logExposure({feature:"sweep_m1_oq_painted_door",variant:u}),![o.Variant.V1].includes(u))return void r(Z.USER_NOT_ELIGIBLE_FOR_OVER_QUOTA_SWEEP_MODAL);const _={action:t,continueCallback:()=>{r(Z.USER_CONTINUED_ACTION)},abortCallback:()=>{r(Z.USER_ABORTED_ACTION)}};new Promise((function(t,_){e(["./c_ui_over-quota-sweep-blocking-modal_open_over_quota_sweep_blocking_modal"],t,_)})).then((e=>{e.openOverQuotaSweepBlockingModal(_)})).catch((e=>{r(Z.FAILURE),a.reportException({err:e,tags:["discovery","over_quota_sweep_blocking_modal"]})})),r(Z.OPEN)}),[t,i,n,s,u,d,E,l.isLoading]),i})(i),s=I.default.useRef(null);return I.default.useEffect((()=>{n!==s.current&&(r(n),s.current=n,n===Z.LOADING?o.UDCL.logStart("ops.discovery.over_quota_sweep_m1_modal_loading",{tags:{action:i}}):n===Z.OPEN?o.UDCL.logEnd("ops.discovery.over_quota_sweep_m1_modal_loading",{eventState:"success",tags:{action:i}}):n===Z.USER_NOT_ELIGIBLE_FOR_OVER_QUOTA_SWEEP_MODAL?o.UDCL.logEnd("ops.discovery.over_quota_sweep_m1_modal_loading",{eventState:"canceled",tags:{action:i}}):n===Z.FAILURE?o.UDCL.logEnd("ops.discovery.over_quota_sweep_m1_modal_loading",{eventState:"failed",tags:{action:i}}):n!==Z.USER_CONTINUED_ACTION&&n!==Z.USER_ABORTED_ACTION||o.UDCL.logEvent("ops.discovery.over_quota_sweep_m1_modal_end_state",{tags:{status:n,action:i}}))}),[n,r,i]),n===Z.LOADING||n===Z.OPEN||n===Z.USER_ABORTED_ACTION?null:I.default.createElement(I.default.Fragment,null,t)};J.displayName="OverQuotaSweepBlockingModalWrapper";const $=({children:e,action:t,onStatusChange:_})=>{const{user:a,isLoading:i}=o.useMustGetActiveUser(),r=I.default.useMemo((()=>!i&&a?(e=>(X||(X=o.getStoreAndRegisterReducers({[o.UPLOAD_NAMESPACE_KEY]:Q(e)})),X))(a):null),[a,i]);return r?I.default.createElement(o.Provider,{store:r},I.default.createElement(u.QueryClientProvider,{client:u.queryClient},I.default.createElement(J,{action:t,onStatusChange:_},e))):I.default.createElement(I.default.Fragment,null,e)};$.displayName="OverQuotaSweepBlockingModalWrapperWithProviders";const ee=e=>{const{children:t,action:_,onStatusChange:o}=e;return I.createElement($,{action:_,onStatusChange:o},I.createElement(S,{action:_,onStatusChange:o},t))};ee.displayName="ShareBlockingWrapper",t.ShareBlockingWrapper=ee}));
//# sourceMappingURL=c_ui_share-blocking-wrapper_share_blocking_wrapper.js-vfl-aSbM4.map

//# debugId=c5953671-b774-356f-a8c2-37f2a01af40f